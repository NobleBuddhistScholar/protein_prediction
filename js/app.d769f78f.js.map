{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7a5a","webpack:///./src/components/GeneVisualization.vue?1991","webpack:///src/components/GeneVisualization.vue","webpack:///./src/components/GeneVisualization.vue?b2cc","webpack:///./src/components/GeneVisualization.vue","webpack:///./src/components/SummaryReport.vue?794c","webpack:///./src/config.js","webpack:///src/components/SummaryReport.vue","webpack:///./src/components/SummaryReport.vue?81ad","webpack:///./src/components/SummaryReport.vue","webpack:///./src/components/ModelTrain.vue?e686","webpack:///src/components/ModelTrain.vue","webpack:///./src/components/ModelTrain.vue?377e","webpack:///./src/components/ModelTrain.vue","webpack:///./src/components/ModelManage.vue?ac3d","webpack:///src/components/ModelManage.vue","webpack:///./src/components/ModelManage.vue?ed08","webpack:///./src/components/ModelManage.vue","webpack:///src/App.vue","webpack:///./src/App.vue?bb1d","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/components/ModelTrain.vue?8a96","webpack:///./src/components/ModelManage.vue?fb7b","webpack:///./src/components/GeneVisualization.vue?d550","webpack:///./src/components/SummaryReport.vue?9595","webpack:///./src/App.vue?f56c"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","render","_vm","this","_c","_self","attrs","_m","staticClass","class","active","currentPage","on","$event","showPage","_v","tag","staticRenderFns","directives","rawName","expression","$$selectedVal","Array","filter","target","options","selected","map","val","_value","selectedModelFile","multiple","_l","option","domProps","_s","label","ref","handleFileUpload","isUploading","uploadError","_e","fileName","style","width","progress","composing","searchKeyword","filterGenes","showReportModal","openGffReportModal","clearDetection","handleRulerHover","handleRulerLeave","getScaledWidth","geneData","metadata","left","rulerTooltipPos","rulerTooltipText","handleScroll","row","index","gene","location","getScaledPosition","getLeftPosition","getWidth","backgroundColor","getColor","type","zIndex","hoveredGene","showDetails","handleGeneHover","handleGeneLeave","getGeneTypeLabel","closeGeneDetailsModal","currentGeneDetails","downloadTxtReport","closeTxtReportModal","formatContent","txtReportContent","downloadGffReport","closeGffReportModal","gffReport","handleStreamSummary","currentReport","reportInfo","genome_id","report_date","savedGeneData","showLocationTooltip","locationTooltip","geneRows","showGeneDetailsModal","scaleFactor","progressInterval","showRulerTooltip","showRulerLine","filteredGeneRows","showGffReportModal","isGeneratingGff","modelOptions","showTxtReportModal","computed","watch","$nextTick","drawRuler","scrollToBottom","loadModelList","methods","response","fetch","ok","Error","json","models","model","filename","display_name","description","find","error","console","canvas","$refs","rulerCanvas","ctx","getContext","totalLength","scaledWidth","height","clearRect","strokeStyle","fillStyle","font","textAlign","pos","beginPath","moveTo","lineTo","stroke","fillText","event","ruler","currentTarget","rect","getBoundingClientRect","clientX","position","Math","round","container","geneRowsContainer","rulerContainer","scrollLeft","file","files","setInterval","random","formData","FormData","append","method","body","results","summary","processGeneRows","keys","parseFilename","setTimeout","async","clearInterval","log","message","alert","pattern","match","current_date","Date","toISOString","split","url","reportData","reportContent","blob","Blob","URL","createObjectURL","a","document","createElement","href","download","click","revokeObjectURL","generateResponse","gffResponse","gffData","fileInput","content","cleaned","replace","lines","html","tableRows","inTable","forEach","line","trim","isTableRow","test","processTable","processTextLine","join","rows","headers","h","dataRows","cells","colors","NSP1","NSP2","NSP3","NSP4","NSP5","NSP6","NSP7","NSP8","NSP9","NSP10","NSP11","NSP12","NSP13","NSP14","NSP15","NSP16","membrane_protein","envelope_protein","nucleocapsid_protein","uniqueGenes","features","placed","hasOverlap","JSON","parse","stringify","keyword","toLowerCase","includes","start","end","Number","some","item","itemStart","itemEnd","parseInt","genome_data","postData","status","statusText","reader","getReader","decoder","TextDecoder","done","streamDone","read","chunk","decode","stream","startsWith","substring","streamSummary","e","panel","aiReportPanelBody","scrollHeight","scrollTop","component","loading","loadReports","searchId","filteredReports","report","formatDate","actionLoading","showReport","viewReportDetails","downloadReport","downloadGFFReport","showDeleteDialog","closeReport","stopPropagation","formattedSummary","closeDetailsModal","selectedReportDetails","analysis_date","file_size","formatTimestamp","last_modified","closeDeleteModal","selectedReportForDelete","deleting","confirmDelete","notification","notificationIcon","API_BASE_URL","reports","selectedReport","showDetailsModal","showDeleteModal","show","cleanedSummary","processed","reduce","acc","tableHtml","htmlArray","processedLine","icons","success","warning","parts","date","setActionLoading","values","showNotification","element","gffFileName","gffContent","formattedContent","errorData","header","cell","$set","dateStr","isNaN","getTime","toLocaleDateString","year","month","day","timestamp","toLocaleString","selectedModel","handleFileChange","staticStyle","form","modifiers","_n","$forceUpdate","new_model_name","isTraining","startTraining","epochLogs","epoch","train","loss","toFixed","accuracy","learning_rate","toExponential","resetAll","errorMsg","modelList","trainingFinished","metrics","fileList","modelBin","modelJson","max_length","batch_size","epochs","val_ratio","from","f","res","buffer","totalEpochs","doneReading","pop","model_bytes","model_json","err","bin","Uint8Array","byte","jsonBlob","a2","loadModels","filteredModels","model_type","viewModelDetails","showRenameDialog","exportModel","selectedModelDetails","config_available","config_data","closeRenameModal","indexOf","_k","keyCode","confirmRename","arguments","newModelName","renaming","showRenameModal","new_name","contentDisposition","serverFilename","tmp","appendChild","removeChild","page","components","GeneVisualization","SummaryReport","ModelTrain","ModelManage","config","productionTip","App","$mount"],"mappings":"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","file":"js/app.d769f78f.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/protein_prediction/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[_vm._m(0),_c('div',{staticClass:\"main-container\"},[_c('div',{staticClass:\"sidebar\"},[_c('button',{class:{ active: _vm.currentPage === 'GeneVisualization' },on:{\"click\":function($event){return _vm.showPage('GeneVisualization')}}},[_c('i',{staticClass:\"fa-solid fa-flask-vial\"}),_vm._v(\" 基因组注释 \")]),_c('button',{class:{ active: _vm.currentPage === 'SummaryReport' },on:{\"click\":function($event){return _vm.showPage('SummaryReport')}}},[_c('i',{staticClass:\"fa-solid fa-folder-open\"}),_vm._v(\" 总报告管理 \")]),_c('button',{class:{ active: _vm.currentPage === 'ModelTrain' },on:{\"click\":function($event){return _vm.showPage('ModelTrain')}}},[_c('i',{staticClass:\"fa-solid fa-folder-open\"}),_vm._v(\" 模型训练 \")]),_c('button',{class:{ active: _vm.currentPage === 'ModelManage' },on:{\"click\":function($event){return _vm.showPage('ModelManage')}}},[_c('i',{staticClass:\"fa-solid fa-folder-open\"}),_vm._v(\" 模型管理 \")])]),_c('div',{staticClass:\"content\"},[_c('transition',{attrs:{\"name\":\"fade\",\"mode\":\"out-in\"}},[_c(_vm.currentPage,{tag:\"component\"})],1)],1)])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"header\"},[_c('h1',[_vm._v(\"Virgenta\")]),_c('p',[_vm._v(\"基于HyperFusion cortex(HFC)的轻量病毒基因组注释系统-高效解析泛基因组非核心基因突变\")]),_c('p',[_vm._v(\"全自动预测病毒基因中的蛋白质序列并生成报告\")])])\n}]\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"header-section\"},[_vm._m(0),_c('div',{staticClass:\"model-select-container\"},[_c('label',{staticClass:\"model-select-label\"},[_vm._v(\"选择模型：\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedModelFile),expression:\"selectedModelFile\"}],staticClass:\"model-select\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedModelFile=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.modelOptions),function(option){return _c('option',{key:option.value,domProps:{\"value\":option.value}},[_vm._v(\" \"+_vm._s(option.label)+\" \")])}),0)]),_c('div',{staticClass:\"file-upload-container\"},[_c('label',{staticClass:\"file-upload-button\"},[_c('input',{ref:\"fileInput\",attrs:{\"type\":\"file\",\"accept\":\".fasta\"},on:{\"change\":_vm.handleFileUpload}}),(!_vm.isUploading &&!_vm.uploadError)?_c('span',[_c('i',{staticClass:\"icon-upload\"}),_vm._v(\" \"+_vm._s(_vm.fileName || '选择FASTA文件')+\" \")]):_vm._e(),(_vm.isUploading)?_c('span',{staticClass:\"uploading-text\"},[_c('i',{staticClass:\"fa-solid fa-spinner fa-spin\"}),_vm._v(\" 正在分析中... \")]):_vm._e(),(_vm.uploadError)?_c('span',{staticClass:\"error-text\"},[_c('i',{staticClass:\"fa-solid fa-exclamation-triangle\"}),_vm._v(\" \"+_vm._s(_vm.uploadError)+\" \")]):_vm._e()]),(_vm.isUploading)?_c('div',{staticClass:\"progress-container\"},[_c('div',{staticClass:\"progress-bar\",style:({ width: _vm.progress + '%' })}),_c('span',{staticClass:\"progress-text\"},[_vm._v(_vm._s(_vm.progress)+\"%\")])]):_vm._e()])]),(_vm.geneData)?_c('div',[_vm._m(1),_c('div',{staticClass:\"search-button-container\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchKeyword),expression:\"searchKeyword\"}],attrs:{\"type\":\"text\",\"placeholder\":\"按蛋白类型搜索\"},domProps:{\"value\":(_vm.searchKeyword)},on:{\"input\":[function($event){if($event.target.composing)return;_vm.searchKeyword=$event.target.value},_vm.filterGenes]}}),_c('div',{staticClass:\"control-buttons\"},[_c('button',{on:{\"click\":_vm.showReportModal}},[_c('i',{staticClass:\"fa-solid fa-table-list\"}),_vm._v(\" 查看txt报告 \")]),_c('button',{on:{\"click\":_vm.openGffReportModal}},[_c('i',{staticClass:\"fa-solid fa-file-alt\"}),_vm._v(\" 查看GFF报告 \")]),_c('button',{on:{\"click\":_vm.clearDetection}},[_c('i',{staticClass:\"fa-solid fa-power-off\"}),_vm._v(\" 关闭预测 \")])])]),_c('div',{staticClass:\"gene-visualization-wrapper\"},[_c('div',{ref:\"rulerContainer\",staticClass:\"ruler-container\",on:{\"mousemove\":_vm.handleRulerHover,\"mouseleave\":_vm.handleRulerLeave}},[_c('canvas',{ref:\"rulerCanvas\",staticClass:\"ruler-canvas\"}),_c('div',{staticClass:\"gene-length-bar\",style:({ width: _vm.getScaledWidth(_vm.geneData.metadata.length) + 'px' })}),(_vm.showRulerTooltip)?_c('div',{staticClass:\"ruler-tooltip\",style:({ left: _vm.rulerTooltipPos + 'px' })},[_vm._v(\" \"+_vm._s(_vm.rulerTooltipText)+\" \")]):_vm._e(),(_vm.showRulerLine)?_c('div',{staticClass:\"ruler-line\",style:({ left: _vm.rulerTooltipPos + 'px' })}):_vm._e(),_c('div',{ref:\"geneRowsContainer\",staticClass:\"gene-rows-container\",on:{\"scroll\":_vm.handleScroll}},_vm._l((_vm.filteredGeneRows),function(row,index){return _c('div',{key:index,staticClass:\"gene-row\"},_vm._l((row),function(gene){return _c('div',{key:gene.location,staticClass:\"gene-item\",style:({\n                left: _vm.getScaledPosition(_vm.getLeftPosition(gene)) + 'px',\n                width: _vm.getScaledWidth(_vm.getWidth(gene)) + 'px',\n                backgroundColor: _vm.getColor(gene.type),\n                zIndex: _vm.hoveredGene === gene.location ? 10 : 1,\n              }),on:{\"click\":function($event){return _vm.showDetails(gene)},\"mouseenter\":function($event){return _vm.handleGeneHover(gene)},\"mouseleave\":function($event){return _vm.handleGeneLeave(gene)}}},[_c('span',{staticClass:\"gene-type-label\"},[_vm._v(\" \"+_vm._s(_vm.getGeneTypeLabel(gene.type))+\" \")]),(_vm.hoveredGene === gene.location)?_c('div',{staticClass:\"gene-tooltip\"},[_c('div',[_vm._v(_vm._s(gene.type))]),_c('div',[_vm._v(\"位置: \"+_vm._s(gene.location))])]):_vm._e()])}),0)}),0)]),(_vm.showGeneDetailsModal)?_c('div',{staticClass:\"modal\"},[_c('div',{staticClass:\"modal-content\"},[_c('span',{staticClass:\"close\",on:{\"click\":_vm.closeGeneDetailsModal}},[_vm._v(\"×\")]),_c('h3',{staticClass:\"modal-title\"},[_vm._v(\"基因详细信息\")]),_c('div',{staticClass:\"gene-details\"},[_c('div',{staticClass:\"detail-row\"},[_c('div',{staticClass:\"detail-label\"},[_vm._v(\"基因ID:\")]),_c('div',{staticClass:\"detail-value\"},[_vm._v(_vm._s(_vm.currentGeneDetails.location))])]),_c('div',{staticClass:\"detail-row\"},[_c('div',{staticClass:\"detail-label\"},[_vm._v(\"基因类型:\")]),_c('div',{staticClass:\"detail-value\"},[_vm._v(_vm._s(_vm.currentGeneDetails.type))])]),_c('div',{staticClass:\"detail-row\"},[_c('div',{staticClass:\"detail-label\"},[_vm._v(\"位置:\")]),_c('div',{staticClass:\"detail-value\"},[_vm._v(_vm._s(_vm.currentGeneDetails.location))])]),_c('div',{staticClass:\"detail-row\"},[_c('div',{staticClass:\"detail-label\"},[_vm._v(\"长度:\")]),_c('div',{staticClass:\"detail-value\"},[_vm._v(_vm._s(_vm.getWidth(_vm.currentGeneDetails)))])])])])]):_vm._e(),(_vm.showTxtReportModal)?_c('div',{staticClass:\"modal\"},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"modal-header\"},[_c('h3',{staticClass:\"modal-title\"},[_vm._v(\"TXT 分析报告\")]),_c('button',{staticClass:\"modal-download\",on:{\"click\":_vm.downloadTxtReport}},[_c('i',{staticClass:\"fa-solid fa-download\"}),_vm._v(\" 下载 \")]),_c('span',{staticClass:\"close\",on:{\"click\":_vm.closeTxtReportModal}},[_vm._v(\"×\")])]),_c('div',{staticClass:\"report-content\",domProps:{\"innerHTML\":_vm._s(_vm.formatContent(_vm.txtReportContent))}})])]):_vm._e(),(_vm.showGffReportModal)?_c('div',{staticClass:\"modal\"},[_c('div',{staticClass:\"modal-content\"},[_c('div',{staticClass:\"modal-header\"},[_c('h3',{staticClass:\"modal-title\"},[_vm._v(\"GFF报告\")]),_c('button',{staticClass:\"modal-download\",on:{\"click\":_vm.downloadGffReport}},[_c('i',{staticClass:\"fa-solid fa-download\"}),_vm._v(\" 下载 \")]),_c('span',{staticClass:\"close\",on:{\"click\":_vm.closeGffReportModal}},[_vm._v(\"×\")])]),_c('div',{staticClass:\"gff-modal-content\",domProps:{\"innerHTML\":_vm._s(_vm.gffReport)}})])]):_vm._e(),_c('div',{staticClass:\"ai-report-panel\"},[_c('div',{staticClass:\"ai-report-panel-header\"},[_c('i',{staticClass:\"fa-solid fa-robot\"}),_vm._v(\" AI分析报告 \"),_c('button',{staticClass:\"ai-report-regenerate\",attrs:{\"disabled\":_vm.isUploading || !_vm.geneData},on:{\"click\":_vm.handleStreamSummary}},[_c('i',{staticClass:\"fa-solid fa-rotate\"}),_vm._v(\" 重新生成 \")])]),_c('div',{ref:\"aiReportPanelBody\",staticClass:\"ai-report-panel-body\"},[(_vm.isUploading && !_vm.currentReport)?_c('div',{staticClass:\"ai-report-loading\"},[_c('i',{staticClass:\"fa-solid fa-spinner fa-spin\"}),_vm._v(\" 正在生成AI分析报告... \")]):(_vm.uploadError)?_c('div',{staticClass:\"ai-report-error\"},[_c('i',{staticClass:\"fa-solid fa-exclamation-triangle\"}),_vm._v(\" \"+_vm._s(_vm.uploadError)+\" \")]):(_vm.currentReport)?_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.formatContent(_vm.currentReport))}}):_c('div',{staticClass:\"ai-report-empty\"},[_vm._v(\" 暂无AI分析报告，请点击上方按钮生成。 \"),(_vm.geneData)?_c('div',{staticClass:\"ai-report-empty-tip\"},[_vm._v(\" 可以点击\\\"重新生成\\\"按钮来获取关于此基因组的AI分析报告。 \")]):_c('div',{staticClass:\"ai-report-empty-tip\"},[_vm._v(\" 请先上传基因组数据。 \")])])])])])]):_vm._e()])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('h2',{staticClass:\"section-title\"},[_c('i',{staticClass:\"fa-solid fa-microscope\"}),_vm._v(\" 基因组注释 \")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('h3',{staticClass:\"gene-visualization-title\"},[_c('i',{staticClass:\"fa-solid fa-dna\"}),_vm._v(\" 基因组图谱 \")])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <!-- 头部部分 -->\r\n    <div class=\"header-section\">\r\n      <h2 class=\"section-title\">\r\n        <i class=\"fa-solid fa-microscope\"></i> 基因组注释\r\n      </h2>\r\n      <div class=\"model-select-container\">\r\n        <label class=\"model-select-label\">选择模型：</label>\r\n        <select v-model=\"selectedModelFile\" class=\"model-select\">\r\n          <option v-for=\"option in modelOptions\" :key=\"option.value\" :value=\"option.value\">\r\n            {{ option.label }}\r\n          </option>\r\n        </select>\r\n      </div> \r\n      <div class=\"file-upload-container\">\r\n        <label class=\"file-upload-button\">\r\n          <input type=\"file\" ref=\"fileInput\" @change=\"handleFileUpload\" accept=\".fasta\" />\r\n          <span v-if=\"!isUploading &&!uploadError\">\r\n            <i class=\"icon-upload\"></i> {{ fileName || '选择FASTA文件' }}\r\n          </span>\r\n          <span v-if=\"isUploading\" class=\"uploading-text\">\r\n            <i class=\"fa-solid fa-spinner fa-spin\"></i> 正在分析中...\r\n          </span>\r\n          <span v-if=\"uploadError\" class=\"error-text\">\r\n            <i class=\"fa-solid fa-exclamation-triangle\"></i> {{ uploadError }}\r\n          </span>\r\n        </label>\r\n        <div v-if=\"isUploading\" class=\"progress-container\">\r\n          <div class=\"progress-bar\" :style=\"{ width: progress + '%' }\"></div>\r\n          <span class=\"progress-text\">{{ progress }}%</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div v-if=\"geneData\">\r\n      <h3 class=\"gene-visualization-title\">\r\n        <i class=\"fa-solid fa-dna\"></i> 基因组图谱\r\n      </h3>\r\n      <div class=\"search-button-container\">\r\n        <!-- 新增搜索框 -->\r\n        <input\r\n          type=\"text\"\r\n          v-model=\"searchKeyword\"\r\n          placeholder=\"按蛋白类型搜索\"\r\n          @input=\"filterGenes\"\r\n        />\r\n        <!-- 控制按钮 -->\r\n        <div class=\"control-buttons\">\r\n          <button @click=\"showReportModal\">\r\n            <i class=\"fa-solid fa-table-list\"></i> 查看txt报告\r\n          </button>\r\n          <button @click=\"openGffReportModal\">\r\n            <i class=\"fa-solid fa-file-alt\"></i> 查看GFF报告\r\n          </button>\r\n          <!-- <button @click=\"handleStreamSummary\" :disabled=\"isUploading || !geneData\">\r\n            <i class=\"fa-solid fa-robot\"></i> 生成AI分析报告\r\n          </button> -->\r\n          <button @click=\"clearDetection\">\r\n            <i class=\"fa-solid fa-power-off\"></i> 关闭预测\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"gene-visualization-wrapper\">\r\n        <!-- 刻度尺容器 -->\r\n        <div class=\"ruler-container\" ref=\"rulerContainer\" @mousemove=\"handleRulerHover\" @mouseleave=\"handleRulerLeave\">\r\n          <canvas ref=\"rulerCanvas\" class=\"ruler-canvas\"></canvas>\r\n          <!-- 基因总长度条 -->\r\n          <div\r\n            class=\"gene-length-bar\"\r\n            :style=\"{ width: getScaledWidth(geneData.metadata.length) + 'px' }\"\r\n          ></div>\r\n          <!-- 新增：显示刻度提示 -->\r\n          <div\r\n            v-if=\"showRulerTooltip\"\r\n            class=\"ruler-tooltip\"\r\n            :style=\"{ left: rulerTooltipPos + 'px' }\"\r\n          >\r\n            {{ rulerTooltipText }}\r\n          </div>\r\n          <!-- 新增：显示垂直虚线 -->\r\n          <div\r\n            v-if=\"showRulerLine\"\r\n            class=\"ruler-line\"\r\n            :style=\"{ left: rulerTooltipPos + 'px' }\"\r\n          ></div>\r\n\r\n          <!-- 基因段显示区域 -->\r\n          <div class=\"gene-rows-container\" ref=\"geneRowsContainer\" @scroll=\"handleScroll\">\r\n            <!-- 修改这里：使用filteredGeneRows而不是geneRows -->\r\n            <div v-for=\"(row, index) in filteredGeneRows\" :key=\"index\" class=\"gene-row\">\r\n              <div\r\n                v-for=\"gene in row\"\r\n                :key=\"gene.location\"\r\n                :style=\"{\r\n                  left: getScaledPosition(getLeftPosition(gene)) + 'px',\r\n                  width: getScaledWidth(getWidth(gene)) + 'px',\r\n                  backgroundColor: getColor(gene.type),\r\n                  zIndex: hoveredGene === gene.location ? 10 : 1,\r\n                }\"\r\n                class=\"gene-item\"\r\n                @click=\"showDetails(gene)\"\r\n                @mouseenter=\"handleGeneHover(gene)\"\r\n                @mouseleave=\"handleGeneLeave(gene)\"\r\n              >\r\n                <span class=\"gene-type-label\">\r\n                  {{ getGeneTypeLabel(gene.type) }}\r\n                </span>\r\n                <div v-if=\"hoveredGene === gene.location\" class=\"gene-tooltip\">\r\n                  <div>{{ gene.type }}</div>\r\n                  <div>位置: {{ gene.location }}</div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 基因组详细信息模态框 -->\r\n        <div v-if=\"showGeneDetailsModal\" class=\"modal\">\r\n          <div class=\"modal-content\">\r\n            <span class=\"close\" @click=\"closeGeneDetailsModal\">&times;</span>\r\n            <h3 class=\"modal-title\">基因详细信息</h3>\r\n            <div class=\"gene-details\">\r\n              <div class=\"detail-row\">\r\n                <div class=\"detail-label\">基因ID:</div>\r\n                <div class=\"detail-value\">{{ currentGeneDetails.location }}</div>\r\n              </div>\r\n              <div class=\"detail-row\">\r\n                <div class=\"detail-label\">基因类型:</div>\r\n                <div class=\"detail-value\">{{ currentGeneDetails.type }}</div>\r\n              </div>\r\n              <div class=\"detail-row\">\r\n                <div class=\"detail-label\">位置:</div>\r\n                <div class=\"detail-value\">{{ currentGeneDetails.location }}</div>\r\n              </div>\r\n              <div class=\"detail-row\">\r\n                <div class=\"detail-label\">长度:</div>\r\n                <div class=\"detail-value\">{{ getWidth(currentGeneDetails) }}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <!-- TXT报告模态框 -->\r\n        <div v-if=\"showTxtReportModal\" class=\"modal\">\r\n          <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n              <h3 class=\"modal-title\">TXT 分析报告</h3>\r\n              <button class=\"modal-download\" @click=\"downloadTxtReport\">\r\n                <i class=\"fa-solid fa-download\"></i> 下载\r\n              </button>\r\n              <span class=\"close\" @click=\"closeTxtReportModal\">&times;</span>\r\n            </div>\r\n            <div class=\"report-content\" v-html=\"formatContent(txtReportContent)\"></div>\r\n          </div>\r\n        </div>\r\n        <!-- GFF报告模态框 -->\r\n        <div v-if=\"showGffReportModal\" class=\"modal\">\r\n          <div class=\"modal-content\">\r\n            <div class=\"modal-header\">\r\n              <h3 class=\"modal-title\">GFF报告</h3>\r\n              <button class=\"modal-download\" @click=\"downloadGffReport\">\r\n                <i class=\"fa-solid fa-download\"></i> 下载\r\n              </button>\r\n              <span class=\"close\" @click=\"closeGffReportModal\">&times;</span>\r\n            </div>\r\n            <div class=\"gff-modal-content\" v-html=\"gffReport\"></div>\r\n          </div>\r\n        </div>\r\n        \r\n        <!-- AI流式分析报告对话框（非弹窗，固定在基因图谱下方） -->\r\n        <div class=\"ai-report-panel\">\r\n          <div class=\"ai-report-panel-header\">\r\n            <i class=\"fa-solid fa-robot\"></i> AI分析报告\r\n            <button @click=\"handleStreamSummary\" :disabled=\"isUploading || !geneData\" class=\"ai-report-regenerate\">\r\n              <i class=\"fa-solid fa-rotate\"></i> 重新生成\r\n            </button>\r\n          </div>\r\n          <div class=\"ai-report-panel-body\" ref=\"aiReportPanelBody\">\r\n            <div v-if=\"isUploading && !currentReport\" class=\"ai-report-loading\">\r\n              <i class=\"fa-solid fa-spinner fa-spin\"></i> 正在生成AI分析报告...\r\n            </div>\r\n            <div v-else-if=\"uploadError\" class=\"ai-report-error\">\r\n              <i class=\"fa-solid fa-exclamation-triangle\"></i> {{ uploadError }}\r\n            </div>\r\n            <div v-else-if=\"currentReport\" v-html=\"formatContent(currentReport)\"></div>\r\n            <div v-else class=\"ai-report-empty\">\r\n              暂无AI分析报告，请点击上方按钮生成。\r\n              <div v-if=\"geneData\" class=\"ai-report-empty-tip\">\r\n                可以点击\"重新生成\"按钮来获取关于此基因组的AI分析报告。\r\n              </div>\r\n              <div v-else class=\"ai-report-empty-tip\">\r\n                请先上传基因组数据。\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 新增状态存储报告信息\r\n      reportInfo: {\r\n        genome_id: '',\r\n        report_date: ''\r\n      },\r\n      geneData: null,\r\n      currentReport: null,\r\n      savedGeneData: null,\r\n      showLocationTooltip: false,\r\n      locationTooltip: '',\r\n      geneRows: [],\r\n      showGeneDetailsModal: false,\r\n      currentGeneDetails: {},\r\n      scaleFactor: 0.035, // 减小比例因子，使可视化更紧凑\r\n      // 新增状态\r\n      fileName: '',\r\n      isUploading: false,\r\n      progress: 0,\r\n      progressInterval: null,\r\n      // 新增状态\r\n      hoveredGene: null,\r\n      showRulerTooltip: false,\r\n      rulerTooltipPos: 0,\r\n      rulerTooltipText: '',\r\n      showRulerLine: true, // 新增：显示垂直虚线状态\r\n      // 新增搜索关键词状态\r\n      searchKeyword: '',\r\n      // 新增过滤后的基因行状态\r\n      filteredGeneRows: [],\r\n      // 新增GFF报告相关状态\r\n      showGffReportModal: false,\r\n      gffReport: null,\r\n      isGeneratingGff: false, // 新增状态，用于显示生成GFF文件的加载提示\r\n      uploadError: null, // 初始化uploadError\r\n      // 新增模型选择相关状态\r\n      selectedModelFile: 'HyperFusionCortex_v1.pth', // 默认选择的模型\r\n      modelOptions: [], // 模型选项列表\r\n      // 新增：TXT报告模态框显示状态\r\n      showTxtReportModal: false,\r\n      // 新增：TXT报告内容\r\n      txtReportContent: ''\r\n    };\r\n  },\r\n  computed: {\r\n    formattedReport() {\r\n      if (!this.currentReport) return '';\r\n      return this.formatContent(this.currentReport);\r\n    }\r\n  },\r\n  watch: {\r\n    geneData() {\r\n      this.$nextTick(() => {\r\n        this.drawRuler();\r\n      });\r\n    },\r\n    // AI报告流式内容变化时自动滚动到底部\r\n    currentReport() {\r\n      this.$nextTick(() => {\r\n        this.scrollToBottom();\r\n      });\r\n    }\r\n  },\r\n  mounted() {\r\n    if (this.geneData) {\r\n      this.drawRuler();\r\n    }\r\n    // 加载模型列表\r\n    this.loadModelList();\r\n  },\r\n  methods: {\r\n    // 新增：加载模型列表\r\n    async loadModelList() {\r\n      try {\r\n        const response = await fetch('http://localhost:5000/models');\r\n        if (!response.ok) throw new Error('获取模型列表失败');\r\n        \r\n        const data = await response.json();\r\n        this.modelOptions = data.models.map(model => ({\r\n          value: model.filename,\r\n          label: model.display_name + (model.description ? ` (${model.description})` : '')\r\n        }));\r\n        \r\n        // 如果当前选择的模型不在列表中，选择第一个可用模型\r\n        if (this.modelOptions.length > 0 && \r\n            !this.modelOptions.find(option => option.value === this.selectedModelFile)) {\r\n          this.selectedModelFile = this.modelOptions[0].value;\r\n        }\r\n      } catch (error) {\r\n        console.error('加载模型列表失败:', error);\r\n        // 提供默认选项\r\n        this.modelOptions = [\r\n          { value: 'HyperFusionCortex_v1.pth', label: 'HyperFusionCortex v1' }\r\n        ];\r\n      }\r\n    },\r\n\r\n    drawRuler() {\r\n      const canvas = this.$refs.rulerCanvas;\r\n      if (!canvas || !this.geneData) return;\r\n\r\n      const ctx = canvas.getContext('2d');\r\n      const totalLength = this.geneData.metadata.length;\r\n      const scaledWidth = this.getScaledWidth(totalLength);\r\n\r\n      // 设置canvas物理尺寸\r\n      canvas.width = scaledWidth;\r\n      canvas.height = 30; // 增加高度空间\r\n\r\n      // 设置canvas显示尺寸（CSS单位）\r\n      canvas.style.width = scaledWidth + 'px';\r\n      canvas.style.height = '30px';\r\n\r\n      // 清空画布\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n      // 设置绘制样式\r\n      ctx.strokeStyle = '#666';\r\n      ctx.fillStyle = '#666';\r\n      ctx.font = '10px Arial';\r\n      ctx.textAlign = 'center';\r\n\r\n      // 每1000bp一个主刻度\r\n      for (let i = 0; i <= totalLength; i += 1000) {\r\n        const pos = this.getScaledPosition(i);\r\n        // 绘制主刻度线\r\n        ctx.beginPath();\r\n        ctx.moveTo(pos, 0);\r\n        ctx.lineTo(pos, 15);\r\n        ctx.stroke();\r\n\r\n        // 绘制刻度标签\r\n        ctx.fillText(`${i / 1000}k`, pos, 25);\r\n      }\r\n\r\n      // 每500bp一个次刻度\r\n      ctx.strokeStyle = '#999';\r\n      for (let i = 0; i <= totalLength; i += 500) {\r\n        if (i % 1000 === 0) continue; // 跳过主刻度\r\n        const pos = this.getScaledPosition(i);\r\n        ctx.beginPath();\r\n        ctx.moveTo(pos, 5);\r\n        ctx.lineTo(pos, 10);\r\n        ctx.stroke();\r\n      }\r\n    },\r\n\r\n    // 处理刻度尺悬停\r\n    handleRulerHover(event) {\r\n      const ruler = event.currentTarget;\r\n      const rect = ruler.getBoundingClientRect();\r\n      const pos = event.clientX - rect.left;\r\n      const position = Math.round(pos / this.scaleFactor);\r\n\r\n      this.rulerTooltipPos = pos;\r\n      this.rulerTooltipText = position;\r\n      this.showRulerTooltip = true;\r\n      this.showRulerLine = true; // 显示垂直虚线\r\n    },\r\n    // 处理刻度尺鼠标离开\r\n    handleRulerLeave() {\r\n      this.showRulerTooltip = false;\r\n      this.showRulerLine = false; // 隐藏垂直虚线\r\n    },\r\n    // 处理基因段悬停\r\n    handleGeneHover(gene) {\r\n      this.hoveredGene = gene.location;\r\n    },\r\n\r\n    // 处理基因段离开\r\n    handleGeneLeave(gene) {\r\n      this.hoveredGene = null;\r\n    },\r\n    // 处理滚动同步\r\n    handleScroll() {\r\n      const container = this.$refs.geneRowsContainer;\r\n      const rulerContainer = this.$refs.rulerContainer;\r\n      if (container && rulerContainer) {\r\n        rulerContainer.scrollLeft = container.scrollLeft;\r\n      }\r\n    },\r\n\r\n    async handleFileUpload(event) {\r\n      const file = event.target.files[0];\r\n      if (!file) return;\r\n\r\n      this.fileName = file.name;\r\n      this.isUploading = true;\r\n      this.progress = 0;\r\n      this.uploadError = null;\r\n\r\n      // 检查 rulerCanvas 是否存在\r\n      if (this.$refs.rulerCanvas) {\r\n        // 绘制刻度尺\r\n        this.drawRuler();\r\n      }\r\n\r\n      // 模度条更新\r\n      this.progressInterval = setInterval(() => {\r\n        if (this.progress < 90) {\r\n          this.progress += Math.random() * 2;\r\n        }\r\n      }, 1000);\r\n\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n      formData.append('model_file', this.selectedModelFile); // 添加选择的模型文件参数\r\n\r\n      try {\r\n        const response = await fetch('http://localhost:5000/upload', {\r\n          method: 'POST',\r\n          body: formData\r\n        });\r\n\r\n        if (!response.ok) throw new Error('上传失败');\r\n\r\n        const data = await response.json();\r\n        this.geneData = data.results;\r\n        this.currentReport = data.summary;\r\n        this.processGeneRows();\r\n\r\n        // 新增：从响应头获取报告文件名\r\n    // 修改：直接从响应数据中获取文件名（假设字段为 filename ）\r\n        // 新增：从响应头获取报告文件名\r\n        let filename = '';\r\n        if (data.summary && data.summary.filename) {\r\n          filename = data.summary.filename;\r\n        } else if (data.summary) {\r\n          filename = Object.keys(data.summary)[0];\r\n        } else if (data.filename) {\r\n          filename = data.filename;\r\n        } else {\r\n          filename = '';\r\n        }\r\n\r\n        // 解析基因组ID和日期\r\n        const [genome_id, report_date] = this.parseFilename(filename);\r\n\r\n        this.reportInfo = {\r\n          genome_id,\r\n          report_date\r\n        };\r\n\r\n        // 完成进度\r\n        this.progress = 100;\r\n        setTimeout(async () => {\r\n          this.isUploading = false;\r\n          clearInterval(this.progressInterval);\r\n          \r\n          // 基因组处理完成后，可以自动开始生成AI报告\r\n          // 等待一小段时间再触发AI分析，让用户先查看基因图谱\r\n          setTimeout(() => {\r\n            if (this.geneData && !this.currentReport) {\r\n              console.log('自动开始生成AI分析报告...');\r\n              this.handleStreamSummary();\r\n            }\r\n          }, 1000);\r\n        }, 500);\r\n      } catch (error) {\r\n        console.error('Error:', error);\r\n        this.uploadError = '文件处理失败: ' + error.message;\r\n        this.isUploading = false;\r\n        clearInterval(this.progressInterval);\r\n        alert('文件处理失败: ' + error.message);\r\n      }\r\n    },\r\n\r\n    // 新增方法：解析文件名\r\n    parseFilename(filename) {\r\n      const pattern = /(.+)_基因组分析报告_(\\d{4}-\\d{2}-\\d{2})\\.txt/;\r\n      const match = filename.match(pattern);\r\n      return match ? [match[1], match[2]] : ['', ''];\r\n    },\r\n\r\n    // 获取TXT报告并显示为模态框（数据驱动）\r\n    async showReportModal() {\r\n      if (!this.geneData) {\r\n        alert('没有基因组数据，无法显示报告');\r\n        return;\r\n      }\r\n      try {\r\n        const genome_id = this.geneData.metadata.genome_id;\r\n        const current_date = new Date().toISOString().split('T')[0];\r\n        const url = `http://localhost:5000/summary?genome_id=${genome_id}&current_date=${current_date}`;\r\n        const response = await fetch(url);\r\n        if (!response.ok) throw new Error('报告获取失败');\r\n        const reportData = await response.json();\r\n        const reportContent = reportData[Object.keys(reportData)[0]];\r\n        this.txtReportContent = reportContent;\r\n        this.showTxtReportModal = true;\r\n        // 解析文件名\r\n        this.reportInfo = {\r\n          genome_id,\r\n          report_date: current_date\r\n        };\r\n      } catch (error) {\r\n        console.error('TXT报告加载失败:', error);\r\n        this.txtReportContent = `无法加载报告内容：${error.message}`;\r\n        this.showTxtReportModal = true;\r\n      }\r\n    },\r\n    // 关闭TXT报告模态框\r\n    closeTxtReportModal() {\r\n      this.showTxtReportModal = false;\r\n    },\r\n    // 下载TXT报告\r\n    downloadTxtReport() {\r\n      if (!this.txtReportContent) return;\r\n      const { genome_id, report_date } = this.reportInfo;\r\n      const filename = `${genome_id || 'report'}_基因组分析报告_${report_date || ''}.txt`;\r\n      const blob = new Blob([this.txtReportContent], { type: 'text/plain' });\r\n      const url = URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = filename;\r\n      a.click();\r\n      URL.revokeObjectURL(url);\r\n    },\r\n    async openGffReportModal() {\r\n    this.showGffReportModal = true;\r\n    this.isGeneratingGff = true;\r\n    try {\r\n      // 从geneData中获取genome_id\r\n      const genome_id = this.geneData.metadata.genome_id;\r\n\r\n      // 生成当前日期\r\n      const current_date = new Date().toISOString().split('T')[0];\r\n\r\n      // 发出生成GFF报告的请求\r\n      const generateResponse = await fetch(\r\n        `http://localhost:5000/generate_gff?genome_id=${genome_id}&current_date=${current_date}`\r\n      );\r\n      if (!generateResponse.ok) {\r\n        throw new Error('生成GFF报告失败');\r\n      }\r\n\r\n      // 获取GFF报告\r\n      const gffResponse = await fetch(\r\n        `http://localhost:5000/gff?genome_id=${genome_id}&current_date=${current_date}`\r\n      );\r\n      if (!gffResponse.ok) {\r\n        throw new Error('获取GFF报告失败');\r\n      }\r\n\r\n      const gffData = await gffResponse.json();\r\n      this.gffReport = gffData[Object.keys(gffData)[0]];\r\n    } catch (error) {\r\n      console.error('GFF报告处理失败:', error);\r\n      this.gffReport = `无法加载GFF报告内容：${error.message}`;\r\n    } finally {\r\n      this.isGeneratingGff = false;\r\n    }\r\n  },\r\n\r\n    // 新增方法：关闭GFF报告模态框\r\n    closeGffReportModal() {\r\n      this.showGffReportModal = false;\r\n    },\r\n\r\n    clearDetection() {\r\n      this.geneData = null;\r\n      this.currentReport = null;\r\n      this.savedGeneData = null;\r\n      this.$refs.fileInput.value = '';\r\n      this.fileName = ''; // 重置文件名\r\n      this.uploadError = null; // 重置上传错误信息\r\n      this.gffReport = null; // 重置GFF报告\r\n    },\r\n\r\n    // 清除旧的closeModal方法\r\n    \r\n\r\n    formatContent(content) {\r\n      const cleaned = content.replace(/[*#]/g, '');\r\n      const lines = cleaned.split('\\n');\r\n      let html = [];\r\n      let tableRows = [];\r\n      let inTable = false;\r\n\r\n      lines.forEach(line => {\r\n        line = line.trim();\r\n        const isTableRow = /^\\|.+?\\|$/.test(line);\r\n\r\n        if (isTableRow) {\r\n          if (!inTable) inTable = true;\r\n          tableRows.push(line);\r\n        } else {\r\n          if (inTable) {\r\n            html.push(this.processTable(tableRows));\r\n            tableRows = [];\r\n            inTable = false;\r\n          }\r\n          html.push(this.processTextLine(line));\r\n        }\r\n      });\r\n\r\n      return html.join('');\r\n    },\r\n\r\n\r\n    processTextLine(line) {\r\n      line = line.replace(/[*#]/g, '');\r\n      if (/^\\d+\\.\\s/.test(line)) return `<h3>${line.replace(/^\\d+\\.\\s/, '')}</h3>`;\r\n      if (/^- /.test(line)) return `<li>${line.replace(/^- /, '')}</li>`;\r\n      return line ? `<p>${line}</p>` : '';\r\n    },\r\n\r\n    processTable(rows) {\r\n      if (rows.length < 2) return '';\r\n      const headers = rows[0].split('|').slice(1, -1).map(h => h.trim());\r\n      const dataRows = rows.slice(2);\r\n\r\n      let html = '<table class=\"summary-table\"><thead><tr>';\r\n      headers.forEach(h => html += `<th>${h}</th>`);\r\n      html += '</tr></thead><tbody>';\r\n\r\n      dataRows.forEach(row => {\r\n        const cells = row.split('|').slice(1, -1).map(c => c.trim());\r\n        html += '<tr>';\r\n        cells.forEach(c => html += `<td>${c}</td>`);\r\n        html += '</tr>';\r\n      });\r\n\r\n      return html + '</tbody></table>';\r\n    },\r\n\r\n    getColor(type) {\r\n      const colors = {\r\n        NSP1: '#FF6B6B',\r\n        NSP2: '#4ECDC4',\r\n        NSP3: '#45B7D1',\r\n        NSP4: '#FFBE0B',\r\n        NSP5: '#FB5607',\r\n        NSP6: '#8338EC',\r\n        NSP7: '#3A86FF',\r\n        NSP8: '#FF006E',\r\n        NSP9: '#88D18A',\r\n        NSP10: '#118AB2',\r\n        NSP11: '#8A89C0',\r\n        NSP12: '#EF476F',\r\n        NSP13: '#06D6A0',\r\n        NSP14: '#1B9AAA',\r\n        NSP15: '#FFC43D',\r\n        NSP16: '#8A89b0',\r\n        membrane_protein: '#E2F0F9',\r\n        envelope_protein: '#FCD5CE',\r\n        nucleocapsid_protein: '#FFF1CC'\r\n      };\r\n      return colors[type] || '#CCCCCC';\r\n    },\r\n\r\n    showDetails(gene) {\r\n      this.currentGeneDetails = gene;\r\n      this.showGeneDetailsModal = true;\r\n    },\r\n\r\n    showLocation(position) {\r\n      this.showLocationTooltip = true;\r\n      this.locationTooltip = position;\r\n    },\r\n\r\n    hideLocation() {\r\n      this.showLocationTooltip = false;\r\n    },\r\n\r\n    processGeneRows() {\r\n      this.geneRows = [];\r\n      const uniqueGenes = {};\r\n      this.geneData.features.forEach(gene => {\r\n        if (!uniqueGenes[gene.location]) {\r\n          uniqueGenes[gene.location] = gene;\r\n          let placed = false;\r\n          for (let i = 0; i < this.geneRows.length; i++) {\r\n            if (!this.hasOverlap(this.geneRows[i], gene)) {\r\n              this.geneRows[i].push(gene);\r\n              placed = true;\r\n              break;\r\n            }\r\n          }\r\n          if (!placed) {\r\n            this.geneRows.push([gene]);\r\n          }\r\n        }\r\n      });\r\n      // 填充基因行的逻辑\r\n      this.filterGenes();\r\n    },\r\n\r\n    // 修改filterGenes方法\r\n    filterGenes() {\r\n      if (!this.searchKeyword) {\r\n        this.filteredGeneRows = JSON.parse(JSON.stringify(this.geneRows)); // 深拷贝原始数据\r\n        return;\r\n      }\r\n\r\n      const keyword = this.searchKeyword.toLowerCase().trim();\r\n      this.filteredGeneRows = this.geneRows\r\n        .map(row => row.filter(gene => gene.type.toLowerCase().includes(keyword)))\r\n        .filter(row => row.length > 0); // 只保留有基因的行\r\n    },\r\n\r\n    hasOverlap(row, gene) {\r\n      const [start, end] = gene.location.split('..').map(Number);\r\n      return row.some(item => {\r\n        const [itemStart, itemEnd] = item.location.split('..').map(Number);\r\n        return (start < itemEnd && end > itemStart);\r\n      });\r\n    },\r\n\r\n    getScaledWidth(length) {\r\n      return length * this.scaleFactor;\r\n    },\r\n\r\n    getScaledPosition(position) {\r\n      return position * this.scaleFactor;\r\n    },\r\n\r\n    getLeftPosition(gene) {\r\n      return parseInt(gene.location.split('..')[0]);\r\n    },\r\n\r\n    getWidth(gene) {\r\n      const [start, end] = gene.location.split('..').map(Number);\r\n      return end - start;\r\n    },\r\n    // 新增方法，用于关闭基因详细信息模态框\r\n    closeGeneDetailsModal() {\r\n      this.showGeneDetailsModal = false;\r\n    },\r\n    // 新增方法：根据基因类型返回显示标签\r\n    getGeneTypeLabel(type) {\r\n      switch (type) {\r\n        case 'membrane_protein':\r\n          return 'M';\r\n        case 'spike_protein':\r\n          return 'S';\r\n        case 'envelope_protein':\r\n          return 'E';\r\n        case 'nucleocapsid_protein':\r\n          return 'N';\r\n        default:\r\n          return type;\r\n      }\r\n    },\r\n        // 新增下载GFF报告的方法\r\n    downloadGffReport() {\r\n      if (this.gffReport) {\r\n        const { genome_id, report_date } = this.reportInfo;\r\n        const filename = `${genome_id || 'gff'}_annotation_${report_date || ''}.gff`;\r\n        const blob = new Blob([this.gffReport], { type: 'text/plain' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = filename;\r\n        a.click();\r\n        URL.revokeObjectURL(url);\r\n      }\r\n    },\r\n    async streamSummary(genome_id, genome_data) {\r\n      this.isUploading = true;\r\n      this.currentReport = '';\r\n      this.uploadError = null;\r\n      try {\r\n        const postData = { genome_id, genome_data };\r\n        const response = await fetch('http://localhost:5000/stream_summary', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify(postData)\r\n        });\r\n        if (!response.ok) throw new Error(`服务器响应错误: ${response.status} ${response.statusText}`);\r\n        if (!response.body) throw new Error('流式接口无响应体');\r\n        const reader = response.body.getReader();\r\n        const decoder = new TextDecoder('utf-8');\r\n        let done = false;\r\n        this.currentReport = '';\r\n        while (!done) {\r\n          const { value, done: streamDone } = await reader.read();\r\n          done = streamDone;\r\n          let chunk = '';\r\n          if (value) {\r\n            chunk = decoder.decode(value, { stream: !done });\r\n            if (chunk.startsWith('[ERROR]')) {\r\n              throw new Error(chunk.substring(7));\r\n            }\r\n            // 追加内容并强制刷新\r\n            this.currentReport += chunk;\r\n            await this.$nextTick();\r\n            this.scrollToBottom();\r\n          }\r\n        }\r\n      } catch (error) {\r\n        this.uploadError = 'AI分析失败: ' + error.message;\r\n        this.currentReport = '生成报告时出错: ' + error.message;\r\n      } finally {\r\n        this.isUploading = false;\r\n        await this.$nextTick();\r\n        this.scrollToBottom();\r\n      }\r\n    },\r\n    async handleStreamSummary() {\r\n      if (!this.geneData) {\r\n        console.error('没有基因数据，无法生成报告');\r\n        this.uploadError = '请先上传基因组数据';\r\n        return;\r\n      }\r\n      \r\n      // 清空旧的报告内容\r\n      this.currentReport = '';\r\n      this.uploadError = null;\r\n      \r\n      try {\r\n        console.log('开始生成AI分析报告...');\r\n        // 确保genome_id存在\r\n        const genome_id = this.geneData.metadata.genome_id || 'unknown';\r\n        \r\n        // 调用流式分析\r\n        await this.streamSummary(genome_id, this.geneData);\r\n      } catch (e) {\r\n        console.error('处理流式分析时出错:', e);\r\n        this.uploadError = 'AI分析失败: ' + e.message;\r\n        this.currentReport = '生成报告失败: ' + e.message;\r\n      }\r\n    },\r\n    \r\n    // 自动滚动到底部的方法\r\n    scrollToBottom() {\r\n      const panel = this.$refs.aiReportPanelBody;\r\n      if (panel) {\r\n        console.log('滚动到底部, 高度:', panel.scrollHeight);\r\n        panel.scrollTop = panel.scrollHeight;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 2.5rem 1.5rem 2rem 1.5rem;\r\n  font-family: 'Segoe UI', 'Arial', sans-serif;\r\n  background: linear-gradient(120deg, #f5f7fa 0%, #e3f0ff 100%);\r\n  min-height: 100vh;\r\n}\r\n.card {\r\n  background: #fff;\r\n  border-radius: 18px;\r\n  box-shadow: 0 8px 32px rgba(80,120,200,0.10);\r\n  margin-bottom: 2.2rem;\r\n  padding: 2.2rem 2rem 2rem 2rem;\r\n  border: none;\r\n}\r\n\r\n/* 新增刻度尺样式 */\r\n.ruler-canvas {\r\n  display: block;\r\n  margin-bottom: -10px;\r\n  background: linear-gradient(90deg, #f5f7fa 80%, #e3f0ff 100%);\r\n  border-radius: 10px;\r\n  box-shadow: 0 2px 8px rgba(80,120,200,0.06);\r\n}\r\n\r\n\r\n.gene-length-bar {\r\n  height: 6px;\r\n  background: linear-gradient(90deg, #4a89dc, #6dd5ed);\r\n  border-radius: 3px;\r\n  margin-top: 26px; /* 与canvas高度对齐 */\r\n  box-shadow: 0 2px 8px rgba(74,137,220,0.15);\r\n}\r\n\r\n\r\n/* 基因类型标签样式 */\r\n.gene-type-label {\r\n  text-shadow: 1px 1px 2px rgba(0, 87, 255, 0.8);\r\n  font-size: 12px;\r\n  padding: 2px;\r\n  user-select: none;\r\n}\r\n\r\n\r\n/* 调整基因项悬停效果 */\r\n.gene-item:hover {\r\n  transform: scale(1.05);\r\n  box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);\r\n  z-index: 15 !important;\r\n}\r\n\r\n/* 其他样式保持不变... */\r\n.header-section {\r\ndisplay: flex;\r\nalign-items: center;\r\njustify-content: space-between;\r\nmargin-bottom: 2rem;\r\nflex-wrap: wrap;\r\ngap: 1.2rem;\r\npadding: 1.5rem 1.8rem;\r\nbackground: linear-gradient(90deg, #e3f0ff 60%, #f5f7fa 100%);\r\nborder-radius: 18px;\r\nbox-shadow: 0 4px 18px rgba(80,120,200,0.10);\r\n}\r\n\r\n.section-title {\r\ncolor: #2c3e50;\r\ndisplay: flex;\r\nalign-items: center;\r\ngap: 0.7rem;\r\nmargin: 0;\r\nfont-size: 2.1rem;\r\nfont-weight: 700;\r\nletter-spacing: 1px;\r\n}\r\n\r\n.file-upload-container {\r\ndisplay: flex;\r\nflex-direction: column;\r\ngap: 0.5rem;\r\nmin-width: 250px;\r\n}\r\n\r\n.file-upload-button {\r\ndisplay: inline-flex;\r\nalign-items: center;\r\njustify-content: center;\r\npadding: 0.7rem 1.2rem;\r\nbackground: linear-gradient(135deg, #4a89dc, #5b9dff);\r\ncolor: white;\r\nborder-radius: 8px;\r\ncursor: pointer;\r\ntransition: all 0.3s;\r\nfont-weight: 500;\r\ntext-align: center;\r\nborder: none;\r\nposition: relative;\r\noverflow: hidden;\r\nbox-shadow: 0 2px 8px rgba(74,137,220,0.2);\r\n}\r\n\r\n.file-upload-button:hover {\r\nbackground: linear-gradient(135deg, #3a79cc, #4a8def);\r\ntransform: translateY(-1px);\r\nbox-shadow: 0 4px 12px rgba(74,137,220,0.3);\r\n}\r\n\r\n.file-upload-button input[type=\"file\"] {\r\nposition: absolute;\r\nleft: 0;\r\ntop: 0;\r\nwidth: 100%;\r\nheight: 100%;\r\nopacity: 0;\r\ncursor: pointer;\r\n}\r\n\r\n.uploading-text {\r\ndisplay: flex;\r\nalign-items: center;\r\ngap: 0.5rem;\r\n}\r\n\r\n.progress-container {\r\nwidth: 100%;\r\nheight: 6px;\r\nbackground-color: #e0e0e0;\r\nborder-radius: 3px;\r\nposition: relative;\r\noverflow: hidden;\r\n}\r\n\r\n.progress-bar {\r\nposition: absolute;\r\nleft: 0;\r\ntop: 0;\r\nheight: 100%;\r\nbackground-color: #3d7bdf;\r\ntransition: width 0.3s ease;\r\n}\r\n\r\n.progress-text {\r\nposition: absolute;\r\nright: 0;\r\ntop: -20px;\r\nfont-size: 0.8rem;\r\ncolor: #7f8c8d;\r\n}\r\n\r\n/* 图标样式 */\r\n@keyframes spin {\r\n0% { transform: rotate(0deg); }\r\n100% { transform: rotate(360deg); }\r\n}\r\n\r\n.icon-loading {\r\ndisplay: inline-block;\r\nanimation: spin 1s linear infinite;\r\n}\r\n/* 整体容器样式 */\r\n.container {\r\nmax-width: 1200px;\r\nmargin: 0 auto;\r\npadding: 20px;\r\nfont-family: 'Arial', sans-serif;\r\n}\r\n\r\n/* 控制按钮样式 */\r\n.control-buttons {\r\nmargin: 1rem 3px;\r\ndisplay: flex;\r\ngap: 1.2rem;\r\n}\r\n\r\n.control-buttons button {\r\npadding: 0.8rem 1.5rem;\r\nbackground: linear-gradient(135deg, #4a89dc, #6dd5ed);\r\ncolor: white;\r\nborder: none;\r\nborder-radius: 8px;\r\ncursor: pointer;\r\nfont-size: 1.05rem;\r\nfont-weight: 500;\r\ntransition: all 0.3s;\r\nbox-shadow: 0 2px 8px rgba(74,137,220,0.15);\r\ndisplay: flex;\r\nalign-items: center;\r\ngap: 0.5rem;\r\n}\r\n\r\n.control-buttons button:hover {\r\nbackground: linear-gradient(135deg, #3a79cc, #5cc5dd);\r\ntransform: translateY(-1px);\r\nbox-shadow: 0 4px 12px rgba(74,137,220,0.25);\r\n}\r\n\r\n/* 基因可视化包装器 */\r\n.gene-visualization-wrapper {\r\nborder: none;\r\nborder-radius: 18px;\r\npadding: 1.8rem;\r\nbackground-color: white;\r\nmargin-top: 1.5rem;\r\noverflow-y: hidden;\r\nbox-shadow: 0 8px 32px rgba(80,120,200,0.10);\r\n}\r\n/* 基因总长度条样式 */\r\n.gene-length-bar {\r\nheight: 24px;\r\nbackground-color: #e0e0e0;\r\nposition: relative;\r\nmargin-bottom: 10px;\r\nborder-radius: 5px;\r\ncursor: crosshair;\r\n}\r\n\r\n\r\n/* 基因行容器样式 - 可滚动区域 */\r\n.gene-rows-container {\r\nposition: relative;\r\noverflow-x: auto;\r\noverflow-y: hidden;\r\nheight: auto;\r\nmax-height: 400px;\r\nborder: none;\r\nborder-radius: 12px;\r\nbackground: linear-gradient(90deg, #f5f7fa 80%, #e3f0ff 100%);\r\npadding: 15px 0;\r\nbox-shadow: 0 2px 8px rgba(80,120,200,0.06);\r\n}\r\n\r\n/* 基因行样式 */\r\n.gene-row {\r\nposition: relative;\r\nheight: 30px;\r\nmargin-bottom: 5px;\r\n}\r\n\r\n/* 基因项样式 */\r\n.gene-item {\r\nposition: absolute;\r\nheight: 25px;\r\ndisplay: flex;\r\nalign-items: center;\r\njustify-content: center;\r\ncursor: pointer;\r\nborder-radius: 4px;\r\nbox-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);\r\ncolor: white;\r\nfont-size: 12px;\r\nfont-weight: bold;\r\ntransition: transform 0.2s, box-shadow 0.2s;\r\n}\r\n\r\n\r\n/* 模态框样式 */\r\n.modal {\r\nposition: fixed;\r\ntop: 0;\r\nleft: 0;\r\nwidth: 100%;\r\nheight: 100%;\r\nbackground: rgba(0, 0, 0, 0.6);\r\ndisplay: flex;\r\njustify-content: center;\r\nalign-items: center;\r\nz-index: 1000;\r\nbackdrop-filter: blur(5px);\r\n}\r\n\r\n.modal-content {\r\nbackground: white;\r\npadding: 2rem;\r\nborder-radius: 16px;\r\nwidth: 80%;\r\nmax-width: 700px;\r\nmax-height: 80vh;\r\noverflow-y: auto;\r\nposition: relative;\r\nbox-shadow: 0 8px 30px rgba(80,120,200,0.15);\r\n}\r\n\r\n.modal-title {\r\ncolor: #2c3e50;\r\nmargin: 0;\r\nfont-size: 1.3rem;\r\nfont-weight: 600;\r\nletter-spacing: 0.3px;\r\n}\r\n\r\n.close {\r\nfont-size: 1.8rem;\r\ncursor: pointer;\r\ncolor: #7f8c8d;\r\ntransition: color 0.3s;\r\n}\r\n\r\n.close:hover {\r\ncolor: #4a89dc;\r\n}\r\n\r\n/* 基因详细信息样式 */\r\n.gene-details {\r\ndisplay: flex;\r\nflex-direction: column;\r\ngap: 0.8rem;\r\n}\r\n\r\n.detail-row {\r\ndisplay: flex;\r\nalign-items: center;\r\n}\r\n\r\n.detail-label {\r\nfont-weight: bold;\r\ncolor: #2c3e50;\r\nmin-width: 120px;\r\n}\r\n\r\n.detail-value {\r\ncolor: #34495e;\r\npadding-left: 10px;\r\n}\r\n\r\n/* 表格样式 */\r\n.summary-table {\r\nwidth: 100%;\r\nborder-collapse: collapse;\r\nmargin: 1.5rem 0;\r\nfont-size: 0.9rem;\r\n}\r\n\r\n.summary-table th,\r\n.summary-table td {\r\nborder: 1px solid #ddd;\r\npadding: 12px;\r\ntext-align: left;\r\n}\r\n\r\n.summary-table th {\r\nbackground-color: #4a89dc;\r\ncolor: white;\r\nfont-weight: 600;\r\n}\r\n\r\n.summary-table tr:nth-child(even) {\r\nbackground-color: #f2f2f2;\r\n}\r\n\r\n.summary-table tr:hover {\r\nbackground-color: #e6f2ff;\r\n}\r\n\r\n/* 新增样式 */\r\n.ruler-container {\r\noverflow-x: auto;\r\nposition: relative;\r\npadding-bottom: 5px;\r\nmargin-bottom: 5px;\r\n}\r\n\r\n.gene-ruler {\r\nposition: relative;\r\nheight: 30px;\r\nmin-width: 100%;\r\n}\r\n\r\n\r\n.ruler-tooltip {\r\nposition: absolute;\r\ntop: 48px;\r\ntransform: translateX(-50%);\r\nbackground: linear-gradient(135deg, #4a89dc, #6dd5ed);\r\ncolor: white;\r\npadding: 6px 12px;\r\nborder-radius: 8px;\r\nfont-size: 13px;\r\nfont-weight: 500;\r\nz-index: 10;\r\npointer-events: none;\r\nwhite-space: nowrap;\r\nbox-shadow: 0 4px 12px rgba(74,137,220,0.25);\r\n}\r\n\r\n/*垂直虚线*/\r\n.ruler-line {\r\n  position: absolute;\r\n  width: 2px;\r\n  top: 0px;\r\n  bottom: -10px;\r\n  background-color: rgba(74, 137, 220, 0.7);\r\n  background-image: linear-gradient(to bottom, rgba(74, 137, 220, 0.7) 50%, transparent 50%);\r\n  background-size: 1px 4px;\r\n  z-index: 1;\r\n  pointer-events: none;\r\n}\r\n\r\n.gene-tooltip {\r\n  position: absolute;\r\n  right: 100%; /* 改为右侧100%，定位到基因段左侧 */\r\n  left: auto;  /* 取消左侧定位 */\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  margin-right: 8px; /* 改为右侧边距 */\r\n  margin-left: 0;    /* 取消左侧边距 */\r\n  background-color: rgba(80, 170, 229, 0.9);\r\n  color: white;\r\n  padding: 6px 8px;\r\n  border-radius: 6px;\r\n  font-size: 12px;\r\n  min-width: 120px;\r\n  text-align: left;\r\n  z-index: 2000;\r\n  pointer-events: none;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r\n  white-space: nowrap;\r\n}\r\n\r\n/* 调整小箭头方向 */\r\n.gene-tooltip::before {\r\n  content: '';\r\n  position: absolute;\r\n  left: 100%;  /* 箭头现在在右侧 */\r\n  right: auto;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  border-width: 5px;\r\n  border-style: solid;\r\n  border-color: transparent transparent transparent rgba(80, 170, 229, 0.9); /* 箭头方向调整 */\r\n}\r\n\r\n.gene-tooltip div {\r\nmargin: 2px 0;\r\n}\r\n\r\n/* 增强版搜索框样式 */\r\ninput[type=\"text\"] {\r\n  padding: 0.75rem 1rem 0.75rem 2.5rem;\r\n  border: 1.5px solid #b0c4de;\r\n  border-radius: 10px;\r\n  font-size: 1.05rem;\r\n  width: 350px;\r\n  background: linear-gradient(90deg, #f5f7fa 80%, #e3f0ff 100%);\r\n  box-shadow: 0 2px 8px rgba(80,120,200,0.06);\r\n  color: #34495e;\r\n  font-weight: 500;\r\n  transition: all 0.3s;\r\n}\r\n\r\n/* 搜索框聚焦样式 */\r\ninput[type=\"text\"]:focus {\r\n  outline: none;\r\n  border-color: #4a89dc;\r\n  box-shadow: 0 0 0 3px rgba(74,137,220,0.1);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n/* 添加搜索图标 */\r\ninput[type=\"text\"] {\r\n  background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%234a89dc' viewBox='0 0 16 16'%3E%3Cpath d='M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z'/%3E%3C/svg%3E\");\r\n  background-repeat: no-repeat;\r\n  background-position: 15px center;\r\n  padding-left: 45px;\r\n  background-size: 16px;\r\n}\r\n/* 新增搜索框和按钮容器样式 */\r\n.search-button-container {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n/* 新增标题样式 */\r\n.gene-visualization-title {\r\n  color: #2c3e50;\r\n  font-family: 'Segoe UI', 'Arial', sans-serif;\r\n  font-size: 1.8rem;\r\n  font-weight: 700;\r\n  margin-top: 2.2rem;\r\n  margin-bottom: 1.2rem;\r\n  padding-top: 1.2rem;\r\n  border-top: 2px solid #e3f0ff;\r\n  letter-spacing: 0.5px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.gene-visualization-title i {\r\n  margin-right: 12px;\r\n  color: #4a89dc;\r\n  font-size: 36px;\r\n}\r\n\r\n.gff-header {\r\n  font-size: 1.5rem;\r\n  font-weight: bold;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.gff-row {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 0.5rem;\r\n  margin-bottom: 0.3rem;\r\n}\r\n\r\n\r\n.gff-modal-content {\r\n  width: auto;\r\n  max-width: 90%;\r\n  font-size: 1.1rem;\r\n  padding: 2rem;\r\n  border-radius: 12px;\r\n  background-color: white;\r\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\r\n  max-height: 80vh;\r\n  overflow-y: auto;\r\n  position: relative;\r\n}\r\n\r\n/* 新增：控制GFF标题和下载按钮的容器样式 */\r\n.gff-title-button-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n/* 调整下载按钮的样式，使其与标题在同一行显示更美观 */\r\n.download-gff-button {\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 0.75rem 1.5rem;\r\n  background-color: #4a89dc;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  transition: all 0.3s;\r\n  font-weight: 500;\r\n  margin-bottom: 0; /* 移除原有的底部外边距 */\r\n}\r\n\r\n.download-gff-button:hover {\r\n  background-color: #3b7dd8;\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.download-gff-button i {\r\n  margin-right: 0.5rem;\r\n}\r\n\r\n/* 新增模型选择样式 */\r\n.model-select-container {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.7rem;\r\n  margin-bottom: 0.5rem;\r\n}\r\n.model-select-label {\r\n  font-weight: 600;\r\n  color: #34495e;\r\n  font-size: 1.08rem;\r\n  letter-spacing: 0.3px;\r\n}\r\n.model-select {\r\n  appearance: none;\r\n  -webkit-appearance: none;\r\n  background: linear-gradient(90deg, #f5f7fa 80%, #e3f0ff 100%);\r\n  border: 1.5px solid #b0c4de;\r\n  color: #34495e;\r\n  font-size: 1.08rem;\r\n  font-weight: 500;\r\n  padding: 0.7rem 2.5rem 0.7rem 1rem;\r\n  border-radius: 10px;\r\n  box-shadow: 0 2px 8px rgba(80,120,200,0.06);\r\n  transition: all 0.3s;\r\n  outline: none;\r\n  background-image: url('data:image/svg+xml;utf8,<svg fill=\"%234a89dc\" height=\"18\" viewBox=\"0 0 24 24\" width=\"18\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M7 10l5 5 5-5z\"/></svg>');\r\n  background-repeat: no-repeat;\r\n  background-position: right 0.8rem center;\r\n  background-size: 1.2rem;\r\n  min-width: 220px;\r\n  cursor: pointer;\r\n}\r\n\r\n/* 新增AI流式报告样式 */\r\n.ai-report-modal {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(0, 0, 0, 0.7);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 2000;\r\n  animation: fadeIn 0.4s;\r\n}\r\n\r\n.ai-report-content {\r\n  background: white;\r\n  padding: 2rem;\r\n  border-radius: 12px;\r\n  width: 90%;\r\n  max-width: 800px;\r\n  max-height: 80vh;\r\n  overflow-y: auto;\r\n  position: relative;\r\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);\r\n}\r\n\r\n.ai-report-title {\r\n  color: #2c3e50;\r\n  margin-bottom: 1.5rem;\r\n  font-size: 1.8rem;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.ai-report-title i {\r\n  margin-right: 0.5rem;\r\n  color: #4a89dc;\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.ai-report-stream {\r\n  font-size: 0.9rem;\r\n  color: #34495e;\r\n  line-height: 1.6;\r\n}\r\n\r\n.ai-report-loading {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100px;\r\n  font-size: 1rem;\r\n  color: #7f8c8d;\r\n}\r\n\r\n/* 淡入动画 */\r\n@keyframes fadeIn {\r\n  from {\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n/* 新增AI报告面板样式 */\r\n.ai-report-panel {\r\n  background: linear-gradient(120deg, #ffffff 60%, #f5f7fa 100%);\r\n  border-radius: 18px;\r\n  box-shadow: 0 8px 32px rgba(80,120,200,0.10);\r\n  margin-top: 2rem;\r\n  padding: 2rem;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.ai-report-panel-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-bottom: 1.5rem;\r\n  font-size: 1.4rem;\r\n  color: #2c3e50;\r\n  padding-bottom: 1rem;\r\n  border-bottom: 2px solid #e3f0ff;\r\n  font-weight: 600;\r\n  letter-spacing: 0.3px;\r\n}\r\n\r\n.ai-report-panel-header i {\r\n  color: #4a89dc;\r\n  margin-right: 0.8rem;\r\n  font-size: 1.5rem;\r\n}\r\n\r\n.ai-report-regenerate {\r\n  background: linear-gradient(135deg, #4a89dc, #6dd5ed);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 8px;\r\n  padding: 0.6rem 1.2rem;\r\n  font-size: 1rem;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all 0.3s;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  box-shadow: 0 2px 8px rgba(74,137,220,0.15);\r\n}\r\n\r\n.ai-report-regenerate:hover:not(:disabled) {\r\n  background: linear-gradient(135deg, #3a79cc, #5cc5dd);\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 12px rgba(74,137,220,0.25);\r\n}\r\n\r\n.ai-report-regenerate:disabled {\r\n  background: #b0c4de;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.ai-report-panel-body {\r\n  max-height: 400px;\r\n  overflow-y: auto;\r\n  font-size: 1rem;\r\n  color: #34495e;\r\n  line-height: 1.6;\r\n  padding: 1.2rem;\r\n  border-radius: 12px;\r\n  background: linear-gradient(90deg, #f5f7fa 80%, #e3f0ff 100%);\r\n  box-shadow: 0 2px 8px rgba(80,120,200,0.06);\r\n}\r\n\r\n.ai-report-loading {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 20px;\r\n  color: #666;\r\n  gap: 10px;\r\n  font-size: 1rem;\r\n}\r\n\r\n.ai-report-error {\r\n  color: #e74c3c;\r\n  padding: 15px;\r\n  background-color: #fadbd8;\r\n  border-radius: 4px;\r\n  margin: 10px 0;\r\n}\r\n\r\n.ai-report-empty {\r\n  color: #7f8c8d;\r\n  text-align: center;\r\n  padding: 20px;\r\n  font-style: italic;\r\n  background-color: #f5f7fa;\r\n  border-radius: 8px;\r\n  margin: 10px 0;\r\n}\r\n\r\n.ai-report-empty-tip {\r\n  margin-top: 10px;\r\n  font-size: 0.9em;\r\n  color: #3498db;\r\n}\r\n\r\n/* 强化滚动条样式 */\r\n.ai-report-panel-body::-webkit-scrollbar {\r\n  width: 8px;\r\n}\r\n\r\n.ai-report-panel-body::-webkit-scrollbar-thumb {\r\n  background-color: #4a89dc;\r\n  border-radius: 4px;\r\n}\r\n\r\n.ai-report-panel_body::-webkit-scrollbar-track {\r\n  background-color: #f1f1f1;\r\n}\r\n\r\n/* 增强报告内容格式 */\r\n.ai-report-panel-body h3 {\r\n  margin-top: 12px;\r\n  margin-bottom: 8px;\r\n  color: #2c3e50;\r\n  font-weight: 600;\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.ai-report-panel_body p {\r\n  margin-bottom: 8px;\r\n  line-height: 1.6;\r\n}\r\n\r\n.ai-report-panel_body li {\r\n  margin-bottom: 4px;\r\n  list-style-position: inside;\r\n}\r\n\r\n/* 表格样式优化 */\r\n.ai-report-panel_body .summary-table {\r\n  margin: 15px 0;\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n}\r\n\r\n.ai-report-panel_body .summary-table th {\r\n  background-color: #4a89dc;\r\n  color: white;\r\n  padding: 8px;\r\n  text-align: left;\r\n  font-weight: normal;\r\n}\r\n\r\n.ai-report-panel_body .summary-table td {\r\n  padding: 6px 8px;\r\n  border: 1px solid #ddd;\r\n}\r\n\r\n/* 模态框头部统一布局 */\r\n.modal-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  border-bottom: 2px solid #e3f0ff;\r\n  padding-bottom: 1rem;\r\n  margin-bottom: 1.5rem;\r\n}\r\n.modal-title {\r\n  margin: 0;\r\n  font-size: 1.4rem;\r\n  color: #2c3e50;\r\n  font-weight: 600;\r\n  letter-spacing: 0.3px;\r\n}\r\n.modal-download {\r\n  background: linear-gradient(135deg, #4a89dc, #6dd5ed);\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 8px;\r\n  padding: 0.6rem 1.2rem;\r\n  font-size: 1rem;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  margin-right: 1rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  transition: all 0.3s;\r\n  box-shadow: 0 2px 8px rgba(74,137,220,0.15);\r\n}\r\n.modal-download:hover {\r\n  background: linear-gradient(135deg, #3a79cc, #5cc5dd);\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 12px rgba(74,137,220,0.25);\r\n}\r\n.close {\r\n  font-size: 1.8rem;\r\n  color: #7f8c8d;\r\n  cursor: pointer;\r\n  margin-left: 1rem;\r\n  transition: all 0.3s;\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GeneVisualization.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GeneVisualization.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./GeneVisualization.vue?vue&type=template&id=327c7932&scoped=true\"\nimport script from \"./GeneVisualization.vue?vue&type=script&lang=js\"\nexport * from \"./GeneVisualization.vue?vue&type=script&lang=js\"\nimport style0 from \"./GeneVisualization.vue?vue&type=style&index=0&id=327c7932&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"327c7932\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"header-section\"},[_vm._m(0),_c('button',{staticClass:\"refresh-btn\",attrs:{\"disabled\":_vm.loading},on:{\"click\":_vm.loadReports}},[_c('i',{staticClass:\"fa-solid fa-sync\",class:{ 'fa-spin': _vm.loading }}),_vm._v(\" 刷新 \")])]),_c('div',{staticClass:\"search-section\"},[_c('div',{staticClass:\"search-container\"},[_c('i',{staticClass:\"fa-solid fa-search search-icon\"}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchId),expression:\"searchId\"}],staticClass:\"search-input\",attrs:{\"placeholder\":\"按基因组ID搜索报告...\"},domProps:{\"value\":(_vm.searchId)},on:{\"input\":function($event){if($event.target.composing)return;_vm.searchId=$event.target.value}}})]),_c('div',{staticClass:\"report-count\"},[_vm._v(\" 共 \"+_vm._s(_vm.filteredReports.length)+\" 个报告 \")])]),(_vm.loading)?_c('div',{staticClass:\"loading-section\"},[_c('i',{staticClass:\"fa-solid fa-spinner fa-spin\"}),_vm._v(\" 加载中... \")]):_vm._e(),(_vm.error)?_c('div',{staticClass:\"error-section\"},[_c('i',{staticClass:\"fa-solid fa-exclamation-triangle\"}),_vm._v(\" \"+_vm._s(_vm.error)+\" \")]):_vm._e(),(!_vm.loading && !_vm.error)?_c('div',{staticClass:\"report-grid\"},[_vm._l((_vm.filteredReports),function(report,index){return _c('div',{key:index,staticClass:\"report-card\"},[_c('div',{staticClass:\"report-card-header\"},[_vm._m(1,true),_c('div',{staticClass:\"report-info\"},[_c('h3',{staticClass:\"report-name\"},[_vm._v(_vm._s(report.genome_id))]),_c('p',{staticClass:\"report-date\"},[_vm._v(_vm._s(_vm.formatDate(report.current_date)))])])]),_c('div',{staticClass:\"report-card-body\"},[_c('div',{staticClass:\"report-filename\"},[_c('i',{staticClass:\"fa-solid fa-file\"}),_vm._v(\" \"+_vm._s(report.filename)+\" \")])]),_c('div',{staticClass:\"report-card-actions\"},[_c('button',{staticClass:\"action-btn view-btn\",attrs:{\"disabled\":_vm.actionLoading[report.filename]},on:{\"click\":function($event){return _vm.showReport(report)}}},[_c('i',{staticClass:\"fa-solid fa-eye\"}),_vm._v(\" 查看 \")]),_c('button',{staticClass:\"action-btn details-btn\",attrs:{\"disabled\":_vm.actionLoading[report.filename]},on:{\"click\":function($event){return _vm.viewReportDetails(report.filename)}}},[_c('i',{staticClass:\"fa-solid fa-info-circle\"}),_vm._v(\" 详情 \")]),_c('button',{staticClass:\"action-btn download-btn\",attrs:{\"disabled\":_vm.actionLoading[report.filename]},on:{\"click\":function($event){return _vm.downloadReport(report)}}},[_c('i',{staticClass:\"fa-solid fa-download\"}),_vm._v(\" 下载TXT \")]),_c('button',{staticClass:\"action-btn gff-btn\",attrs:{\"disabled\":_vm.actionLoading[report.filename]},on:{\"click\":function($event){return _vm.downloadGFFReport(report)}}},[_c('i',{staticClass:\"fa-solid fa-file-code\"}),_vm._v(\" 下载GFF \")]),_c('button',{staticClass:\"action-btn delete-btn\",attrs:{\"disabled\":_vm.actionLoading[report.filename]},on:{\"click\":function($event){return _vm.showDeleteDialog(report)}}},[_c('i',{staticClass:\"fa-solid fa-trash\"}),_vm._v(\" 删除 \")])]),(_vm.actionLoading[report.filename])?_c('div',{staticClass:\"action-loading\"},[_c('i',{staticClass:\"fa-solid fa-spinner fa-spin\"})]):_vm._e()])}),(_vm.filteredReports.length === 0)?_c('div',{staticClass:\"empty-state\"},[_c('i',{staticClass:\"fa-solid fa-folder-open\"}),_c('h3',[_vm._v(\"没有找到报告\")]),(_vm.searchId)?_c('p',[_vm._v(\"尝试修改搜索关键词\")]):_c('p',[_vm._v(\"暂无基因组分析报告\")])]):_vm._e()],2):_vm._e(),(_vm.selectedReport)?_c('div',{staticClass:\"modal-overlay\",on:{\"click\":_vm.closeReport}},[_c('div',{staticClass:\"modal-content report-modal\",on:{\"click\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"modal-header\"},[_vm._m(2),_c('button',{staticClass:\"close-btn\",on:{\"click\":_vm.closeReport}},[_c('i',{staticClass:\"fa-solid fa-times\"})])]),_c('div',{staticClass:\"modal-body\"},[(_vm.summary)?_c('div',{staticClass:\"report-content\",domProps:{\"innerHTML\":_vm._s(_vm.formattedSummary)}}):_c('div',{staticClass:\"loading-details\"},[_c('i',{staticClass:\"fa-solid fa-spinner fa-spin\"}),_vm._v(\" 加载报告中... \")])])])]):_vm._e(),(_vm.showDetailsModal)?_c('div',{staticClass:\"modal-overlay\",on:{\"click\":_vm.closeDetailsModal}},[_c('div',{staticClass:\"modal-content details-modal\",on:{\"click\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"modal-header\"},[_vm._m(3),_c('button',{staticClass:\"close-btn\",on:{\"click\":_vm.closeDetailsModal}},[_c('i',{staticClass:\"fa-solid fa-times\"})])]),_c('div',{staticClass:\"modal-body\"},[(_vm.selectedReportDetails)?_c('div',{staticClass:\"details-grid\"},[_c('div',{staticClass:\"detail-item\"},[_c('label',[_vm._v(\"文件名:\")]),_c('span',[_vm._v(_vm._s(_vm.selectedReportDetails.filename))])]),_c('div',{staticClass:\"detail-item\"},[_c('label',[_vm._v(\"基因组ID:\")]),_c('span',[_vm._v(_vm._s(_vm.selectedReportDetails.genome_id))])]),_c('div',{staticClass:\"detail-item\"},[_c('label',[_vm._v(\"分析日期:\")]),_c('span',[_vm._v(_vm._s(_vm.selectedReportDetails.analysis_date))])]),_c('div',{staticClass:\"detail-item\"},[_c('label',[_vm._v(\"文件大小:\")]),_c('span',[_vm._v(_vm._s(_vm.selectedReportDetails.file_size))])]),_c('div',{staticClass:\"detail-item\"},[_c('label',[_vm._v(\"最后修改:\")]),_c('span',[_vm._v(_vm._s(_vm.formatTimestamp(_vm.selectedReportDetails.last_modified)))])])]):_c('div',{staticClass:\"loading-details\"},[_c('i',{staticClass:\"fa-solid fa-spinner fa-spin\"}),_vm._v(\" 加载详情中... \")])])])]):_vm._e(),(_vm.showDeleteModal)?_c('div',{staticClass:\"modal-overlay\",on:{\"click\":_vm.closeDeleteModal}},[_c('div',{staticClass:\"modal-content delete-modal\",on:{\"click\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"modal-header\"},[_vm._m(4),_c('button',{staticClass:\"close-btn\",on:{\"click\":_vm.closeDeleteModal}},[_c('i',{staticClass:\"fa-solid fa-times\"})])]),_c('div',{staticClass:\"modal-body\"},[_c('p',[_vm._v(\"确定要删除报告 \"),_c('strong',[_vm._v(_vm._s(_vm.selectedReportForDelete && _vm.selectedReportForDelete.filename))]),_vm._v(\" 吗？\")]),_c('p',{staticClass:\"warning-text\"},[_vm._v(\"此操作将同时删除相关的JSON和GFF文件，且不可撤销。\")])]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-secondary\",on:{\"click\":_vm.closeDeleteModal}},[_vm._v(\"取消\")]),_c('button',{staticClass:\"btn btn-danger\",attrs:{\"disabled\":_vm.deleting},on:{\"click\":_vm.confirmDelete}},[(_vm.deleting)?_c('i',{staticClass:\"fa-solid fa-spinner fa-spin\"}):_vm._e(),_vm._v(\" \"+_vm._s(_vm.deleting ? '删除中...' : '确认删除')+\" \")])])])]):_vm._e(),(_vm.notification.show)?_c('div',{class:['notification', _vm.notification.type]},[_c('i',{class:_vm.notificationIcon}),_vm._v(\" \"+_vm._s(_vm.notification.message)+\" \")]):_vm._e()])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('h2',{staticClass:\"section-title\"},[_c('i',{staticClass:\"fa-solid fa-file-chart-line\"}),_vm._v(\" 基因组分析报告 \")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"report-icon\"},[_c('i',{staticClass:\"fa-solid fa-chart-line\"})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('h3',[_c('i',{staticClass:\"fa-solid fa-file-chart-line\"}),_vm._v(\" 分析报告\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('h3',[_c('i',{staticClass:\"fa-solid fa-info-circle\"}),_vm._v(\" 报告详情\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('h3',[_c('i',{staticClass:\"fa-solid fa-exclamation-triangle text-danger\"}),_vm._v(\" 删除报告\")])\n}]\n\nexport { render, staticRenderFns }","// src/config.js\r\nexport const API_BASE_URL = 'https://e795-106-84-180-148.ngrok-free.app'; // 替换为后端实际IP","<template>\r\n  <div class=\"container\">\r\n    <div class=\"header-section\">\r\n      <h2 class=\"section-title\">\r\n        <i class=\"fa-solid fa-file-chart-line\"></i> 基因组分析报告\r\n      </h2>\r\n      <button class=\"refresh-btn\" @click=\"loadReports\" :disabled=\"loading\">\r\n        <i class=\"fa-solid fa-sync\" :class=\"{ 'fa-spin': loading }\"></i> 刷新\r\n      </button>\r\n    </div>\r\n\r\n    <!-- 搜索区域 -->\r\n    <div class=\"search-section\">\r\n      <div class=\"search-container\">\r\n        <i class=\"fa-solid fa-search search-icon\"></i>\r\n        <input \r\n          v-model=\"searchId\" \r\n          class=\"search-input\" \r\n          placeholder=\"按基因组ID搜索报告...\" \r\n        />\r\n      </div>\r\n      <div class=\"report-count\">\r\n        共 {{ filteredReports.length }} 个报告\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 加载状态 -->\r\n    <div v-if=\"loading\" class=\"loading-section\">\r\n      <i class=\"fa-solid fa-spinner fa-spin\"></i> 加载中...\r\n    </div>\r\n\r\n    <!-- 错误状态 -->\r\n    <div v-if=\"error\" class=\"error-section\">\r\n      <i class=\"fa-solid fa-exclamation-triangle\"></i> {{ error }}\r\n    </div>\r\n\r\n    <!-- 报告列表 -->\r\n    <div v-if=\"!loading && !error\" class=\"report-grid\">\r\n      <div \r\n        v-for=\"(report, index) in filteredReports\" \r\n        :key=\"index\" \r\n        class=\"report-card\"\r\n      >\r\n        <div class=\"report-card-header\">\r\n          <div class=\"report-icon\">\r\n            <i class=\"fa-solid fa-chart-line\"></i>\r\n          </div>\r\n          <div class=\"report-info\">\r\n            <h3 class=\"report-name\">{{ report.genome_id }}</h3>\r\n            <p class=\"report-date\">{{ formatDate(report.current_date) }}</p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"report-card-body\">\r\n          <div class=\"report-filename\">\r\n            <i class=\"fa-solid fa-file\"></i> {{ report.filename }}\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"report-card-actions\">\r\n          <button \r\n            class=\"action-btn view-btn\" \r\n            @click=\"showReport(report)\"\r\n            :disabled=\"actionLoading[report.filename]\"\r\n          >\r\n            <i class=\"fa-solid fa-eye\"></i> 查看\r\n          </button>\r\n          <button \r\n            class=\"action-btn details-btn\" \r\n            @click=\"viewReportDetails(report.filename)\"\r\n            :disabled=\"actionLoading[report.filename]\"\r\n          >\r\n            <i class=\"fa-solid fa-info-circle\"></i> 详情\r\n          </button>\r\n          <button \r\n            class=\"action-btn download-btn\" \r\n            @click=\"downloadReport(report)\"\r\n            :disabled=\"actionLoading[report.filename]\"\r\n          >\r\n            <i class=\"fa-solid fa-download\"></i> 下载TXT\r\n          </button>\r\n          <button \r\n            class=\"action-btn gff-btn\" \r\n            @click=\"downloadGFFReport(report)\"\r\n            :disabled=\"actionLoading[report.filename]\"\r\n          >\r\n            <i class=\"fa-solid fa-file-code\"></i> 下载GFF\r\n          </button>\r\n          <button \r\n            class=\"action-btn delete-btn\" \r\n            @click=\"showDeleteDialog(report)\"\r\n            :disabled=\"actionLoading[report.filename]\"\r\n          >\r\n            <i class=\"fa-solid fa-trash\"></i> 删除\r\n          </button>\r\n        </div>\r\n        \r\n        <!-- 加载指示器 -->\r\n        <div v-if=\"actionLoading[report.filename]\" class=\"action-loading\">\r\n          <i class=\"fa-solid fa-spinner fa-spin\"></i>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- 空状态 -->\r\n      <div v-if=\"filteredReports.length === 0\" class=\"empty-state\">\r\n        <i class=\"fa-solid fa-folder-open\"></i>\r\n        <h3>没有找到报告</h3>\r\n        <p v-if=\"searchId\">尝试修改搜索关键词</p>\r\n        <p v-else>暂无基因组分析报告</p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 报告内容模态框 -->\r\n    <div v-if=\"selectedReport\" class=\"modal-overlay\" @click=\"closeReport\">\r\n      <div class=\"modal-content report-modal\" @click.stop>\r\n        <div class=\"modal-header\">\r\n          <h3><i class=\"fa-solid fa-file-chart-line\"></i> 分析报告</h3>\r\n          <button class=\"close-btn\" @click=\"closeReport\">\r\n            <i class=\"fa-solid fa-times\"></i>\r\n          </button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div v-if=\"summary\" class=\"report-content\" v-html=\"formattedSummary\"></div>\r\n          <div v-else class=\"loading-details\">\r\n            <i class=\"fa-solid fa-spinner fa-spin\"></i> 加载报告中...\r\n          </div>\r\n        </div> \r\n      </div>\r\n    </div>\r\n\r\n    <!-- 报告详情模态框 -->\r\n    <div v-if=\"showDetailsModal\" class=\"modal-overlay\" @click=\"closeDetailsModal\">\r\n      <div class=\"modal-content details-modal\" @click.stop>\r\n        <div class=\"modal-header\">\r\n          <h3><i class=\"fa-solid fa-info-circle\"></i> 报告详情</h3>\r\n          <button class=\"close-btn\" @click=\"closeDetailsModal\">\r\n            <i class=\"fa-solid fa-times\"></i>\r\n          </button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div v-if=\"selectedReportDetails\" class=\"details-grid\">\r\n            <div class=\"detail-item\">\r\n              <label>文件名:</label>\r\n              <span>{{ selectedReportDetails.filename }}</span>\r\n            </div>\r\n            <div class=\"detail-item\">\r\n              <label>基因组ID:</label>\r\n              <span>{{ selectedReportDetails.genome_id }}</span>\r\n            </div>\r\n            <div class=\"detail-item\">\r\n              <label>分析日期:</label>\r\n              <span>{{ selectedReportDetails.analysis_date }}</span>\r\n            </div>\r\n            <div class=\"detail-item\">\r\n              <label>文件大小:</label>\r\n              <span>{{ selectedReportDetails.file_size }}</span>\r\n            </div>\r\n            <div class=\"detail-item\">\r\n              <label>最后修改:</label>\r\n              <span>{{ formatTimestamp(selectedReportDetails.last_modified) }}</span>\r\n            </div>\r\n          </div>\r\n          <div v-else class=\"loading-details\">\r\n            <i class=\"fa-solid fa-spinner fa-spin\"></i> 加载详情中...\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 删除确认模态框 -->\r\n    <div v-if=\"showDeleteModal\" class=\"modal-overlay\" @click=\"closeDeleteModal\">\r\n      <div class=\"modal-content delete-modal\" @click.stop>\r\n        <div class=\"modal-header\">\r\n          <h3><i class=\"fa-solid fa-exclamation-triangle text-danger\"></i> 删除报告</h3>\r\n          <button class=\"close-btn\" @click=\"closeDeleteModal\">\r\n            <i class=\"fa-solid fa-times\"></i>\r\n          </button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <p>确定要删除报告 <strong>{{ selectedReportForDelete && selectedReportForDelete.filename }}</strong> 吗？</p>\r\n          <p class=\"warning-text\">此操作将同时删除相关的JSON和GFF文件，且不可撤销。</p>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button class=\"btn btn-secondary\" @click=\"closeDeleteModal\">取消</button>\r\n          <button \r\n            class=\"btn btn-danger\" \r\n            @click=\"confirmDelete\"\r\n            :disabled=\"deleting\"\r\n          >\r\n            <i v-if=\"deleting\" class=\"fa-solid fa-spinner fa-spin\"></i>\r\n            {{ deleting ? '删除中...' : '确认删除' }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 通知消息 -->\r\n    <div v-if=\"notification.show\" :class=\"['notification', notification.type]\">\r\n      <i :class=\"notificationIcon\"></i>\r\n      {{ notification.message }}\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { API_BASE_URL } from '../config.js';\r\nexport default {\r\n    data() {\r\n        return {\r\n            reports: [],\r\n            selectedReport: null,\r\n            summary: null,\r\n            searchId: '',\r\n            loading: false,\r\n            error: null,\r\n            actionLoading: {},\r\n            \r\n            // 模态框状态\r\n            showDetailsModal: false,\r\n            showDeleteModal: false,\r\n            \r\n            // 选中的报告\r\n            selectedReportDetails: null,\r\n            selectedReportForDelete: null,\r\n            \r\n            // 删除相关\r\n            deleting: false,\r\n            \r\n            // 通知系统\r\n            notification: {\r\n                show: false,\r\n                message: '',\r\n                type: 'success'\r\n            }\r\n        };\r\n    },\r\n    \r\n    computed: {\r\n        formattedSummary() {\r\n            if (!this.summary) return '';\r\n            \r\n            // 全局清理Markdown符号\r\n            const cleanedSummary = this.summary.replace(/[*#]/g, '');\r\n            \r\n            const lines = cleanedSummary.split('\\n');\r\n            const processed = lines.reduce((acc, line) => {\r\n                line = line.trim();\r\n                const isTableRow = /^\\|.*\\|$/.test(line);\r\n\r\n                if (isTableRow) {\r\n                    acc.tableRows.push(line);\r\n                    acc.inTable = true;\r\n                } else {\r\n                    if (acc.inTable) {\r\n                        const tableHtml = this.processTable(acc.tableRows);\r\n                        acc.htmlArray.push(tableHtml);\r\n                        acc.tableRows = [];\r\n                        acc.inTable = false;\r\n                    }\r\n                    let processedLine = this.processTextLine(line);\r\n                    if (processedLine) acc.htmlArray.push(processedLine);\r\n                }\r\n                return acc;\r\n            }, { inTable: false, tableRows: [], htmlArray: [] });\r\n\r\n            if (processed.inTable) {\r\n                const tableHtml = this.processTable(processed.tableRows);\r\n                processed.htmlArray.push(tableHtml);\r\n            }\r\n\r\n            let html = processed.htmlArray.join('')\r\n                .replace(/<li>/g, '<ul><li>')\r\n                .replace(/<\\/li>/g, '</li></ul>')\r\n                .replace(/<\\/ul><ul>/g, '');\r\n\r\n            return html;\r\n        },\r\n        \r\n        filteredReports() {\r\n            if (!this.searchId.trim()) {\r\n                return this.reports;\r\n            }\r\n            const keyword = this.searchId.toLowerCase().trim();\r\n            return this.reports.filter(report => \r\n                report.genome_id.toLowerCase().includes(keyword) ||\r\n                report.filename.toLowerCase().includes(keyword)\r\n            );\r\n        },\r\n        \r\n        notificationIcon() {\r\n            const icons = {\r\n                success: 'fa-solid fa-check-circle',\r\n                error: 'fa-solid fa-exclamation-circle',\r\n                warning: 'fa-solid fa-exclamation-triangle'\r\n            };\r\n            return icons[this.notification.type] || icons.success;\r\n        }\r\n    },\r\n    \r\n    mounted() {\r\n        this.loadReports();\r\n    },\r\n    \r\n    methods: {\r\n        async loadReports() {\r\n            this.loading = true;\r\n            this.error = null;\r\n            \r\n            try {\r\n                const response = await fetch(`${API_BASE_URL}/getAllSummaries`);\r\n                if (!response.ok) {\r\n                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n                }\r\n                \r\n                const data = await response.json();\r\n                this.reports = data.map(filename => {\r\n                    const parts = filename.split('_基因组分析报告_');\r\n                    if (parts.length === 2) {\r\n                        const genome_id = parts[0];\r\n                        const date = parts[1].replace('.txt', '');\r\n                        return {\r\n                            filename,\r\n                            genome_id,\r\n                            current_date: date\r\n                        };\r\n                    }\r\n                    return null;\r\n                }).filter(report => report !== null);\r\n                \r\n                // 重置操作加载状态\r\n                this.actionLoading = {};\r\n                \r\n            } catch (error) {\r\n                console.error('加载报告列表失败:', error);\r\n                this.error = error.message || '加载报告列表失败';\r\n                this.reports = [];\r\n            } finally {\r\n                this.loading = false;\r\n            }\r\n        },\r\n        \r\n        async showReport(report) {\r\n            if (!report || !report.filename) {\r\n                this.showNotification('报告信息不完整或文件名未定义', 'error');\r\n                return;\r\n            }\r\n            \r\n            this.setActionLoading(report.filename, true);\r\n            \r\n            try {\r\n                const { genome_id, current_date } = report;\r\n                const response = await fetch(`${API_BASE_URL}/summary?genome_id=${genome_id}&current_date=${current_date}`);\r\n                \r\n                if (!response.ok) {\r\n                    throw new Error(`获取报告内容失败: ${response.statusText}`);\r\n                }\r\n                \r\n                const data = await response.json();\r\n                this.summary = Object.values(data)[0];\r\n                this.selectedReport = report.filename;\r\n                \r\n            } catch (error) {\r\n                console.error('获取报告内容失败:', error);\r\n                this.showNotification('获取报告内容失败: ' + error.message, 'error');\r\n            } finally {\r\n                this.setActionLoading(report.filename, false);\r\n            }\r\n        },\r\n        \r\n        async viewReportDetails(filename) {\r\n            this.setActionLoading(filename, true);\r\n            \r\n            try {\r\n                const response = await fetch(`${API_BASE_URL}/reports/${filename}/details`);\r\n                if (!response.ok) {\r\n                    throw new Error(`获取报告详情失败: ${response.statusText}`);\r\n                }\r\n                \r\n                this.selectedReportDetails = await response.json();\r\n                this.showDetailsModal = true;\r\n                \r\n            } catch (error) {\r\n                console.error('获取报告详情失败:', error);\r\n                this.showNotification('获取报告详情失败: ' + error.message, 'error');\r\n            } finally {\r\n                this.setActionLoading(filename, false);\r\n            }\r\n        },\r\n        \r\n        async downloadReport(report) {\r\n            this.setActionLoading(report.filename, true);\r\n            \r\n            try {\r\n                const { genome_id, current_date } = report;\r\n                const response = await fetch(`${API_BASE_URL}/summary?genome_id=${genome_id}&current_date=${current_date}`);\r\n                \r\n                if (!response.ok) {\r\n                    throw new Error(`获取报告内容失败: ${response.statusText}`);\r\n                }\r\n                \r\n                const data = await response.json();\r\n                const summary = Object.values(data)[0];\r\n                const element = document.createElement('a');\r\n                element.href = URL.createObjectURL(\r\n                    new Blob([summary.replace(/[*#]/g, '')], \r\n                    { type: 'text/plain' })\r\n                );\r\n                element.download = report.filename;\r\n                element.click();\r\n                \r\n                this.showNotification('报告下载成功', 'success');\r\n                \r\n            } catch (error) {\r\n                console.error('下载报告失败:', error);\r\n                this.showNotification('下载报告失败: ' + error.message, 'error');\r\n            } finally {\r\n                this.setActionLoading(report.filename, false);\r\n            }\r\n        },\r\n        \r\n        async downloadGFFReport(report) {\r\n            this.setActionLoading(report.filename, true);\r\n            \r\n            try {\r\n                const { genome_id, current_date } = report;\r\n                const gffFileName = `${genome_id}_annotation_${current_date}.gff`;\r\n                const response = await fetch(`${API_BASE_URL}/gff?genome_id=${genome_id}&current_date=${current_date}`);\r\n                \r\n                if (!response.ok) {\r\n                    throw new Error(`获取GFF报告失败: ${response.statusText}`);\r\n                }\r\n                \r\n                const data = await response.json();\r\n                const gffContent = data[gffFileName];\r\n                const formattedContent = gffContent.replace(/(\\S+)\\s+(\\S+)\\s+(\\S+)\\s+(\\S+)\\s+(\\S+)\\s+(\\S+)\\s+(\\S+)\\s+(\\S+)\\s+(.+)/g, '$1\\t$2\\t$3\\t$4\\t$5\\t$6\\t$7\\t$8\\t$9');\r\n                const blob = new Blob([formattedContent], { type: 'text/plain' });\r\n                const url = window.URL.createObjectURL(blob);\r\n                const a = document.createElement('a');\r\n                a.href = url;\r\n                a.download = gffFileName;\r\n                a.click();\r\n                window.URL.revokeObjectURL(url);\r\n                \r\n                this.showNotification('GFF报告下载成功', 'success');\r\n                \r\n            } catch (error) {\r\n                console.error('下载GFF报告失败:', error);\r\n                this.showNotification('下载GFF报告失败: ' + error.message, 'error');\r\n            } finally {\r\n                this.setActionLoading(report.filename, false);\r\n            }\r\n        },\r\n        \r\n        showDeleteDialog(report) {\r\n            this.selectedReportForDelete = report;\r\n            this.showDeleteModal = true;\r\n        },\r\n        \r\n        async confirmDelete() {\r\n            if (this.deleting) return;\r\n            \r\n            this.deleting = true;\r\n            \r\n            try {\r\n                const response = await fetch(`${API_BASE_URL}/reports/${this.selectedReportForDelete.filename}`, {\r\n                    method: 'DELETE'\r\n                });\r\n                \r\n                if (!response.ok) {\r\n                    const errorData = await response.json();\r\n                    throw new Error(errorData.error || '删除失败');\r\n                }\r\n                \r\n                this.showNotification('报告删除成功', 'success');\r\n                this.closeDeleteModal();\r\n                this.loadReports(); // 重新加载报告列表\r\n                \r\n            } catch (error) {\r\n                console.error('删除报告失败:', error);\r\n                this.showNotification('删除失败: ' + error.message, 'error');\r\n            } finally {\r\n                this.deleting = false;\r\n            }\r\n        },\r\n        \r\n        processTextLine(line) {\r\n            // 行级二次清理\r\n            line = line.replace(/[*#]/g, '');\r\n            \r\n            if (/^\\d+\\.\\s/.test(line)) {\r\n                return `<h3>${line.replace(/^\\d+\\.\\s/, '')}</h3>`;\r\n            }\r\n            if (/^- /.test(line)) {\r\n                return `<li>${line.replace(/^- /, '')}</li>`;\r\n            }\r\n            return line ? `<p>${line}</p>` : '';\r\n        },\r\n        \r\n        processTable(rows) {\r\n            if (rows.length < 2) return '';\r\n            \r\n            // 表头清理\r\n            const headers = rows[0]\r\n                .split('|')\r\n                .slice(1, -1)\r\n                .map(h => h.trim().replace(/[*#]/g, ''));\r\n\r\n            // 表格内容清理\r\n            const dataRows = rows.slice(2).map(row => \r\n                row.split('|')\r\n                   .slice(1, -1)\r\n                   .map(c => c.trim().replace(/[*#]/g, ''))\r\n            );\r\n\r\n            let html = '<table class=\"summary-table\"><thead><tr>';\r\n            headers.forEach(header => {\r\n                html += `<th>${header}</th>`;\r\n            });\r\n            html += '</tr></thead><tbody>';\r\n\r\n            dataRows.forEach(cells => {\r\n                html += '<tr>';\r\n                cells.forEach(cell => {\r\n                    html += `<td>${cell}</td>`;\r\n                });\r\n                html += '</tr>';\r\n            });\r\n\r\n            return html + '</tbody></table>';\r\n        },\r\n        \r\n        downloadSummary() {\r\n            if (this.summary) {\r\n                const element = document.createElement('a');\r\n                element.href = URL.createObjectURL(\r\n                    new Blob([this.summary.replace(/[*#]/g, '')], \r\n                    { type: 'text/plain' })\r\n                );\r\n                element.download = this.selectedReport;\r\n                element.click();\r\n                this.showNotification('报告下载成功', 'success');\r\n            }\r\n        },\r\n        \r\n        // 辅助方法\r\n        setActionLoading(filename, loading) {\r\n            this.$set(this.actionLoading, filename, loading);\r\n        },\r\n        \r\n        closeReport() {\r\n            this.selectedReport = null;\r\n            this.summary = null;\r\n        },\r\n        \r\n        closeDetailsModal() {\r\n            this.showDetailsModal = false;\r\n            this.selectedReportDetails = null;\r\n        },\r\n        \r\n        closeDeleteModal() {\r\n            this.showDeleteModal = false;\r\n            this.selectedReportForDelete = null;\r\n            this.deleting = false;\r\n        },\r\n        \r\n        showNotification(message, type = 'success') {\r\n            this.notification = {\r\n                show: true,\r\n                message,\r\n                type\r\n            };\r\n            \r\n            // 3秒后自动隐藏\r\n            setTimeout(() => {\r\n                this.notification.show = false;\r\n            }, 3000);\r\n        },\r\n        \r\n        formatDate(dateStr) {\r\n            if (!dateStr) return '未知';\r\n            // 如果是 YYYY-MM-DD 格式，转换为更友好的格式\r\n            const date = new Date(dateStr);\r\n            if (isNaN(date.getTime())) {\r\n                return dateStr; // 如果解析失败，返回原字符串\r\n            }\r\n            return date.toLocaleDateString('zh-CN', {\r\n                year: 'numeric',\r\n                month: 'long',\r\n                day: 'numeric'\r\n            });\r\n        },\r\n        \r\n        formatTimestamp(timestamp) {\r\n            if (!timestamp) return '未知';\r\n            const date = new Date(timestamp * 1000);\r\n            return date.toLocaleString('zh-CN');\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 2.5rem 1.5rem 2rem 1.5rem;\r\n  font-family: 'Segoe UI', 'Arial', sans-serif;\r\n  background: linear-gradient(120deg, #f5f7fa 0%, #e3f0ff 100%);\r\n  min-height: 100vh;\r\n}\r\n\r\n.header-section {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-bottom: 2rem;\r\n  background: linear-gradient(90deg, #e3f0ff 60%, #f5f7fa 100%);\r\n  border-radius: 18px;\r\n  padding: 1.8rem;\r\n  box-shadow: 0 4px 18px rgba(80,120,200,0.10);\r\n}\r\n\r\n.section-title {\r\n  color: #2c3e50;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.7rem;\r\n  margin: 0;\r\n  font-size: 2.1rem;\r\n  font-weight: 700;\r\n  letter-spacing: 1px;\r\n}\r\n\r\n.section-title i {\r\n  color: #4a89dc;\r\n  font-size: 2.1rem;\r\n}\r\n\r\n.refresh-btn {\r\n  padding: 0.8rem 1.5rem;\r\n  background: linear-gradient(135deg, #4a89dc, #6dd5ed);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  font-size: 1.05rem;\r\n  font-weight: 500;\r\n  transition: all 0.3s;\r\n  box-shadow: 0 2px 8px rgba(74,137,220,0.15);\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.refresh-btn:hover:not(:disabled) {\r\n  background: linear-gradient(135deg, #3a79cc, #5cc5dd);\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 12px rgba(74,137,220,0.25);\r\n}\r\n\r\n.refresh-btn:disabled {\r\n  background: #b0c4de;\r\n  cursor: not-allowed;\r\n  transform: none;\r\n}\r\n\r\n.search-section {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-bottom: 2rem;\r\n  background: linear-gradient(90deg, #f5f7fa 80%, #e3f0ff 100%);\r\n  border-radius: 12px;\r\n  padding: 1.5rem;\r\n  box-shadow: 0 2px 8px rgba(80,120,200,0.06);\r\n}\r\n\r\n.search-container {\r\n  position: relative;\r\n  flex: 1;\r\n  max-width: 400px;\r\n}\r\n\r\n.search-icon {\r\n  position: absolute;\r\n  left: 1rem;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  color: #4a89dc;\r\n  font-size: 1rem;\r\n}\r\n\r\n.search-input {\r\n  width: 100%;\r\n  padding: 0.75rem 1rem 0.75rem 2.5rem;\r\n  border: 1.5px solid #b0c4de;\r\n  border-radius: 10px;\r\n  font-size: 1.08rem;\r\n  font-weight: 500;\r\n  color: #34495e;\r\n  transition: all 0.3s;\r\n  background: linear-gradient(90deg, #f5f7fa 80%, #e3f0ff 100%);\r\n  box-shadow: 0 2px 8px rgba(80,120,200,0.06);\r\n}\r\n\r\n.search-input:focus {\r\n  outline: none;\r\n  border-color: #4a89dc;\r\n  box-shadow: 0 0 0 3px rgba(74,137,220,0.1);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.report-count {\r\n  color: #34495e;\r\n  font-weight: 600;\r\n  font-size: 1.05rem;\r\n  letter-spacing: 0.3px;\r\n}\r\n\r\n.loading-section, .error-section {\r\n  text-align: center;\r\n  padding: 3rem;\r\n  background: white;\r\n  border-radius: 18px;\r\n  box-shadow: 0 8px 32px rgba(80,120,200,0.10);\r\n}\r\n\r\n.loading-section {\r\n  color: #4a89dc;\r\n  font-size: 1.2rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.error-section {\r\n  color: #e74c3c;\r\n  font-size: 1.2rem;\r\n  font-weight: 500;\r\n  background: rgba(231, 76, 60, 0.05);\r\n}\r\n\r\n.report-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));\r\n  gap: 2rem;\r\n}\r\n\r\n.report-card {\r\n  background: white;\r\n  border-radius: 18px;\r\n  box-shadow: 0 8px 32px rgba(80,120,200,0.10);\r\n  transition: all 0.3s ease;\r\n  position: relative;\r\n  overflow: hidden;\r\n  border: none;\r\n}\r\n\r\n.report-card:hover {\r\n  transform: translateY(-5px);\r\n  box-shadow: 0 15px 40px rgba(74,137,220,0.15);\r\n}\r\n\r\n.report-card-header {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  padding: 1.5rem;\r\n  background: linear-gradient(135deg, #2b5694 0%, #3a6cb9 100%);\r\n  color: white;\r\n}\r\n\r\n.report-icon {\r\n  width: 50px;\r\n  height: 50px;\r\n  border-radius: 12px;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 1.5rem;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.report-info h3 {\r\n  margin: 0;\r\n  font-size: 1.2rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.report-date {\r\n  margin: 0.25rem 0 0 0;\r\n  opacity: 0.9;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.report-card-body {\r\n  padding: 1.5rem;\r\n}\r\n\r\n.report-filename {\r\n  color: #4a89dc;\r\n  font-size: 0.98rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  font-family: 'Monaco', 'Courier New', monospace;\r\n  background: rgba(74,137,220,0.1);\r\n  padding: 0.6rem 0.8rem;\r\n  border-radius: 8px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.report-card-actions {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 0.5rem;\r\n  padding: 0 1.5rem 1.5rem;\r\n}\r\n\r\n.action-btn {\r\n  padding: 0.7rem;\r\n  border: none;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  font-size: 0.95rem;\r\n  transition: all 0.3s;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-shadow: 0 2px 8px rgba(80,120,200,0.08);\r\n  gap: 0.5rem;\r\n}\r\n\r\n.view-btn {\r\n  background: linear-gradient(135deg, #4a89dc, #5b9dff);\r\n  color: white;\r\n}\r\n\r\n.details-btn {\r\n  background: linear-gradient(135deg, #74b9ff, #0984e3);\r\n  color: white;\r\n}\r\n\r\n.download-btn {\r\n  background: linear-gradient(135deg, #00b894, #00a085);\r\n  color: white;\r\n}\r\n\r\n.gff-btn {\r\n  background: linear-gradient(135deg, #4a89dc, #6dd5ed);\r\n  color: white;\r\n}\r\n\r\n.delete-btn {\r\n  background: linear-gradient(135deg, #fd79a8, #e84393);\r\n  color: white;\r\n  grid-column: 1 / -1;\r\n}\r\n\r\n.action-btn:hover:not(:disabled) {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.action-btn:disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n  transform: none;\r\n}\r\n\r\n.action-loading {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(255, 255, 255, 0.9);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #e67e22;\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.empty-state {\r\n  grid-column: 1 / -1;\r\n  text-align: center;\r\n  padding: 4rem 2rem;\r\n  background: white;\r\n  border-radius: 18px;\r\n  box-shadow: 0 8px 30px rgba(80,120,200,0.1);\r\n  border: 1px solid rgba(80,120,200,0.05);\r\n}\r\n\r\n.empty-state i {\r\n  font-size: 4rem;\r\n  color: #4a89dc;\r\n  opacity: 0.4;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.empty-state h3 {\r\n  color: #2c3e50;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.empty-state p {\r\n  color: #7f8c8d;\r\n}\r\n\r\n/* 模态框样式 */\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.6);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n  backdrop-filter: blur(5px);\r\n}\r\n\r\n.modal-content {\r\n  background: white;\r\n  border-radius: 16px;\r\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\r\n  max-width: 90vw;\r\n  max-height: 90vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.report-modal {\r\n  width: 800px;\r\n  max-height: 85vh;\r\n}\r\n\r\n.details-modal {\r\n  width: 600px;\r\n}\r\n\r\n.delete-modal {\r\n  width: 450px;\r\n}\r\n\r\n.modal-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 1.5rem;\r\n  background: linear-gradient(135deg, #4a89dc 0%, #5b9dff 100%);\r\n  color: white;\r\n  border-radius: 16px 16px 0 0;\r\n}\r\n\r\n.modal-header h3 {\r\n  margin: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.close-btn {\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  font-size: 1.5rem;\r\n  cursor: pointer;\r\n  padding: 0.25rem;\r\n  border-radius: 4px;\r\n  transition: background 0.3s ease;\r\n}\r\n\r\n.close-btn:hover {\r\n  background: rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n.modal-body {\r\n  padding: 2rem;\r\n  max-height: 60vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.report-content {\r\n  line-height: 1.6;\r\n}\r\n\r\n.details-grid {\r\n  display: grid;\r\n  gap: 1rem;\r\n}\r\n\r\n.detail-item {\r\n  display: grid;\r\n  grid-template-columns: 140px 1fr;\r\n  gap: 1rem;\r\n  align-items: start;\r\n  padding: 0.75rem;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n}\r\n\r\n.detail-item label {\r\n  font-weight: 600;\r\n  color: #2c3e50;\r\n}\r\n\r\n.detail-item span {\r\n  color: #5a6c7d;\r\n}\r\n\r\n.status-yes {\r\n  color: #27ae60 !important;\r\n  font-weight: 600;\r\n}\r\n\r\n.status-no {\r\n  color: #e74c3c !important;\r\n  font-weight: 600;\r\n}\r\n\r\n.loading-details {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  color: #e67e22;\r\n}\r\n\r\n.modal-footer {\r\n  display: flex;\r\n  gap: 1rem;\r\n  justify-content: flex-end;\r\n  padding: 1.5rem;\r\n  background: #f8f9fa;\r\n  border-radius: 0 0 16px 16px;\r\n}\r\n\r\n.btn {\r\n  padding: 0.75rem 1.5rem;\r\n  border: none;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  transition: all 0.3s ease;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.btn-primary {\r\n  background: linear-gradient(135deg, #e67e22, #d35400);\r\n  color: white;\r\n}\r\n\r\n.btn-secondary {\r\n  background: #95a5a6;\r\n  color: white;\r\n}\r\n\r\n.btn-danger {\r\n  background: linear-gradient(135deg, #e74c3c, #c0392b);\r\n  color: white;\r\n}\r\n\r\n.btn:hover:not(:disabled) {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.btn:disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n  transform: none;\r\n}\r\n\r\n.warning-text {\r\n  color: #e67e22;\r\n  font-style: italic;\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.text-danger {\r\n  color: #e74c3c;\r\n}\r\n\r\n/* 报告内容样式 */\r\n.report-content h3 {\r\n  color: #4a89dc;\r\n  margin: 2rem 0 1.5rem;\r\n  padding-bottom: 0.8rem;\r\n  border-bottom: 2px solid rgba(74,137,220,0.15);\r\n  font-size: 1.5rem;\r\n  font-weight: 600;\r\n  letter-spacing: 0.3px;\r\n}\r\n\r\n.report-content ul {\r\n  margin: 1.5rem 0;\r\n  padding-left: 2rem;\r\n  list-style: none;\r\n}\r\n\r\n.report-content li {\r\n  position: relative;\r\n  margin: 1rem 0;\r\n  color: #34495e;\r\n  font-size: 1.1rem;\r\n  line-height: 1.5;\r\n}\r\n\r\n.report-content li::before {\r\n  content: \"▪\";\r\n  color: #4a89dc;\r\n  position: absolute;\r\n  left: -1.5rem;\r\n  font-size: 1rem;\r\n}\r\n\r\n.report-content p {\r\n  color: #34495e;\r\n  line-height: 1.9;\r\n  margin: 1rem 0;\r\n  text-align: justify;\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.summary-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin: 2rem 0;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.summary-table th,\r\n.summary-table td {\r\n  border: 1px solid #ddd;\r\n  padding: 15px;\r\n  text-align: left;\r\n}\r\n\r\n.summary-table th {\r\n  background-color: #4a89dc;\r\n  color: white;\r\n  font-weight: 600;\r\n}\r\n\r\n.summary-table tr:nth-child(even) {\r\n  background-color: #f8f9fa;\r\n}\r\n\r\n.summary-table tr:hover {\r\n  background-color: #f1f4f7;\r\n}\r\n\r\n/* 通知样式 */\r\n.notification {\r\n  position: fixed;\r\n  top: 2rem;\r\n  right: 2rem;\r\n  padding: 1rem 1.5rem;\r\n  border-radius: 8px;\r\n  color: white;\r\n  font-weight: 500;\r\n  z-index: 1100;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  min-width: 300px;\r\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);\r\n  animation: slideIn 0.3s ease;\r\n}\r\n\r\n@keyframes slideIn {\r\n  from {\r\n    transform: translateX(100%);\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    transform: translateX(0);\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n.notification.success {\r\n  background: linear-gradient(135deg, #27ae60, #2ecc71);\r\n}\r\n\r\n.notification.error {\r\n  background: linear-gradient(135deg, #e74c3c, #c0392b);\r\n}\r\n\r\n.notification.warning {\r\n  background: linear-gradient(135deg, #4a89dc, #6dd5ed);\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .container {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .report-grid {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .header-section {\r\n    flex-direction: column;\r\n    gap: 1rem;\r\n    text-align: center;\r\n  }\r\n  \r\n  .search-section {\r\n    flex-direction: column;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .report-card-actions {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .modal-content {\r\n    margin: 1rem;\r\n    width: auto;\r\n  }\r\n  \r\n  .report-modal {\r\n    width: auto;\r\n    max-width: 95vw;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SummaryReport.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SummaryReport.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./SummaryReport.vue?vue&type=template&id=8a675cba&scoped=true\"\nimport script from \"./SummaryReport.vue?vue&type=script&lang=js\"\nexport * from \"./SummaryReport.vue?vue&type=script&lang=js\"\nimport style0 from \"./SummaryReport.vue?vue&type=style&index=0&id=8a675cba&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8a675cba\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container gradient-bg\"},[_vm._m(0),_c('div',{staticClass:\"form-row-flex card\"},[_c('div',{staticClass:\"form-col\"},[_c('label',{staticClass:\"form-label\"},[_vm._v(\"选择已有模型（可选）：\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedModel),expression:\"selectedModel\"}],staticClass:\"form-select\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedModel=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"不使用预训练\")]),_vm._l((_vm.modelList),function(model){return _c('option',{key:model,domProps:{\"value\":model}},[_vm._v(_vm._s(model))])})],2)]),_c('div',{staticClass:\"form-divider\"}),_c('div',{staticClass:\"form-col\"},[_c('label',{staticClass:\"form-label\"},[_vm._v(\"上传数据集：\")]),_c('div',{staticClass:\"file-upload-container\"},[_vm._m(1),_c('input',{staticClass:\"form-file\",attrs:{\"id\":\"file-upload\",\"type\":\"file\",\"accept\":\".fasta,.fa\",\"webkitdirectory\":\"\",\"multiple\":\"\"},on:{\"change\":_vm.handleFileChange}}),(_vm.fileName)?_c('span',{staticClass:\"file-name\"},[_vm._v(_vm._s(_vm.fileName))]):_vm._e()])])]),_c('div',{staticClass:\"form-row card\",staticStyle:{\"flex-wrap\":\"wrap\",\"gap\":\"1.5rem\"}},[_c('div',[_c('label',[_vm._v(\"max_length：\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.form.max_length),expression:\"form.max_length\",modifiers:{\"number\":true}}],staticClass:\"input-beauty\",staticStyle:{\"width\":\"90px\"},attrs:{\"type\":\"number\",\"min\":\"100\",\"max\":\"100000\",\"step\":\"100\"},domProps:{\"value\":(_vm.form.max_length)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.form, \"max_length\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',[_c('label',[_vm._v(\"batch_size：\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.form.batch_size),expression:\"form.batch_size\",modifiers:{\"number\":true}}],staticClass:\"input-beauty\",staticStyle:{\"width\":\"70px\"},attrs:{\"type\":\"number\",\"min\":\"1\",\"max\":\"1024\",\"step\":\"1\"},domProps:{\"value\":(_vm.form.batch_size)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.form, \"batch_size\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',[_c('label',[_vm._v(\"epochs：\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.form.epochs),expression:\"form.epochs\",modifiers:{\"number\":true}}],staticClass:\"input-beauty\",staticStyle:{\"width\":\"60px\"},attrs:{\"type\":\"number\",\"min\":\"1\",\"max\":\"1000\",\"step\":\"1\"},domProps:{\"value\":(_vm.form.epochs)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.form, \"epochs\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',[_c('label',[_vm._v(\"learning_rate：\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.form.learning_rate),expression:\"form.learning_rate\",modifiers:{\"number\":true}}],staticClass:\"input-beauty\",staticStyle:{\"width\":\"90px\"},attrs:{\"type\":\"number\",\"min\":\"0.00001\",\"max\":\"1\",\"step\":\"0.00001\"},domProps:{\"value\":(_vm.form.learning_rate)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.form, \"learning_rate\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('div',[_c('label',[_vm._v(\"val_ratio：\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.form.val_ratio),expression:\"form.val_ratio\",modifiers:{\"number\":true}}],staticClass:\"input-beauty\",staticStyle:{\"width\":\"60px\"},attrs:{\"type\":\"number\",\"min\":\"0.01\",\"max\":\"0.99\",\"step\":\"0.01\"},domProps:{\"value\":(_vm.form.val_ratio)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.form, \"val_ratio\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})])]),_c('div',{staticClass:\"model-name-row card\"},[_c('label',{staticClass:\"form-label\"},[_vm._v(\"新模型名：\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.new_model_name),expression:\"form.new_model_name\"}],staticClass:\"input-beauty model-name-input\",attrs:{\"placeholder\":\"仅字母数字下划线\",\"maxlength\":\"32\"},domProps:{\"value\":(_vm.form.new_model_name)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.form, \"new_model_name\", $event.target.value)}}})]),_c('div',{staticClass:\"form-row card\"},[_c('button',{staticClass:\"train-button gradient-btn\",attrs:{\"disabled\":!_vm.fileName || !_vm.form.new_model_name || _vm.isTraining},on:{\"click\":_vm.startTraining}},[_c('i',{staticClass:\"fa-solid fa-play\"}),_vm._v(\" 开始训练 \")])]),(_vm.isTraining)?_c('div',{staticClass:\"progress-container card progress-card-narrow\"},[_c('div',{staticClass:\"progress-label\"},[_vm._v(\"训练进度：\"),_c('span',{staticClass:\"progress-percent\"},[_vm._v(_vm._s(_vm.progress)+\"%\")])]),_c('div',{staticClass:\"progress-bar-container\"},[_c('div',{staticClass:\"progress-bar gradient-progress\",style:({ width: _vm.progress + '%' })})])]):_vm._e(),(_vm.epochLogs.length)?_c('div',{staticClass:\"card log-card-narrow\"},[_c('h3',{staticStyle:{\"margin-bottom\":\"1rem\"}},[_vm._v(\"训练过程\")]),(_vm.epochLogs.length)?_c('table',{staticClass:\"train-log-table\"},[_vm._m(2),_c('tbody',_vm._l((_vm.epochLogs),function(log){return _c('tr',{key:log.epoch},[_c('td',[_vm._v(_vm._s(log.epoch))]),_c('td',[_vm._v(_vm._s(log.train.loss.toFixed(4)))]),_c('td',[_vm._v(_vm._s((log.train.accuracy*100).toFixed(2))+\"%\")]),_c('td',[_vm._v(_vm._s(log.val.loss.toFixed(4)))]),_c('td',[_vm._v(_vm._s((log.val.accuracy*100).toFixed(2))+\"%\")]),_c('td',[_vm._v(_vm._s(log.learning_rate.toExponential(2)))])])}),0)]):_vm._e()]):_vm._e(),(_vm.trainingFinished)?_c('div',{staticClass:\"result-section card result-section-beauty\"},[_c('div',{staticClass:\"saved-tip saved-tip-beauty\"},[_c('i',{staticClass:\"fa-solid fa-check-circle\"}),_c('span',[_vm._v(\"模型已自动保存为 \"),_c('b',[_vm._v(_vm._s(_vm.form.new_model_name)+\".pth\")]),_vm._v(\" / \"),_c('b',[_vm._v(_vm._s(_vm.form.new_model_name)+\".json\")])]),_c('button',{staticClass:\"cancel-btn\",on:{\"click\":_vm.resetAll}},[_vm._v(\"关闭\")])])]):_vm._e(),(_vm.errorMsg)?_c('div',{staticClass:\"error-tip card\"},[_c('i',{staticClass:\"fa-solid fa-exclamation-triangle\"}),_vm._v(\" \"+_vm._s(_vm.errorMsg))]):_vm._e()])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"header-section card\"},[_c('h2',{staticClass:\"section-title\"},[_c('i',{staticClass:\"fa-solid fa-brain\"}),_vm._v(\" 预训练模型训练 \")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('label',{staticClass:\"file-upload-btn\",attrs:{\"for\":\"file-upload\"}},[_c('i',{staticClass:\"fa-solid fa-cloud-upload-alt\"}),_vm._v(\" 选择文件 \")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('thead',[_c('tr',[_c('th',[_vm._v(\"Epoch\")]),_c('th',[_vm._v(\"Train Loss\")]),_c('th',[_vm._v(\"Train Acc\")]),_c('th',[_vm._v(\"Val Loss\")]),_c('th',[_vm._v(\"Val Acc\")]),_c('th',[_vm._v(\"LR\")])])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container gradient-bg\">\r\n    <div class=\"header-section card\">\r\n      <h2 class=\"section-title\">\r\n        <i class=\"fa-solid fa-brain\"></i> 预训练模型训练\r\n      </h2>\r\n    </div>\r\n\r\n    <!-- 选择模型和上传数据集（一行显示） -->\r\n    <div class=\"form-row-flex card\">\r\n      <div class=\"form-col\">\r\n        <label class=\"form-label\">选择已有模型（可选）：</label>\r\n        <select v-model=\"selectedModel\" class=\"form-select\">\r\n          <option value=\"\">不使用预训练</option>\r\n          <option v-for=\"model in modelList\" :key=\"model\" :value=\"model\">{{ model }}</option>\r\n        </select>\r\n      </div>\r\n      \r\n      <div class=\"form-divider\"></div>\r\n      \r\n      <div class=\"form-col\">\r\n        <label class=\"form-label\">上传数据集：</label>\r\n        <div class=\"file-upload-container\">\r\n          <label for=\"file-upload\" class=\"file-upload-btn\">\r\n            <i class=\"fa-solid fa-cloud-upload-alt\"></i> 选择文件\r\n          </label>\r\n          <input id=\"file-upload\" type=\"file\" @change=\"handleFileChange\" class=\"form-file\" accept=\".fasta,.fa\" webkitdirectory multiple />\r\n          <span v-if=\"fileName\" class=\"file-name\">{{ fileName }}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 训练参数输入区 -->\r\n    <div class=\"form-row card\" style=\"flex-wrap: wrap; gap: 1.5rem;\">\r\n      <div>\r\n        <label>max_length：</label>\r\n        <input v-model.number=\"form.max_length\" type=\"number\" min=\"100\" max=\"100000\" step=\"100\" class=\"input-beauty\" style=\"width:90px\" />\r\n      </div>\r\n      <div>\r\n        <label>batch_size：</label>\r\n        <input v-model.number=\"form.batch_size\" type=\"number\" min=\"1\" max=\"1024\" step=\"1\" class=\"input-beauty\" style=\"width:70px\" />\r\n      </div>\r\n      <div>\r\n        <label>epochs：</label>\r\n        <input v-model.number=\"form.epochs\" type=\"number\" min=\"1\" max=\"1000\" step=\"1\" class=\"input-beauty\" style=\"width:60px\" />\r\n      </div>\r\n      <div>\r\n        <label>learning_rate：</label>\r\n        <input v-model.number=\"form.learning_rate\" type=\"number\" min=\"0.00001\" max=\"1\" step=\"0.00001\" class=\"input-beauty\" style=\"width:90px\" />\r\n      </div>\r\n      <div>\r\n        <label>val_ratio：</label>\r\n        <input v-model.number=\"form.val_ratio\" type=\"number\" min=\"0.01\" max=\"0.99\" step=\"0.01\" class=\"input-beauty\" style=\"width:60px\" />\r\n      </div>\r\n    </div>\r\n    <!-- 模型名称输入单独一行 -->\r\n    <div class=\"model-name-row card\">\r\n      <label class=\"form-label\">新模型名：</label>\r\n      <input v-model=\"form.new_model_name\" class=\"input-beauty model-name-input\" placeholder=\"仅字母数字下划线\" maxlength=\"32\" />\r\n    </div>\r\n\r\n    <!-- 启动训练按钮 -->\r\n    <div class=\"form-row card\">\r\n      <button class=\"train-button gradient-btn\" :disabled=\"!fileName || !form.new_model_name || isTraining\" @click=\"startTraining\">\r\n        <i class=\"fa-solid fa-play\"></i> 开始训练\r\n      </button>\r\n    </div>\r\n\r\n    <!-- 训练进度 -->\r\n    <div v-if=\"isTraining\" class=\"progress-container card progress-card-narrow\">\r\n      <div class=\"progress-label\">训练进度：<span class=\"progress-percent\">{{ progress }}%</span></div>\r\n      <div class=\"progress-bar-container\">\r\n        <div class=\"progress-bar gradient-progress\" :style=\"{ width: progress + '%' }\"></div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 训练日志/曲线 -->\r\n    <div v-if=\"epochLogs.length\" class=\"card log-card-narrow\">\r\n      <h3 style=\"margin-bottom:1rem;\">训练过程</h3>\r\n      <table v-if=\"epochLogs.length\" class=\"train-log-table\">\r\n        <thead>\r\n          <tr>\r\n            <th>Epoch</th>\r\n            <th>Train Loss</th>\r\n            <th>Train Acc</th>\r\n            <th>Val Loss</th>\r\n            <th>Val Acc</th>\r\n            <th>LR</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr v-for=\"log in epochLogs\" :key=\"log.epoch\">\r\n            <td>{{ log.epoch }}</td>\r\n            <td>{{ log.train.loss.toFixed(4) }}</td>\r\n            <td>{{ (log.train.accuracy*100).toFixed(2) }}%</td>\r\n            <td>{{ log.val.loss.toFixed(4) }}</td>\r\n            <td>{{ (log.val.accuracy*100).toFixed(2) }}%</td>\r\n            <td>{{ log.learning_rate.toExponential(2) }}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n\r\n    <!-- 训练结果展示 -->\r\n    <div v-if=\"trainingFinished\" class=\"result-section card result-section-beauty\">\r\n      <div class=\"saved-tip saved-tip-beauty\">\r\n        <i class=\"fa-solid fa-check-circle\"></i>\r\n        <span>模型已自动保存为 <b>{{ form.new_model_name }}.pth</b> / <b>{{ form.new_model_name }}.json</b></span>\r\n        <button class=\"cancel-btn\" @click=\"resetAll\">关闭</button>\r\n      </div>\r\n    </div>\r\n    <div v-if=\"errorMsg\" class=\"error-tip card\"><i class=\"fa-solid fa-exclamation-triangle\"></i> {{ errorMsg }}</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { API_BASE_URL } from '../config.js';\r\nexport default {\r\n  data() {\r\n    return {\r\n      modelList: [\r\n        'HybridModel_v1',\r\n        'HyperFusionCortex_v1',\r\n        'MSA_ResGRUNet_protein_classifier',\r\n        'MSA_ResGRUNet_v1',\r\n        'protein_classifier'\r\n      ],\r\n      selectedModel: '',\r\n      fileName: '',\r\n      isTraining: false,\r\n      progress: 0,\r\n      trainingFinished: false,\r\n      metrics: {\r\n        accuracy: '--',\r\n        loss: '--'\r\n      },\r\n      fileList: [],\r\n      errorMsg: '',\r\n      modelBin: null,\r\n      modelJson: null,\r\n      epochLogs: [],\r\n      form: {\r\n        max_length: 10000,\r\n        batch_size: 32,\r\n        epochs: 10,\r\n        learning_rate: 0.0001,\r\n        val_ratio: 0.2,\r\n        new_model_name: ''\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    handleFileChange(e) {\r\n      const files = Array.from(e.target.files);\r\n      this.fileList = files;\r\n      this.fileName = files.length > 0 ? `已选择${files.length}个文件` : '';\r\n    },\r\n    async startTraining() {\r\n      this.isTraining = true;\r\n      this.progress = 0;\r\n      this.trainingFinished = false;\r\n      this.errorMsg = '';\r\n      this.metrics = { accuracy: '--', loss: '--' };\r\n      this.epochLogs = [];\r\n      // 构造FormData\r\n      const formData = new FormData();\r\n      if (this.fileList && this.fileList.length > 0) {\r\n        this.fileList.forEach(f => formData.append('file', f));\r\n      }\r\n      if (this.selectedModel) {\r\n        formData.append('pretrain_model', this.selectedModel);\r\n      }\r\n      formData.append('model_type', this.selectedModel ? this.selectedModel.replace('.pth', '').replace('_v1','').replace('_protein_classifier','') : 'HybridModel');\r\n      formData.append('max_length', this.form.max_length);\r\n      formData.append('batch_size', this.form.batch_size);\r\n      formData.append('epochs', this.form.epochs);\r\n      formData.append('learning_rate', this.form.learning_rate);\r\n      formData.append('val_ratio', this.form.val_ratio);\r\n      formData.append('new_model_name', this.form.new_model_name);\r\n      try {\r\n        const url = `${API_BASE_URL}/train_model`;\r\n        const res = await fetch(url, {\r\n          method: 'POST',\r\n          body: formData\r\n        });\r\n        if (!res.body) throw new Error('No response body');\r\n        const reader = res.body.getReader();\r\n        let buffer = '';\r\n        let done = false;\r\n        let totalEpochs = this.form.epochs;\r\n        while (!done) {\r\n          const { value, done: doneReading } = await reader.read();\r\n          done = doneReading;\r\n          if (value) {\r\n            buffer += new TextDecoder().decode(value);\r\n            let lines = buffer.split('\\n');\r\n            buffer = lines.pop(); // 最后一行可能不完整\r\n            for (let line of lines) {\r\n              if (!line.trim()) continue;\r\n              let data;\r\n              try { data = JSON.parse(line); } catch { continue; }\r\n              if (data.type === 'epoch') {\r\n                this.epochLogs.push(data);\r\n                this.progress = Math.round((data.epoch / totalEpochs) * 100);\r\n              } else if (data.type === 'done') {\r\n                this.modelBin = data.model_bytes;\r\n                this.modelJson = data.model_json;\r\n                this.trainingFinished = true;\r\n                if (data.model_json && data.model_json.metrics) {\r\n                  this.metrics = {\r\n                    accuracy: data.model_json.metrics.accuracy || '--',\r\n                    loss: data.model_json.metrics.loss || '--'\r\n                  };\r\n                }\r\n                this.progress = 100;\r\n                this.isTraining = false;\r\n              } else if (data.error) {\r\n                this.errorMsg = data.error;\r\n                this.isTraining = false;\r\n                return;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } catch (err) {\r\n        this.errorMsg = '训练失败：' + err.message;\r\n        this.isTraining = false;\r\n      }\r\n      this.isTraining = false;\r\n    },\r\n    downloadModel() {\r\n      if (!this.modelBin || !this.modelJson) return;\r\n      const bin = new Uint8Array(this.modelBin.match(/.{1,2}/g).map(byte => parseInt(byte, 16)));\r\n      const blob = new Blob([bin], { type: 'application/octet-stream' });\r\n      const a = document.createElement('a');\r\n      a.href = URL.createObjectURL(blob);\r\n      a.download = (this.form.new_model_name || 'trained_model') + '.pth';\r\n      a.click();\r\n      // 下载json\r\n      const jsonBlob = new Blob([JSON.stringify(this.modelJson, null, 2)], { type: 'application/json' });\r\n      const a2 = document.createElement('a');\r\n      a2.href = URL.createObjectURL(jsonBlob);\r\n      a2.download = (this.form.new_model_name || 'trained_model') + '.json';\r\n      a2.click();\r\n    },\r\n    resetAll() {\r\n      this.selectedModel = '';\r\n      this.fileName = '';\r\n      this.isTraining = false;\r\n      this.progress = 0;\r\n      this.trainingFinished = false;\r\n      this.form = {\r\n        max_length: 10000,\r\n        batch_size: 32,\r\n        epochs: 10,\r\n        learning_rate: 0.0001,\r\n        val_ratio: 0.2,\r\n        new_model_name: ''\r\n      };\r\n      this.errorMsg = '';\r\n      this.modelBin = null;\r\n      this.modelJson = null;\r\n      this.epochLogs = [];\r\n      this.fileList = [];\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 2.5rem 1.5rem 2rem 1.5rem;\r\n  font-family: 'Segoe UI', 'Arial', sans-serif;\r\n}\r\n.gradient-bg {\r\n  background: linear-gradient(120deg, #f5f7fa 0%, #e3f0ff 100%);\r\n  min-height: 100vh;\r\n}\r\n.card {\r\n  background: #fff;\r\n  border-radius: 18px;\r\n  box-shadow: 0 8px 32px rgba(80,120,200,0.10);\r\n  margin-bottom: 2.2rem;\r\n  padding: 2.2rem 2rem 2rem 2rem;\r\n  border: none;\r\n}\r\n.header-section.card {\r\n  background: linear-gradient(90deg, #e3f0ff 60%, #f5f7fa 100%);\r\n  box-shadow: 0 4px 18px rgba(80,120,200,0.10);\r\n  margin-bottom: 2.5rem;\r\n  padding: 2.2rem 2rem 1.2rem 2rem;\r\n}\r\n.section-title {\r\n  color: #2c3e50;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.7rem;\r\n  margin: 0;\r\n  font-size: 2.1rem;\r\n  font-weight: 700;\r\n  letter-spacing: 1px;\r\n}\r\n.form-row {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 1.5rem;\r\n  gap: 1.2rem;\r\n  background: #f8fafd;\r\n  border-radius: 12px;\r\n  padding: 1.1rem 1.2rem;\r\n  box-shadow: 0 2px 8px rgba(80,120,200,0.04);\r\n}\r\n.form-row-flex {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  margin-bottom: 1.5rem;\r\n  gap: 1.5rem;\r\n  background: #f8fafd;\r\n  border-radius: 12px;\r\n  padding: 1.5rem 2rem;\r\n  box-shadow: 0 2px 8px rgba(80,120,200,0.04);\r\n}\r\n.form-col {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.8rem;\r\n}\r\n.form-divider {\r\n  width: 1px;\r\n  align-self: stretch;\r\n  background: linear-gradient(to bottom, transparent, rgba(80,120,200,0.12), transparent);\r\n  margin: 0 0.5rem;\r\n}\r\n.file-upload-container {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  flex-wrap: wrap;\r\n}\r\n.file-upload-btn {\r\n  background: linear-gradient(135deg, #4a89dc, #5b9dff);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 8px;\r\n  font-size: 1rem;\r\n  font-weight: 500;\r\n  padding: 0.7rem 1.2rem;\r\n  cursor: pointer;\r\n  transition: all 0.3s;\r\n  box-shadow: 0 2px 8px rgba(74,137,220,0.2);\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n.file-upload-btn:hover {\r\n  background: linear-gradient(135deg, #3a79cc, #4a8def);\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 12px rgba(74,137,220,0.3);\r\n}\r\n.form-file {\r\n  position: absolute;\r\n  width: 1px;\r\n  height: 1px;\r\n  padding: 0;\r\n  margin: -1px;\r\n  overflow: hidden;\r\n  clip: rect(0, 0, 0, 0);\r\n  border: 0;\r\n}\r\n.form-label {\r\n  color: #34495e;\r\n  font-weight: 600;\r\n  font-size: 1.08rem;\r\n  margin-bottom: 0.3rem;\r\n  display: block;\r\n  letter-spacing: 0.3px;\r\n}\r\n.form-select {\r\n  appearance: none;\r\n  -webkit-appearance: none;\r\n  background: linear-gradient(90deg, #f5f7fa 80%, #e3f0ff 100%);\r\n  border: 1.5px solid #b0c4de;\r\n  color: #34495e;\r\n  font-size: 1.08rem;\r\n  font-weight: 500;\r\n  padding: 0.7rem 2.5rem 0.7rem 1rem;\r\n  border-radius: 10px;\r\n  box-shadow: 0 2px 8px rgba(80,120,200,0.06);\r\n  transition: all 0.3s;\r\n  outline: none;\r\n  background-image: url('data:image/svg+xml;utf8,<svg fill=\"%234a89dc\" height=\"18\" viewBox=\"0 0 24 24\" width=\"18\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M7 10l5 5 5-5z\"/></svg>');\r\n  background-repeat: no-repeat;\r\n  background-position: right 0.8rem center;\r\n  background-size: 1.2rem;\r\n  min-width: 220px;\r\n  max-width: 100%;\r\n  cursor: pointer;\r\n}\r\n.form-select:focus, .form-select:hover {\r\n  border-color: #4a89dc;\r\n  box-shadow: 0 0 0 2px rgba(74,137,220,0.2);\r\n  transform: translateY(-1px);\r\n}\r\n.form-row input[type=number], .form-row input[type=text] {\r\n  background: linear-gradient(90deg, #f5f7fa 80%, #e3f0ff 100%);\r\n  border: 1.5px solid #b0c4de;\r\n  color: #34495e;\r\n  font-size: 1.08rem;\r\n  font-weight: 500;\r\n  padding: 0.6rem 1rem;\r\n  border-radius: 10px;\r\n  box-shadow: 0 2px 8px rgba(80,120,200,0.06);\r\n  transition: border 0.3s, box-shadow 0.3s;\r\n  outline: none;\r\n}\r\n.form-row input[type=number]:focus, .form-row input[type=text]:focus {\r\n  border-color: #4a89dc;\r\n  box-shadow: 0 0 0 2px #b0c4de33;\r\n}\r\n.gradient-btn {\r\n  background: linear-gradient(135deg, #4a89dc, #6dd5ed);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 8px;\r\n  font-size: 1.13rem;\r\n  font-weight: 600;\r\n  padding: 0.8rem 2.1rem;\r\n  cursor: pointer;\r\n  transition: background 0.3s;\r\n  box-shadow: 0 2px 8px rgba(80,120,200,0.08);\r\n}\r\n.gradient-btn:disabled {\r\n  background: #b0c4de;\r\n  cursor: not-allowed;\r\n}\r\n.train-button i, .save-btn i, .download-btn i {\r\n  margin-right: 0.5rem;\r\n}\r\n.progress-container {\r\n  width: 600;\r\n  height: 22px;\r\n  background-color: #e0e0e0;\r\n  border-radius: 12px;\r\n  margin: 1.5rem 0;\r\n  position: relative;\r\n  overflow: hidden;\r\n  box-shadow: 0 2px 8px rgba(80,120,200,0.04);\r\n}\r\n.progress-card-narrow {\r\n  max-width: 100%;\r\n  margin: 1.5rem auto;\r\n  padding: 1.1rem 0.7rem 1rem 0.7rem;\r\n  border-radius: 14px;\r\n}\r\n.gradient-progress {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  height: 100%;\r\n  background: linear-gradient(90deg, #4a89dc, #6dd5ed);\r\n  transition: width 0.3s;\r\n}\r\n.progress-text {\r\n  position: absolute;\r\n  right: 10px;\r\n  top: -22px;\r\n  font-size: 1rem;\r\n  color: #4a89dc;\r\n  font-weight: 600;\r\n}\r\n.train-log-table {\r\n  width: 100%;\r\n  border-collapse: separate;\r\n  border-spacing: 0;\r\n  margin-bottom: 1rem;\r\n  background: #fafdff;\r\n  border-radius: 12px;\r\n  overflow: hidden;\r\n  box-shadow: 0 2px 8px rgba(80,120,200,0.04);\r\n}\r\n.result-section-beauty {\r\n  background: linear-gradient(120deg, #f5f7fa 60%, #e3f0ff 100%);\r\n  border-radius: 18px;\r\n  box-shadow: 0 8px 32px rgba(80,120,200,0.10);\r\n  padding: 2.2rem 2rem 2rem 2rem;\r\n  margin-top: 2rem;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.saved-tip-beauty {\r\n  margin-top: 0;\r\n  background: linear-gradient(90deg, #e8f5e9 80%, #f1f8e9 100%);\r\n  border: 1.5px solid #b2dfdb;\r\n  border-radius: 14px;\r\n  box-shadow: 0 2px 8px rgba(67,160,71,0.07);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 1.2rem;\r\n  padding: 1.1rem 1.5rem;\r\n  font-size: 1.13rem;\r\n}\r\n.saved-tip-beauty i.fa-check-circle {\r\n  color: #43a047;\r\n  font-size: 1.6rem;\r\n}\r\n.saved-tip-beauty span {\r\n  color: #388e3c;\r\n  font-weight: 500;\r\n}\r\n.cancel-btn {\r\n  padding: 0.7rem 1.5rem;\r\n  background: linear-gradient(135deg, #f44336, #e57373);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  transition: background 0.3s;\r\n  box-shadow: 0 2px 8px rgba(244,67,54,0.08);\r\n}\r\n.cancel-btn:hover {\r\n  background: #e53935;\r\n}\r\n.file-name {\r\n  color: #4a89dc;\r\n  font-size: 0.98rem;\r\n  padding: 0.4rem 1rem;\r\n  background: rgba(74,137,220,0.1);\r\n  border-radius: 6px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  max-width: 200px;\r\n  display: inline-block;\r\n}\r\n.error-tip {\r\n  color: #e53935;\r\n  font-size: 1rem;\r\n  margin-top: 1rem;\r\n  text-align: center;\r\n  background: #fff3f3;\r\n  border-radius: 8px;\r\n  padding: 1rem;\r\n  border: 1px solid #ffcdd2;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  justify-content: center;\r\n}\r\n.input-beauty {\r\n  background: linear-gradient(90deg, #f5f7fa 80%, #e3f0ff 100%);\r\n  border: 1.5px solid #b0c4de;\r\n  color: #34495e;\r\n  font-size: 1.08rem;\r\n  font-weight: 500;\r\n  padding: 0.6rem 1rem;\r\n  border-radius: 10px;\r\n  box-shadow: 0 2px 8px rgba(80,120,200,0.06);\r\n  transition: border 0.3s, box-shadow 0.3s;\r\n  outline: none;\r\n}\r\n.input-beauty:focus {\r\n  border-color: #4a89dc;\r\n  box-shadow: 0 0 0 2px #b0c4de33;\r\n}\r\n.model-name-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1.2rem;\r\n  background: #f8fafd;\r\n  border-radius: 12px;\r\n  padding: 1.1rem 1.2rem;\r\n  box-shadow: 0 2px 8px rgba(80,120,200,0.04);\r\n  margin-bottom: 1.5rem;\r\n}\r\n.model-name-input {\r\n  min-width: 220px;\r\n  max-width: 320px;\r\n  flex: 1;\r\n}\r\n/* 训练日志区专用样式 */\r\n.log-card-narrow {\r\n  max-width: 700px;\r\n  margin: 0 auto 1.8rem auto;\r\n  padding: 2rem 2rem 1.8rem 2rem;\r\n  border-radius: 14px;\r\n  overflow-x: auto; /* 添加水平滚动条 */\r\n  background: linear-gradient(145deg, #ffffff, #f8faff);\r\n  box-shadow: 0 10px 30px rgba(74, 137, 220, 0.1);\r\n  border: 1px solid rgba(74, 137, 220, 0.06);\r\n}\r\n\r\n.log-card-narrow h3 {\r\n  color: #2c3e50;\r\n  font-size: 1.4rem;\r\n  margin-bottom: 1.4rem;\r\n  text-align: center;\r\n  font-weight: 600;\r\n  letter-spacing: 0.6px;\r\n  position: relative;\r\n  display: inline-block;\r\n  padding-bottom: 0.5rem;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n}\r\n\r\n.log-card-narrow h3::after {\r\n  content: '';\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 25%;\r\n  width: 50%;\r\n  height: 2px;\r\n  background: linear-gradient(90deg, transparent, #4a89dc, transparent);\r\n}\r\n\r\n/* 强化表格宽度控制 */\r\n.log-card-narrow .train-log-table {\r\n  table-layout: fixed;\r\n  width: 100%;\r\n  max-width: 820px;\r\n  box-shadow: 0 4px 16px rgba(80,120,200,0.1);\r\n  border-radius: 12px;\r\n  border: 1px solid rgba(80,120,200,0.07);\r\n  margin: 0 auto;\r\n}\r\n\r\n.log-card-narrow .train-log-table th,\r\n.log-card-narrow .train-log-table td {\r\n  padding: 0.85rem 0.6rem;\r\n  font-size: 1rem;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n  text-align: center;\r\n  transition: all 0.3s ease;\r\n  border-bottom: 1px solid rgba(80,120,200,0.05);\r\n}\r\n\r\n.log-card-narrow .train-log-table th {\r\n  background: linear-gradient(90deg, #4a89dc 0%, #5b9dff 100%);\r\n  color: #ffffff;\r\n  font-weight: 600;\r\n  padding: 1rem 0.6rem;\r\n  letter-spacing: 0.5px;\r\n  text-transform: uppercase;\r\n  font-size: 0.95rem;\r\n  border-bottom: none;\r\n}\r\n\r\n.log-card-narrow .train-log-table tr:hover td {\r\n  background-color: #f0f7ff;\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 2px 5px rgba(74, 137, 220, 0.1);\r\n}\r\n\r\n/* 设置各列宽度 */\r\n.log-card-narrow .train-log-table th:nth-child(1),\r\n.log-card-narrow .train-log-table td:nth-child(1) {\r\n  width: 60px; /* Epoch列宽度 */\r\n}\r\n\r\n.log-card-narrow .train-log-table th:nth-child(2),\r\n.log-card-narrow .train-log-table td:nth-child(2) {\r\n  width: auto; /* Train Loss列宽度 */\r\n}\r\n\r\n.log-card-narrow .train-log-table th:nth-child(3),\r\n.log-card-narrow .train-log-table td:nth-child(3) {\r\n  width: auto; /* Val Loss列宽度 */\r\n}\r\n\r\n.log-card-narrow .train-log-table th:nth-child(4),\r\n.log-card-narrow .train-log-table td:nth-child(4) {\r\n  width: auto; /* Train Acc列宽度 */\r\n}\r\n\r\n.log-card-narrow .train-log-table th:nth-child(5),\r\n.log-card-narrow .train-log-table td:nth-child(5) {\r\n  width: auto; /* Val Acc列宽度 */\r\n}\r\n\r\n.log-card-narrow .train-log-table th:nth-child(6),\r\n.log-card-narrow .train-log-table td:nth-child(6) {\r\n  width: 80px; /* LR列宽度 */\r\n}\r\n\r\n.log-card-narrow .train-log-table tr:nth-child(even) td {\r\n  background-color: #f5f9ff;\r\n}\r\n\r\n.log-card-narrow .train-log-table tr:last-child td:first-child {\r\n  border-bottom-left-radius: 12px;\r\n}\r\n\r\n.log-card-narrow .train-log-table tr:last-child td:last-child {\r\n  border-bottom-right-radius: 12px;\r\n}\r\n\r\n.log-card-narrow .train-log-table tr:first-child th:first-child {\r\n  border-top-left-radius: 12px;\r\n}\r\n\r\n.log-card-narrow .train-log-table tr:first-child th:last-child {\r\n  border-top-right-radius: 12px;\r\n}\r\n\r\n/* 进度条容器专用样式 */\r\n.progress-card-narrow {\r\n  max-width: 750px;\r\n  margin: 1.5rem auto;\r\n  padding: 1.8rem 2rem 1.5rem 2rem;\r\n  border-radius: 14px;\r\n  background: linear-gradient(145deg, #ffffff, #f8faff);\r\n  box-shadow: 0 10px 30px rgba(74, 137, 220, 0.12);\r\n  border: 1px solid rgba(74, 137, 220, 0.08);\r\n}\r\n\r\n.progress-card-narrow .progress-label {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 0.7rem;\r\n  color: #34495e;\r\n  font-size: 1.1rem;\r\n  font-weight: 400;\r\n  letter-spacing: 0.5px;\r\n}\r\n\r\n.progress-card-narrow .progress-percent {\r\n  background: linear-gradient(90deg, #4a89dc 0%, #6dd5ed 100%);\r\n  -webkit-background-clip: text;\r\n  background-clip: text;\r\n  -webkit-text-fill-color: transparent;\r\n  font-weight: 700;\r\n  font-size: 1.05rem;\r\n}\r\n\r\n.progress-card-narrow .progress-bar-container {\r\n  width: 100%;\r\n  height: 8px;\r\n  background-color: #e8eef7;\r\n  border-radius: 10px;\r\n  position: relative;\r\n  overflow: hidden;\r\n  box-shadow: inset 0 1px 4px rgba(0,0,0,0.08);\r\n  margin-bottom: 0.8rem;\r\n}\r\n\r\n.progress-card-narrow .progress-bar {\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  height: 100%;\r\n  border-radius: 10px;\r\n  background: linear-gradient(90deg, #4a89dc 20%, #5b9dff 70%, #6dd5ed 100%);\r\n  box-shadow: 0 1px 8px rgba(74,137,220,0.4);\r\n  transition: width 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);\r\n  animation: pulse 2s infinite;\r\n}\r\n\r\n@keyframes pulse {\r\n  0% {\r\n    box-shadow: 0 0 0 0 rgba(74, 137, 220, 0.4);\r\n  }\r\n  70% {\r\n    box-shadow: 0 0 0 6px rgba(74, 137, 220, 0);\r\n  }\r\n  100% {\r\n    box-shadow: 0 0 0 0 rgba(74, 137, 220, 0);\r\n  }\r\n}\r\n\r\n@media (max-width: 900px) {\r\n  .container {\r\n    padding: 1rem;\r\n  }\r\n  .card {\r\n    padding: 1.1rem 0.5rem;\r\n  }\r\n  .result-section-beauty {\r\n    padding: 1.2rem 0.5rem;\r\n  }\r\n  .saved-tip-beauty {\r\n    flex-direction: column;\r\n    gap: 0.7rem;\r\n    font-size: 1rem;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModelTrain.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModelTrain.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ModelTrain.vue?vue&type=template&id=c132f6c0&scoped=true\"\nimport script from \"./ModelTrain.vue?vue&type=script&lang=js\"\nexport * from \"./ModelTrain.vue?vue&type=script&lang=js\"\nimport style0 from \"./ModelTrain.vue?vue&type=style&index=0&id=c132f6c0&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c132f6c0\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"header-section\"},[_vm._m(0),_c('button',{staticClass:\"refresh-btn\",attrs:{\"disabled\":_vm.loading},on:{\"click\":_vm.loadModels}},[_c('i',{staticClass:\"fa-solid fa-sync\",class:{ 'fa-spin': _vm.loading }}),_vm._v(\" 刷新 \")])]),_c('div',{staticClass:\"search-section\"},[_c('div',{staticClass:\"search-container\"},[_c('i',{staticClass:\"fa-solid fa-search search-icon\"}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchKeyword),expression:\"searchKeyword\"}],staticClass:\"search-input\",attrs:{\"placeholder\":\"搜索模型...\"},domProps:{\"value\":(_vm.searchKeyword)},on:{\"input\":function($event){if($event.target.composing)return;_vm.searchKeyword=$event.target.value}}})]),_c('div',{staticClass:\"model-count\"},[_vm._v(\" 共 \"+_vm._s(_vm.filteredModels.length)+\" 个模型 \")])]),(_vm.loading)?_c('div',{staticClass:\"loading-section\"},[_c('i',{staticClass:\"fa-solid fa-spinner fa-spin\"}),_vm._v(\" 加载中... \")]):_vm._e(),(_vm.error)?_c('div',{staticClass:\"error-section\"},[_c('i',{staticClass:\"fa-solid fa-exclamation-triangle\"}),_vm._v(\" \"+_vm._s(_vm.error)+\" \")]):_vm._e(),(!_vm.loading && !_vm.error)?_c('div',{staticClass:\"model-grid\"},[_vm._l((_vm.filteredModels),function(model){return _c('div',{key:model.filename,staticClass:\"model-card\"},[_c('div',{staticClass:\"model-card-header\"},[_vm._m(1,true),_c('div',{staticClass:\"model-info\"},[_c('h3',{staticClass:\"model-name\"},[_vm._v(_vm._s(model.display_name))]),_c('p',{staticClass:\"model-type\"},[_vm._v(_vm._s(model.model_type || '未知类型'))])])]),_c('div',{staticClass:\"model-card-body\"},[_c('div',{staticClass:\"model-filename\"},[_c('i',{staticClass:\"fa-solid fa-file\"}),_vm._v(\" \"+_vm._s(model.filename)+\" \")])]),_c('div',{staticClass:\"model-card-actions\"},[_c('button',{staticClass:\"action-btn view-btn\",attrs:{\"disabled\":_vm.actionLoading[model.filename]},on:{\"click\":function($event){return _vm.viewModelDetails(model.filename)}}},[_c('i',{staticClass:\"fa-solid fa-eye\"}),_vm._v(\" 详情 \")]),_c('button',{staticClass:\"action-btn rename-btn\",attrs:{\"disabled\":_vm.actionLoading[model.filename]},on:{\"click\":function($event){return _vm.showRenameDialog(model)}}},[_c('i',{staticClass:\"fa-solid fa-edit\"}),_vm._v(\" 重命名 \")]),_c('button',{staticClass:\"action-btn export-btn\",attrs:{\"disabled\":_vm.actionLoading[model.filename]},on:{\"click\":function($event){return _vm.exportModel(model.filename)}}},[_c('i',{staticClass:\"fa-solid fa-download\"}),_vm._v(\" 导出 \")]),_c('button',{staticClass:\"action-btn delete-btn\",attrs:{\"disabled\":_vm.actionLoading[model.filename]},on:{\"click\":function($event){return _vm.showDeleteDialog(model)}}},[_c('i',{staticClass:\"fa-solid fa-trash\"}),_vm._v(\" 删除 \")])]),(_vm.actionLoading[model.filename])?_c('div',{staticClass:\"action-loading\"},[_c('i',{staticClass:\"fa-solid fa-spinner fa-spin\"})]):_vm._e()])}),(_vm.filteredModels.length === 0)?_c('div',{staticClass:\"empty-state\"},[_c('i',{staticClass:\"fa-solid fa-folder-open\"}),_c('h3',[_vm._v(\"没有找到模型\")]),(_vm.searchKeyword)?_c('p',[_vm._v(\"尝试修改搜索关键词\")]):_c('p',[_vm._v(\"model文件夹中没有可用的模型文件\")])]):_vm._e()],2):_vm._e(),(_vm.showDetailsModal)?_c('div',{staticClass:\"modal-overlay\",on:{\"click\":_vm.closeDetailsModal}},[_c('div',{staticClass:\"modal-content details-modal\",on:{\"click\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"modal-header\"},[_vm._m(2),_c('button',{staticClass:\"close-btn\",on:{\"click\":_vm.closeDetailsModal}},[_c('i',{staticClass:\"fa-solid fa-times\"})])]),_c('div',{staticClass:\"modal-body\"},[(_vm.selectedModelDetails)?_c('div',{staticClass:\"details-grid\"},[_c('div',{staticClass:\"detail-item\"},[_c('label',[_vm._v(\"文件名:\")]),_c('span',[_vm._v(_vm._s(_vm.selectedModelDetails.filename))])]),_c('div',{staticClass:\"detail-item\"},[_c('label',[_vm._v(\"文件大小:\")]),_c('span',[_vm._v(_vm._s(_vm.selectedModelDetails.file_size))])]),_c('div',{staticClass:\"detail-item\"},[_c('label',[_vm._v(\"模型类型:\")]),_c('span',[_vm._v(_vm._s(_vm.selectedModelDetails.model_type))])]),_c('div',{staticClass:\"detail-item\"},[_c('label',[_vm._v(\"最后修改:\")]),_c('span',[_vm._v(_vm._s(_vm.formatDate(_vm.selectedModelDetails.last_modified)))])]),_c('div',{staticClass:\"detail-item\"},[_c('label',[_vm._v(\"配置文件:\")]),_c('span',{class:_vm.selectedModelDetails.config_available ? 'status-yes' : 'status-no'},[_vm._v(\" \"+_vm._s(_vm.selectedModelDetails.config_available ? '存在' : '缺少')+\" \")])]),(_vm.selectedModelDetails.config_available && _vm.selectedModelDetails.config_data)?_c('div',{staticClass:\"config-section\"},[_c('h4',[_vm._v(\"配置详情\")]),_c('div',{staticClass:\"config-data\"},[_c('pre',[_vm._v(_vm._s(JSON.stringify(_vm.selectedModelDetails.config_data, null, 2)))])])]):_vm._e()]):_c('div',{staticClass:\"loading-details\"},[_c('i',{staticClass:\"fa-solid fa-spinner fa-spin\"}),_vm._v(\" 加载详情中... \")])])])]):_vm._e(),(_vm.showRenameModal)?_c('div',{staticClass:\"modal-overlay\",on:{\"click\":_vm.closeRenameModal}},[_c('div',{staticClass:\"modal-content rename-modal\",on:{\"click\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"modal-header\"},[_vm._m(3),_c('button',{staticClass:\"close-btn\",on:{\"click\":_vm.closeRenameModal}},[_c('i',{staticClass:\"fa-solid fa-times\"})])]),_c('div',{staticClass:\"modal-body\"},[_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"当前名称:\")]),_c('span',{staticClass:\"current-name\"},[_vm._v(_vm._s(_vm.selectedModel && _vm.selectedModel.filename))])]),_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"newName\"}},[_vm._v(\"新名称:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newModelName),expression:\"newModelName\"}],staticClass:\"rename-input\",attrs:{\"id\":\"newName\",\"placeholder\":\"输入新的模型名称\"},domProps:{\"value\":(_vm.newModelName)},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.confirmRename.apply(null, arguments)},\"input\":function($event){if($event.target.composing)return;_vm.newModelName=$event.target.value}}}),_c('small',{staticClass:\"input-hint\"},[_vm._v(\"名称将自动添加.pth后缀\")])])]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-secondary\",on:{\"click\":_vm.closeRenameModal}},[_vm._v(\"取消\")]),_c('button',{staticClass:\"btn btn-primary\",attrs:{\"disabled\":!_vm.newModelName.trim() || _vm.renaming},on:{\"click\":_vm.confirmRename}},[(_vm.renaming)?_c('i',{staticClass:\"fa-solid fa-spinner fa-spin\"}):_vm._e(),_vm._v(\" \"+_vm._s(_vm.renaming ? '重命名中...' : '确认')+\" \")])])])]):_vm._e(),(_vm.showDeleteModal)?_c('div',{staticClass:\"modal-overlay\",on:{\"click\":_vm.closeDeleteModal}},[_c('div',{staticClass:\"modal-content delete-modal\",on:{\"click\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"modal-header\"},[_vm._m(4),_c('button',{staticClass:\"close-btn\",on:{\"click\":_vm.closeDeleteModal}},[_c('i',{staticClass:\"fa-solid fa-times\"})])]),_c('div',{staticClass:\"modal-body\"},[_c('p',[_vm._v(\"确定要删除模型 \"),_c('strong',[_vm._v(_vm._s(_vm.selectedModel && _vm.selectedModel.filename))]),_vm._v(\" 吗？\")]),_c('p',{staticClass:\"warning-text\"},[_vm._v(\"此操作不可撤销，模型文件和配置文件都会被删除。\")])]),_c('div',{staticClass:\"modal-footer\"},[_c('button',{staticClass:\"btn btn-secondary\",on:{\"click\":_vm.closeDeleteModal}},[_vm._v(\"取消\")]),_c('button',{staticClass:\"btn btn-danger\",attrs:{\"disabled\":_vm.deleting},on:{\"click\":_vm.confirmDelete}},[(_vm.deleting)?_c('i',{staticClass:\"fa-solid fa-spinner fa-spin\"}):_vm._e(),_vm._v(\" \"+_vm._s(_vm.deleting ? '删除中...' : '确认删除')+\" \")])])])]):_vm._e(),(_vm.notification.show)?_c('div',{class:['notification', _vm.notification.type]},[_c('i',{class:_vm.notificationIcon}),_vm._v(\" \"+_vm._s(_vm.notification.message)+\" \")]):_vm._e()])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('h2',{staticClass:\"section-title\"},[_c('i',{staticClass:\"fa-solid fa-database\"}),_vm._v(\" 模型管理 \")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"model-icon\"},[_c('i',{staticClass:\"fa-solid fa-brain\"})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('h3',[_c('i',{staticClass:\"fa-solid fa-info-circle\"}),_vm._v(\" 模型详情\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('h3',[_c('i',{staticClass:\"fa-solid fa-edit\"}),_vm._v(\" 重命名模型\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('h3',[_c('i',{staticClass:\"fa-solid fa-exclamation-triangle text-danger\"}),_vm._v(\" 删除模型\")])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <div class=\"header-section\">\r\n      <h2 class=\"section-title\">\r\n        <i class=\"fa-solid fa-database\"></i> 模型管理\r\n      </h2>\r\n      <button class=\"refresh-btn\" @click=\"loadModels\" :disabled=\"loading\">\r\n        <i class=\"fa-solid fa-sync\" :class=\"{ 'fa-spin': loading }\"></i> 刷新\r\n      </button>\r\n    </div>\r\n\r\n    <!-- 搜索区域 -->\r\n    <div class=\"search-section\">\r\n      <div class=\"search-container\">\r\n        <i class=\"fa-solid fa-search search-icon\"></i>\r\n        <input \r\n          v-model=\"searchKeyword\" \r\n          class=\"search-input\" \r\n          placeholder=\"搜索模型...\" \r\n        />\r\n      </div>\r\n      <div class=\"model-count\">\r\n        共 {{ filteredModels.length }} 个模型\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 加载状态 -->\r\n    <div v-if=\"loading\" class=\"loading-section\">\r\n      <i class=\"fa-solid fa-spinner fa-spin\"></i> 加载中...\r\n    </div>\r\n\r\n    <!-- 错误状态 -->\r\n    <div v-if=\"error\" class=\"error-section\">\r\n      <i class=\"fa-solid fa-exclamation-triangle\"></i> {{ error }}\r\n    </div>\r\n\r\n    <!-- 模型列表 -->\r\n    <div v-if=\"!loading && !error\" class=\"model-grid\">\r\n      <div \r\n        v-for=\"model in filteredModels\" \r\n        :key=\"model.filename\" \r\n        class=\"model-card\"\r\n      >\r\n        <div class=\"model-card-header\">\r\n          <div class=\"model-icon\">\r\n            <i class=\"fa-solid fa-brain\"></i>\r\n          </div>\r\n          <div class=\"model-info\">\r\n            <h3 class=\"model-name\">{{ model.display_name }}</h3>\r\n            <p class=\"model-type\">{{ model.model_type || '未知类型' }}</p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"model-card-body\">\r\n          <div class=\"model-filename\">\r\n            <i class=\"fa-solid fa-file\"></i> {{ model.filename }}\r\n          </div>\r\n        </div>\r\n        \r\n        <div class=\"model-card-actions\">\r\n          <button \r\n            class=\"action-btn view-btn\" \r\n            @click=\"viewModelDetails(model.filename)\"\r\n            :disabled=\"actionLoading[model.filename]\"\r\n          >\r\n            <i class=\"fa-solid fa-eye\"></i> 详情\r\n          </button>\r\n          <button \r\n            class=\"action-btn rename-btn\" \r\n            @click=\"showRenameDialog(model)\"\r\n            :disabled=\"actionLoading[model.filename]\"\r\n          >\r\n            <i class=\"fa-solid fa-edit\"></i> 重命名\r\n          </button>\r\n          <button \r\n            class=\"action-btn export-btn\" \r\n            @click=\"exportModel(model.filename)\"\r\n            :disabled=\"actionLoading[model.filename]\"\r\n          >\r\n            <i class=\"fa-solid fa-download\"></i> 导出\r\n          </button>\r\n          <button \r\n            class=\"action-btn delete-btn\" \r\n            @click=\"showDeleteDialog(model)\"\r\n            :disabled=\"actionLoading[model.filename]\"\r\n          >\r\n            <i class=\"fa-solid fa-trash\"></i> 删除\r\n          </button>\r\n        </div>\r\n        \r\n        <!-- 加载指示器 -->\r\n        <div v-if=\"actionLoading[model.filename]\" class=\"action-loading\">\r\n          <i class=\"fa-solid fa-spinner fa-spin\"></i>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- 空状态 -->\r\n      <div v-if=\"filteredModels.length === 0\" class=\"empty-state\">\r\n        <i class=\"fa-solid fa-folder-open\"></i>\r\n        <h3>没有找到模型</h3>\r\n        <p v-if=\"searchKeyword\">尝试修改搜索关键词</p>\r\n        <p v-else>model文件夹中没有可用的模型文件</p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 模型详情模态框 -->\r\n    <div v-if=\"showDetailsModal\" class=\"modal-overlay\" @click=\"closeDetailsModal\">\r\n      <div class=\"modal-content details-modal\" @click.stop>\r\n        <div class=\"modal-header\">\r\n          <h3><i class=\"fa-solid fa-info-circle\"></i> 模型详情</h3>\r\n          <button class=\"close-btn\" @click=\"closeDetailsModal\">\r\n            <i class=\"fa-solid fa-times\"></i>\r\n          </button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div v-if=\"selectedModelDetails\" class=\"details-grid\">\r\n            <div class=\"detail-item\">\r\n              <label>文件名:</label>\r\n              <span>{{ selectedModelDetails.filename }}</span>\r\n            </div>\r\n            <div class=\"detail-item\">\r\n              <label>文件大小:</label>\r\n              <span>{{ selectedModelDetails.file_size }}</span>\r\n            </div>\r\n            <div class=\"detail-item\">\r\n              <label>模型类型:</label>\r\n              <span>{{ selectedModelDetails.model_type }}</span>\r\n            </div>\r\n            <div class=\"detail-item\">\r\n              <label>最后修改:</label>\r\n              <span>{{ formatDate(selectedModelDetails.last_modified) }}</span>\r\n            </div>\r\n            <div class=\"detail-item\">\r\n              <label>配置文件:</label>\r\n              <span :class=\"selectedModelDetails.config_available ? 'status-yes' : 'status-no'\">\r\n                {{ selectedModelDetails.config_available ? '存在' : '缺少' }}\r\n              </span>\r\n            </div>\r\n            \r\n            <!-- 详细配置信息 -->\r\n            <div v-if=\"selectedModelDetails.config_available && selectedModelDetails.config_data\" class=\"config-section\">\r\n              <h4>配置详情</h4>\r\n              <div class=\"config-data\">\r\n                <pre>{{ JSON.stringify(selectedModelDetails.config_data, null, 2) }}</pre>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div v-else class=\"loading-details\">\r\n            <i class=\"fa-solid fa-spinner fa-spin\"></i> 加载详情中...\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 重命名模态框 -->\r\n    <div v-if=\"showRenameModal\" class=\"modal-overlay\" @click=\"closeRenameModal\">\r\n      <div class=\"modal-content rename-modal\" @click.stop>\r\n        <div class=\"modal-header\">\r\n          <h3><i class=\"fa-solid fa-edit\"></i> 重命名模型</h3>\r\n          <button class=\"close-btn\" @click=\"closeRenameModal\">\r\n            <i class=\"fa-solid fa-times\"></i>\r\n          </button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <div class=\"form-group\">\r\n            <label>当前名称:</label>\r\n            <span class=\"current-name\">{{ selectedModel && selectedModel.filename }}</span>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"newName\">新名称:</label>\r\n            <input \r\n              id=\"newName\"\r\n              v-model=\"newModelName\" \r\n              class=\"rename-input\" \r\n              placeholder=\"输入新的模型名称\"\r\n              @keyup.enter=\"confirmRename\"\r\n            />\r\n            <small class=\"input-hint\">名称将自动添加.pth后缀</small>\r\n          </div>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button class=\"btn btn-secondary\" @click=\"closeRenameModal\">取消</button>\r\n          <button \r\n            class=\"btn btn-primary\" \r\n            @click=\"confirmRename\"\r\n            :disabled=\"!newModelName.trim() || renaming\"\r\n          >\r\n            <i v-if=\"renaming\" class=\"fa-solid fa-spinner fa-spin\"></i>\r\n            {{ renaming ? '重命名中...' : '确认' }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 删除确认模态框 -->\r\n    <div v-if=\"showDeleteModal\" class=\"modal-overlay\" @click=\"closeDeleteModal\">\r\n      <div class=\"modal-content delete-modal\" @click.stop>\r\n        <div class=\"modal-header\">\r\n          <h3><i class=\"fa-solid fa-exclamation-triangle text-danger\"></i> 删除模型</h3>\r\n          <button class=\"close-btn\" @click=\"closeDeleteModal\">\r\n            <i class=\"fa-solid fa-times\"></i>\r\n          </button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <p>确定要删除模型 <strong>{{ selectedModel && selectedModel.filename }}</strong> 吗？</p>\r\n          <p class=\"warning-text\">此操作不可撤销，模型文件和配置文件都会被删除。</p>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button class=\"btn btn-secondary\" @click=\"closeDeleteModal\">取消</button>\r\n          <button \r\n            class=\"btn btn-danger\" \r\n            @click=\"confirmDelete\"\r\n            :disabled=\"deleting\"\r\n          >\r\n            <i v-if=\"deleting\" class=\"fa-solid fa-spinner fa-spin\"></i>\r\n            {{ deleting ? '删除中...' : '确认删除' }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 通知消息 -->\r\n    <div v-if=\"notification.show\" :class=\"['notification', notification.type]\">\r\n      <i :class=\"notificationIcon\"></i>\r\n      {{ notification.message }}\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { API_BASE_URL } from '../config.js';\r\nexport default {\r\n  data() {\r\n    return {\r\n      searchKeyword: '',\r\n      models: [],\r\n      loading: false,\r\n      error: null,\r\n      actionLoading: {},\r\n      \r\n      // 模态框状态\r\n      showDetailsModal: false,\r\n      showRenameModal: false,\r\n      showDeleteModal: false,\r\n      \r\n      // 选中的模型\r\n      selectedModel: null,\r\n      selectedModelDetails: null,\r\n      \r\n      // 重命名相关\r\n      newModelName: '',\r\n      renaming: false,\r\n      \r\n      // 删除相关\r\n      deleting: false,\r\n      \r\n      // 通知系统\r\n      notification: {\r\n        show: false,\r\n        message: '',\r\n        type: 'success' // success, error, warning\r\n      }\r\n    };\r\n  },\r\n  \r\n  computed: {\r\n    filteredModels() {\r\n      if (!this.searchKeyword.trim()) {\r\n        return this.models;\r\n      }\r\n      const keyword = this.searchKeyword.toLowerCase().trim();\r\n      return this.models.filter(model => \r\n        model.filename.toLowerCase().includes(keyword) ||\r\n        model.display_name.toLowerCase().includes(keyword) ||\r\n        (model.model_type && model.model_type.toLowerCase().includes(keyword))\r\n      );\r\n    },\r\n    \r\n    notificationIcon() {\r\n      const icons = {\r\n        success: 'fa-solid fa-check-circle',\r\n        error: 'fa-solid fa-exclamation-circle',\r\n        warning: 'fa-solid fa-exclamation-triangle'\r\n      };\r\n      return icons[this.notification.type] || icons.success;\r\n    }\r\n  },\r\n  \r\n  mounted() {\r\n    this.loadModels();\r\n  },\r\n  \r\n  methods: {\r\n    async loadModels() {\r\n      this.loading = true;\r\n      this.error = null;\r\n      \r\n      try {\r\n        const response = await fetch(`${API_BASE_URL}/models`);\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n        }\r\n        \r\n        const data = await response.json();\r\n        this.models = data.models || [];\r\n        \r\n        // 重置操作加载状态\r\n        this.actionLoading = {};\r\n        \r\n      } catch (error) {\r\n        console.error('加载模型列表失败:', error);\r\n        this.error = error.message || '加载模型列表失败';\r\n        this.models = [];\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    \r\n    async viewModelDetails(filename) {\r\n      this.setActionLoading(filename, true);\r\n      \r\n      try {\r\n        const response = await fetch(`${API_BASE_URL}/models/${filename}/details`);\r\n        if (!response.ok) {\r\n          throw new Error(`获取模型详情失败: ${response.statusText}`);\r\n        }\r\n        \r\n        this.selectedModelDetails = await response.json();\r\n        this.showDetailsModal = true;\r\n        \r\n      } catch (error) {\r\n        console.error('获取模型详情失败:', error);\r\n        this.showNotification('获取模型详情失败: ' + error.message, 'error');\r\n      } finally {\r\n        this.setActionLoading(filename, false);\r\n      }\r\n    },\r\n    \r\n    showRenameDialog(model) {\r\n      this.selectedModel = model;\r\n      this.newModelName = model.filename.replace('.pth', '');\r\n      this.showRenameModal = true;\r\n    },\r\n    \r\n    async confirmRename() {\r\n      if (!this.newModelName.trim() || this.renaming) return;\r\n      \r\n      this.renaming = true;\r\n      \r\n      try {\r\n        const response = await fetch(`${API_BASE_URL}/models/${this.selectedModel.filename}/rename`, {\r\n          method: 'PUT',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            new_name: this.newModelName.trim()\r\n          })\r\n        });\r\n        \r\n        if (!response.ok) {\r\n          const errorData = await response.json();\r\n          throw new Error(errorData.error || '重命名失败');\r\n        }\r\n        \r\n        this.showNotification('模型重命名成功', 'success');\r\n        this.closeRenameModal();\r\n        this.loadModels(); // 重新加载模型列表\r\n        \r\n      } catch (error) {\r\n        console.error('重命名模型失败:', error);\r\n        this.showNotification('重命名失败: ' + error.message, 'error');\r\n      } finally {\r\n        this.renaming = false;\r\n      }\r\n    },\r\n    \r\n    showDeleteDialog(model) {\r\n      this.selectedModel = model;\r\n      this.showDeleteModal = true;\r\n    },\r\n    \r\n    async confirmDelete() {\r\n      if (this.deleting) return;\r\n      \r\n      this.deleting = true;\r\n      \r\n      try {\r\n        const response = await fetch(`${API_BASE_URL}/models/${this.selectedModel.filename}`, {\r\n          method: 'DELETE'\r\n        });\r\n        \r\n        if (!response.ok) {\r\n          const errorData = await response.json();\r\n          throw new Error(errorData.error || '删除失败');\r\n        }\r\n        \r\n        this.showNotification('模型删除成功', 'success');\r\n        this.closeDeleteModal();\r\n        this.loadModels(); // 重新加载模型列表\r\n        \r\n      } catch (error) {\r\n        console.error('删除模型失败:', error);\r\n        this.showNotification('删除失败: ' + error.message, 'error');\r\n      } finally {\r\n        this.deleting = false;\r\n      }\r\n    },\r\n    \r\n    async exportModel(filename) {\r\n      this.setActionLoading(filename, true);\r\n      try {\r\n        const response = await fetch(`${API_BASE_URL}/models/${filename}/export`);\r\n        if (!response.ok) {\r\n          throw new Error(`导出失败: ${response.statusText}`);\r\n        }\r\n        // 兼容所有环境的文件名提取\r\n        const contentDisposition = response.headers.get('content-disposition');\r\n        let serverFilename = filename;\r\n        if (contentDisposition && contentDisposition.indexOf('filename=') !== -1) {\r\n          const tmp = contentDisposition.split('filename=')[1];\r\n          serverFilename = tmp ? tmp.replace(/\"/g, '') : filename;\r\n        }\r\n        // 创建下载链接\r\n        const blob = await response.blob();\r\n        const url = window.URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        a.download = serverFilename;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        window.URL.revokeObjectURL(url);\r\n        this.showNotification('模型导出成功', 'success');\r\n      } catch (error) {\r\n        console.error('导出模型失败:', error);\r\n        this.showNotification('导出失败: ' + error.message, 'error');\r\n      } finally {\r\n        this.setActionLoading(filename, false);\r\n      }\r\n    },\r\n    \r\n    // 辅助方法\r\n    setActionLoading(filename, loading) {\r\n      this.$set(this.actionLoading, filename, loading);\r\n    },\r\n    \r\n    closeDetailsModal() {\r\n      this.showDetailsModal = false;\r\n      this.selectedModelDetails = null;\r\n    },\r\n    \r\n    closeRenameModal() {\r\n      this.showRenameModal = false;\r\n      this.selectedModel = null;\r\n      this.newModelName = '';\r\n      this.renaming = false;\r\n    },\r\n    \r\n    closeDeleteModal() {\r\n      this.showDeleteModal = false;\r\n      this.selectedModel = null;\r\n      this.deleting = false;\r\n    },\r\n    \r\n    showNotification(message, type = 'success') {\r\n      this.notification = {\r\n        show: true,\r\n        message,\r\n        type\r\n      };\r\n      \r\n      // 3秒后自动隐藏\r\n      setTimeout(() => {\r\n        this.notification.show = false;\r\n      }, 3000);\r\n    },\r\n    \r\n    formatDate(timestamp) {\r\n      if (!timestamp) return '未知';\r\n      const date = new Date(timestamp * 1000);\r\n      return date.toLocaleString('zh-CN');\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 2.5rem 1.5rem 2rem 1.5rem;\r\n  font-family: 'Segoe UI', 'Arial', sans-serif;\r\n  background: linear-gradient(120deg, #f5f7fa 0%, #e3f0ff 100%);\r\n  min-height: 100vh;\r\n}\r\n\r\n.header-section {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-bottom: 2rem;\r\n  background: linear-gradient(90deg, #e3f0ff 60%, #f5f7fa 100%);\r\n  border-radius: 18px;\r\n  padding: 1.8rem;\r\n  box-shadow: 0 4px 18px rgba(80,120,200,0.10);\r\n}\r\n\r\n.section-title {\r\n  color: #2c3e50;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.7rem;\r\n  margin: 0;\r\n  font-size: 2.1rem;\r\n  font-weight: 700;\r\n  letter-spacing: 1px;\r\n}\r\n\r\n.section-title i {\r\n  color: #4a89dc;\r\n  font-size: 2.1rem;\r\n}\r\n\r\n.refresh-btn {\r\n  padding: 0.8rem 1.5rem;\r\n  background: linear-gradient(135deg, #4a89dc, #6dd5ed);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  font-size: 1.05rem;\r\n  font-weight: 500;\r\n  transition: all 0.3s;\r\n  box-shadow: 0 2px 8px rgba(74,137,220,0.15);\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.refresh-btn:hover:not(:disabled) {\r\n  background: linear-gradient(135deg, #3a79cc, #5cc5dd);\r\n  transform: translateY(-1px);\r\n  box-shadow: 0 4px 12px rgba(74,137,220,0.25);\r\n}\r\n\r\n.refresh-btn:disabled {\r\n  background: #b0c4de;\r\n  cursor: not-allowed;\r\n  transform: none;\r\n}\r\n\r\n.search-section {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  margin-bottom: 2rem;\r\n  background: linear-gradient(90deg, #f5f7fa 80%, #e3f0ff 100%);\r\n  border-radius: 12px;\r\n  padding: 1.5rem;\r\n  box-shadow: 0 2px 8px rgba(80,120,200,0.06);\r\n}\r\n\r\n.search-container {\r\n  position: relative;\r\n  flex: 1;\r\n  max-width: 400px;\r\n}\r\n\r\n.search-icon {\r\n  position: absolute;\r\n  left: 1rem;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  color: #4a89dc;\r\n  font-size: 1rem;\r\n}\r\n\r\n.search-input {\r\n  width: 100%;\r\n  padding: 0.75rem 1rem 0.75rem 2.5rem;\r\n  border: 1.5px solid #b0c4de;\r\n  border-radius: 10px;\r\n  font-size: 1.08rem;\r\n  font-weight: 500;\r\n  color: #34495e;\r\n  transition: all 0.3s;\r\n  background: linear-gradient(90deg, #f5f7fa 80%, #e3f0ff 100%);\r\n  box-shadow: 0 2px 8px rgba(80,120,200,0.06);\r\n}\r\n\r\n.search-input:focus {\r\n  outline: none;\r\n  border-color: #4a89dc;\r\n  box-shadow: 0 0 0 3px rgba(74,137,220,0.1);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.model-count {\r\n  color: #34495e;\r\n  font-weight: 600;\r\n  font-size: 1.05rem;\r\n  letter-spacing: 0.3px;\r\n}\r\n\r\n.loading-section, .error-section {\r\n  text-align: center;\r\n  padding: 3rem;\r\n  background: white;\r\n  border-radius: 18px;\r\n  box-shadow: 0 8px 32px rgba(80,120,200,0.10);\r\n}\r\n\r\n.loading-section {\r\n  color: #4a89dc;\r\n  font-size: 1.2rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.error-section {\r\n  color: #e74c3c;\r\n  font-size: 1.2rem;\r\n  font-weight: 500;\r\n  background: rgba(231, 76, 60, 0.05);\r\n}\r\n\r\n.model-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));\r\n  gap: 2rem;\r\n}\r\n\r\n.model-card {\r\n  background: white;\r\n  border-radius: 18px;\r\n  box-shadow: 0 8px 32px rgba(80,120,200,0.10);\r\n  transition: all 0.3s ease;\r\n  position: relative;\r\n  overflow: hidden;\r\n  border: none;\r\n}\r\n\r\n.model-card:hover {\r\n  transform: translateY(-5px);\r\n  box-shadow: 0 15px 40px rgba(74,137,220,0.15);\r\n}\r\n\r\n.model-card-header {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 1rem;\r\n  padding: 1.5rem;\r\n  background: linear-gradient(135deg, #2b5694 0%, #3a6cb9 100%);\r\n  color: white;\r\n}\r\n\r\n.model-icon {\r\n  width: 50px;\r\n  height: 50px;\r\n  border-radius: 12px;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 1.5rem;\r\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.model-info h3 {\r\n  margin: 0;\r\n  font-size: 1.2rem;\r\n  font-weight: 600;\r\n  letter-spacing: 0.3px;\r\n}\r\n\r\n.model-type {\r\n  margin: 0.25rem 0 0 0;\r\n  opacity: 0.9;\r\n  font-size: 0.9rem;\r\n  letter-spacing: 0.2px;\r\n}\r\n\r\n.model-card-body {\r\n  padding: 1.8rem;\r\n}\r\n\r\n.model-description {\r\n  color: #34495e;\r\n  margin-bottom: 1rem;\r\n  line-height: 1.6;\r\n  min-height: 2.5rem;\r\n  font-size: 1.05rem;\r\n}\r\n\r\n.model-filename {\r\n  color: #4a89dc;\r\n  font-size: 0.98rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  font-family: 'Monaco', 'Courier New', monospace;\r\n  background: rgba(74,137,220,0.1);\r\n  padding: 0.6rem 0.8rem;\r\n  border-radius: 8px;\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n}\r\n\r\n.model-card-actions {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 0.8rem;\r\n  padding: 0.5rem 1.8rem 1.8rem;\r\n}\r\n\r\n.action-btn {\r\n  padding: 0.7rem;\r\n  border: none;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  font-size: 0.95rem;\r\n  transition: all 0.3s;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-shadow: 0 2px 8px rgba(80,120,200,0.08);\r\n  gap: 0.5rem;\r\n}\r\n\r\n.view-btn {\r\n  background: linear-gradient(135deg, #74b9ff, #0984e3);\r\n  color: white;\r\n}\r\n\r\n.rename-btn {\r\n  background: linear-gradient(135deg, #fdcb6e, #e17055);\r\n  color: white;\r\n}\r\n\r\n.export-btn {\r\n  background: linear-gradient(135deg, #00b894, #00a085);\r\n  color: white;\r\n}\r\n\r\n.delete-btn {\r\n  background: linear-gradient(135deg, #fd79a8, #e84393);\r\n  color: white;\r\n}\r\n\r\n.action-btn:hover:not(:disabled) {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.action-btn:disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n  transform: none;\r\n}\r\n\r\n.action-loading {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(255, 255, 255, 0.9);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  color: #3498db;\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.empty-state {\r\n  grid-column: 1 / -1;\r\n  text-align: center;\r\n  padding: 4rem 2rem;\r\n  background: white;\r\n  border-radius: 18px;\r\n  box-shadow: 0 8px 30px rgba(80,120,200,0.1);\r\n  border: 1px solid rgba(80,120,200,0.05);\r\n}\r\n\r\n.empty-state i {\r\n  font-size: 4rem;\r\n  color: #4a89dc;\r\n  opacity: 0.4;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.empty-state h3 {\r\n  color: #2c3e50;\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n.empty-state p {\r\n  color: #7f8c8d;\r\n}\r\n\r\n/* 模态框样式 */\r\n.modal-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.6);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 1000;\r\n  backdrop-filter: blur(5px);\r\n}\r\n\r\n.modal-content {\r\n  background: white;\r\n  border-radius: 16px;\r\n  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);\r\n  max-width: 90vw;\r\n  max-height: 90vh;\r\n  overflow-y: auto;\r\n}\r\n\r\n.details-modal {\r\n  width: 600px;\r\n}\r\n\r\n.rename-modal, .delete-modal {\r\n  width: 450px;\r\n}\r\n\r\n.modal-header {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 1.5rem;\r\n  background: linear-gradient(135deg, #4a89dc 0%, #5b9dff 100%);\r\n  color: white;\r\n  border-radius: 16px 16px 0 0;\r\n}\r\n\r\n.modal-header h3 {\r\n  margin: 0;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.close-btn {\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  font-size: 1.5rem;\r\n  cursor: pointer;\r\n  padding: 0.25rem;\r\n  border-radius: 4px;\r\n  transition: background 0.3s ease;\r\n}\r\n\r\n.close-btn:hover {\r\n  background: rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n.modal-body {\r\n  padding: 2rem;\r\n}\r\n\r\n.details-grid {\r\n  display: grid;\r\n  gap: 1rem;\r\n}\r\n\r\n.detail-item {\r\n  display: grid;\r\n  grid-template-columns: 140px 1fr;\r\n  gap: 1rem;\r\n  align-items: start;\r\n  padding: 0.9rem;\r\n  background: linear-gradient(90deg, #f5f7fa 80%, #e3f0ff 100%);\r\n  border-radius: 10px;\r\n  border: 1px solid rgba(80,120,200,0.05);\r\n  box-shadow: 0 2px 8px rgba(80,120,200,0.04);\r\n}\r\n\r\n.detail-item label {\r\n  font-weight: 600;\r\n  color: #2c3e50;\r\n  letter-spacing: 0.3px;\r\n}\r\n\r\n.detail-item span {\r\n  color: #34495e;\r\n  font-weight: 500;\r\n}\r\n\r\n.status-yes {\r\n  color: #27ae60 !important;\r\n  font-weight: 600;\r\n}\r\n\r\n.status-no {\r\n  color: #e74c3c !important;\r\n  font-weight: 600;\r\n}\r\n\r\n.config-section {\r\n  grid-column: 1 / -1;\r\n  margin-top: 1.5rem;\r\n  background: linear-gradient(90deg, #f8fafd 80%, #f0f7ff 100%);\r\n  border-radius: 12px;\r\n  padding: 1.2rem;\r\n  border: 1px solid rgba(80,120,200,0.08);\r\n  box-shadow: 0 2px 8px rgba(80,120,200,0.04);\r\n}\r\n\r\n.config-section h4 {\r\n  color: #2c3e50;\r\n  margin-bottom: 1.2rem;\r\n  font-size: 1.08rem;\r\n  font-weight: 600;\r\n  letter-spacing: 0.3px;\r\n  padding-bottom: 0.6rem;\r\n  border-bottom: 1px solid rgba(80,120,200,0.1);\r\n}\r\n\r\n.config-data {\r\n  background: #2d3748;\r\n  color: #e2e8f0;\r\n  padding: 1.2rem;\r\n  border-radius: 8px;\r\n  font-family: 'Monaco', 'Courier New', monospace;\r\n  font-size: 0.9rem;\r\n  line-height: 1.5;\r\n  overflow-x: auto;\r\n  max-height: 300px;\r\n  overflow-y: auto;\r\n  box-shadow: inset 0 0 10px rgba(0,0,0,0.1);\r\n  border: 1px solid #4a5568;\r\n}\r\n\r\n.loading-details {\r\n  text-align: center;\r\n  padding: 2.5rem;\r\n  color: #4a89dc;\r\n  font-size: 1.05rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 1.5rem;\r\n}\r\n\r\n.form-group label {\r\n  display: block;\r\n  margin-bottom: 0.6rem;\r\n  font-weight: 600;\r\n  color: #2c3e50;\r\n  font-size: 1.05rem;\r\n  letter-spacing: 0.3px;\r\n}\r\n\r\n.current-name {\r\n  color: #34495e;\r\n  font-family: 'Monaco', 'Courier New', monospace;\r\n  background: rgba(74,137,220,0.08);\r\n  padding: 0.7rem 1rem;\r\n  border-radius: 8px;\r\n  display: inline-block;\r\n  border: 1px solid rgba(74,137,220,0.15);\r\n  font-size: 0.95rem;\r\n  font-weight: 500;\r\n}\r\n\r\n.rename-input {\r\n  width: 90%;\r\n  padding: 1rem 1rem;\r\n  border: 1.5px solid #b0c4de;\r\n  border-radius: 10px;\r\n  font-size: 1.05rem;\r\n  font-weight: 500;\r\n  color: #34495e;\r\n  transition: all 0.3s;\r\n  background: linear-gradient(90deg, #f5f7fa 80%, #e3f0ff 100%);\r\n  box-shadow: 0 2px 8px rgba(80,120,200,0.06);\r\n}\r\n\r\n.rename-input:focus {\r\n  outline: none;\r\n  border-color: #4a89dc;\r\n  box-shadow: 0 0 0 3px rgba(74,137,220,0.1);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.input-hint {\r\n  color: #7f8c8d;\r\n  font-size: 0.8rem;\r\n  margin-top: 0.25rem;\r\n  display: block;\r\n}\r\n\r\n.modal-footer {\r\n  display: flex;\r\n  gap: 1rem;\r\n  justify-content: flex-end;\r\n  padding: 1.5rem;\r\n  background: #f8f9fa;\r\n  border-radius: 0 0 16px 16px;\r\n}\r\n\r\n.btn {\r\n  padding: 0.75rem 1.5rem;\r\n  border: none;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  font-weight: 500;\r\n  transition: all 0.3s ease;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.btn-primary {\r\n  background: linear-gradient(135deg, #4a89dc, #5b9dff);\r\n  color: white;\r\n  box-shadow: 0 2px 8px rgba(74,137,220,0.15);\r\n  font-weight: 500;\r\n}\r\n\r\n.btn-secondary {\r\n  background: linear-gradient(135deg, #8fa6c2, #a1b5d0);\r\n  color: white;\r\n  box-shadow: 0 2px 8px rgba(143,166,194,0.15);\r\n  font-weight: 500;\r\n}\r\n\r\n.btn-danger {\r\n  background: linear-gradient(135deg, #e74c3c, #c0392b);\r\n  color: white;\r\n  box-shadow: 0 2px 8px rgba(231,76,60,0.15);\r\n  font-weight: 500;\r\n}\r\n\r\n.btn:hover:not(:disabled) {\r\n  transform: translateY(-2px);\r\n  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.btn:disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n  transform: none;\r\n}\r\n\r\n.warning-text {\r\n  color: #e67e22;\r\n  font-style: italic;\r\n  margin-top: 0.5rem;\r\n}\r\n\r\n.text-danger {\r\n  color: #e74c3c;\r\n}\r\n\r\n/* 通知样式 */\r\n.notification {\r\n  position: fixed;\r\n  top: 2rem;\r\n  right: 2rem;\r\n  padding: 1rem 1.5rem;\r\n  border-radius: 8px;\r\n  color: white;\r\n  font-weight: 500;\r\n  z-index: 1100;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  min-width: 300px;\r\n  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);\r\n  animation: slideIn 0.3s ease;\r\n}\r\n\r\n@keyframes slideIn {\r\n  from {\r\n    transform: translateX(100%);\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    transform: translateX(0);\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n.notification.success {\r\n  background: linear-gradient(135deg, #27ae60, #2ecc71);\r\n}\r\n\r\n.notification.error {\r\n  background: linear-gradient(135deg, #e74c3c, #c0392b);\r\n}\r\n\r\n.notification.warning {\r\n  background: linear-gradient(135deg, #f39c12, #e67e22);\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .container {\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .model-grid {\r\n    grid-template-columns: 1fr;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .header-section {\r\n    flex-direction: column;\r\n    gap: 1rem;\r\n    text-align: center;\r\n  }\r\n  \r\n  .search-section {\r\n    flex-direction: column;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .model-card-actions {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .modal-content {\r\n    margin: 1rem;\r\n    width: auto;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModelManage.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModelManage.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ModelManage.vue?vue&type=template&id=70392694&scoped=true\"\nimport script from \"./ModelManage.vue?vue&type=script&lang=js\"\nexport * from \"./ModelManage.vue?vue&type=script&lang=js\"\nimport style0 from \"./ModelManage.vue?vue&type=style&index=0&id=70392694&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"70392694\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div id=\"app\">\r\n    <div class=\"header\">\r\n      <h1>Virgenta</h1>\r\n      <p>基于HyperFusion cortex(HFC)的轻量病毒基因组注释系统-高效解析泛基因组非核心基因突变</p>\r\n      <p>全自动预测病毒基因中的蛋白质序列并生成报告</p>\r\n    </div>\r\n    <div class=\"main-container\">\r\n      <div class=\"sidebar\">\r\n        <button @click=\"showPage('GeneVisualization')\" :class=\"{ active: currentPage === 'GeneVisualization' }\">\r\n          <i class=\"fa-solid fa-flask-vial\"></i> 基因组注释\r\n        </button>\r\n        <button @click=\"showPage('SummaryReport')\" :class=\"{ active: currentPage === 'SummaryReport' }\">\r\n          <i class=\"fa-solid fa-folder-open\"></i>  总报告管理\r\n        </button>\r\n        <button @click=\"showPage('ModelTrain')\" :class=\"{ active: currentPage === 'ModelTrain' }\">\r\n          <i class=\"fa-solid fa-folder-open\"></i>  模型训练\r\n        </button>\r\n        <button @click=\"showPage('ModelManage')\" :class=\"{ active: currentPage === 'ModelManage' }\">\r\n          <i class=\"fa-solid fa-folder-open\"></i>  模型管理\r\n        </button>\r\n      </div>\r\n      <div class=\"content\">\r\n        <transition name=\"fade\" mode=\"out-in\">\r\n          <component :is=\"currentPage\"></component>\r\n        </transition>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport GeneVisualization from './components/GeneVisualization.vue';\r\nimport SummaryReport from './components/SummaryReport.vue';\r\nimport ModelTrain from './components/ModelTrain.vue';\r\nimport ModelManage from './components/ModelManage.vue';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      currentPage: 'GeneVisualization'\r\n    };\r\n  },\r\n  methods: {\r\n    showPage(page) {\r\n      this.currentPage = page;\r\n    }\r\n  },\r\n  components: {\r\n    GeneVisualization,\r\n    SummaryReport,\r\n    ModelTrain,\r\n    ModelManage\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* 全局样式 */\r\n* {\r\n  box-sizing: border-box;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\nbody {\r\n  font-family: 'Segoe UI', 'Arial', sans-serif;\r\n  background: #f5f7fa;\r\n  color: #2c3e50;\r\n  line-height: 1.6;\r\n}\r\n\r\n#app {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100vh;\r\n}\r\n\r\n/* 美化后的头部样式 */\r\n.header {\r\n  background: linear-gradient(135deg, #1e3c6e 0%, #2a5190 100%);\r\n  color: white;\r\n  padding: 2.2rem 1rem;\r\n  text-align: center;\r\n  position: relative;\r\n  overflow: hidden;\r\n  box-shadow: 0 8px 32px rgba(30,60,110,0.2);\r\n  border-bottom-left-radius: 22px;\r\n  border-bottom-right-radius: 22px;\r\n}\r\n\r\n.header h1 {\r\n  font-family: 'Segoe UI', 'Arial', sans-serif;\r\n  font-size: 3.5rem;\r\n  margin-bottom: 1rem;\r\n  color: #fff;\r\n  text-shadow: 0 0 15px rgba(255, 255, 255, 0.7), 0 2px 5px rgba(0, 0, 0, 0.15);\r\n  animation: fadeInDown 1s ease;\r\n  font-weight: 700;\r\n  letter-spacing: 1px;\r\n}\r\n\r\n.header p {\r\n  font-family: 'Segoe UI', 'Arial', sans-serif;\r\n  color: rgba(255, 255, 255, 0.95);\r\n  font-size: 1.13rem;\r\n  margin-bottom: 0.5rem;\r\n  letter-spacing: 0.5px;\r\n  animation: fadeInUp 1s ease;\r\n  font-weight: 400;\r\n  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n/* 模拟生物细胞的背景元素 */\r\n.header::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: -50%;\r\n  left: -50%;\r\n  width: 200%;\r\n  height: 800%;\r\n  background: radial-gradient(circle, rgba(255, 255, 255, 0.15) 10%, transparent 10%);\r\n  background-size: 20px 20px;\r\n  z-index: 0;\r\n  pointer-events: none;\r\n  animation: rotate 40s linear infinite;\r\n  opacity: 0.8;\r\n}\r\n\r\n@keyframes fadeInDown {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(-20px);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n@keyframes fadeInUp {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(20px);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n@keyframes rotate {\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n.main-container {\r\n  display: flex;\r\n  flex: 1;\r\n  overflow: hidden;\r\n  margin: 15px;\r\n  border-radius: 18px;\r\n  box-shadow: 0 8px 24px rgba(0,0,0,0.08);\r\n  background: white;\r\n}\r\n\r\n.sidebar {\r\n  width: 230px;\r\n  background: linear-gradient(180deg, #1e3c6e 0%, #27487e 100%);\r\n  padding: 2rem 1.2rem;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1.2rem;\r\n  border-top-left-radius: 18px;\r\n  border-bottom-left-radius: 18px;\r\n  box-shadow: 2px 0 15px rgba(0,0,0,0.1);\r\n}\r\n\r\n.sidebar button {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.9rem;\r\n  padding: 1rem 1.2rem;\r\n  background-color: transparent;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 10px;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  font-size: 1.05rem;\r\n  text-align: left;\r\n  font-weight: 500;\r\n  letter-spacing: 0.3px;\r\n}\r\n\r\n.sidebar button:hover {\r\n  background-color: rgba(42, 81, 144, 0.75);\r\n  transform: translateX(5px);\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);\r\n}\r\n\r\n.sidebar button.active {\r\n  background-color: #3a6cb9;\r\n  color: white;\r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);\r\n  font-weight: 600;\r\n  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.sidebar button i {\r\n  font-size: 1.3rem;\r\n  color: rgba(255, 255, 255, 0.95);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.sidebar button:hover i {\r\n  transform: scale(1.1);\r\n}\r\n\r\n.content {\r\n  flex: 1;\r\n  padding: 2rem;\r\n  overflow-y: auto;\r\n  background: #ffffff;\r\n  border-top-right-radius: 18px;\r\n  border-bottom-right-radius: 18px;\r\n}\r\n\r\n/* 过渡效果 */\r\n.fade-enter-active,\r\n.fade-leave-active {\r\n  transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);\r\n}\r\n\r\n.fade-enter {\r\n  opacity: 0;\r\n  transform: translateY(10px);\r\n}\r\n\r\n.fade-leave-to {\r\n  opacity: 0;\r\n  transform: translateY(-10px);\r\n}\r\n\r\n.icon-dna:before {\r\n  font-family: 'iconfont';\r\n  content: '\\e61a';\r\n  color: #2a5190;\r\n}\r\n\r\n.icon-report:before {\r\n  font-family: 'iconfont';\r\n  content: '\\e60a';\r\n  color: #2a5190;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .main-container {\r\n    flex-direction: column;\r\n    margin: 10px;\r\n  }\r\n  \r\n  .sidebar {\r\n    width: 100%;\r\n    border-radius: 18px 18px 0 0;\r\n    padding: 1rem;\r\n  }\r\n  \r\n  .content {\r\n    border-radius: 0 0 18px 18px;\r\n    padding: 1.5rem;\r\n  }\r\n  \r\n  .header h1 {\r\n    font-size: 2.5rem;\r\n  }\r\n  \r\n  .header p {\r\n    font-size: 1rem;\r\n  }\r\n}\r\n</style>    ","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=a7483a70&scoped=true\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=a7483a70&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a7483a70\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\r\nimport App from './App.vue';\r\n\r\nVue.config.productionTip = false;\r\n\r\nnew Vue({\r\n  render: h => h(App),\r\n}).$mount('#app');\r\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModelTrain.vue?vue&type=style&index=0&id=c132f6c0&prod&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModelManage.vue?vue&type=style&index=0&id=70392694&prod&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GeneVisualization.vue?vue&type=style&index=0&id=327c7932&prod&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SummaryReport.vue?vue&type=style&index=0&id=8a675cba&prod&scoped=true&lang=css\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=a7483a70&prod&scoped=true&lang=css\""],"sourceRoot":""}